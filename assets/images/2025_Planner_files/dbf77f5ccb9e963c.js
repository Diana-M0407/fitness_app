(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[68655],{

/***/ 809943:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);__web_req__(59401);__web_req__(659506);self._5880d4398c473aa67256e87589eaef11 = self._5880d4398c473aa67256e87589eaef11 || {};(function(__c) {var Er;var yr;var mq;var kq;var lq;var br;var Hp;var Pp;var dq;var yp;var Kp;var tr;var Cp;var Np;var Ap;var Wo=__c.Wo;var Tp;var Sp;var or;var nr;var Qp;var Op;var jr;var da=__c.da;var Ip;var wp;var Rq;var Wq;var Vq;var Xq;var Tq;var Uq;var Yq;var zp;var Dp;var Pq;var Sq;var hb=__c.hb;var Qq;var ip;var hp;var gp;var Oq;var Hq;var ah=__c.ah;var zq;var yq;var xq;var wq;var vq;var rq;var dp;var Yp;var Xp;var Up;var Lp;var vp;var up;var Fp;var Gp;var Ep;var xp;var ka=__c.ka;var m=__c.m;var r=__c.r;var fp;
var ja=__c.ja;
var Wjb,Xjb,ep,Yjb,Zjb,$jb,jp,ckb,ekb,kp,lp,hkb,fkb,gkb,jkb,mp,nkb,okb,pkb,qkb,rkb,skb,tkb,ukb,np,op,pp,vkb,wkb,rp,zkb,tp,Dkb,Fkb,Gkb,Ekb,Ikb,Jkb,Kkb,Lkb,Mkb,Nkb,Ykb,clb,glb,hlb,ilb,nlb,olb,plb,qlb,rlb,ulb,vlb,xlb,ylb,Alb,Clb,Dlb,Vp,Flb,Hlb,Ilb,Llb,Mlb,aq,Nlb,Olb,Plb,cq,Rlb,Slb,Tlb,Vlb,Wlb,Xlb,Ylb,$lb,amb,nq,lmb,oq,pq,nmb,omb,qq,rmb,tmb,smb,umb,vmb,xmb,zmb,qmb,Amb,Cmb,Bmb,Dmb,Fmb,Gmb,Aq,Hmb,Kmb,Imb,Jmb,Cq,Nmb,Pmb,Mmb,Omb,Qmb,Rmb,Lmb,Smb,Tmb,Eq,Vmb,Wmb,Xmb,Fq,Ymb,Zmb,$mb,anb,enb,Kq,Jq,fnb,Lq,gnb,hnb,
inb,jnb,knb,lnb,mnb,onb,Mq,pnb,rnb,Nq,snb;Wjb=function(a){if(a==null||typeof a==="symbol")return String(a);try{return JSON.stringify(a)}catch(b){return String(a)}};dp=__c.dp=function(a,b,c){var d=[];if(a!==b)throw Error(c==null?__c.iaa("{} != {}",Wjb(a),Wjb(b)):__c.iaa(c,...d));};
Xjb=function(a,b){ja(b.length>0);switch(b.length){case 1:return b[0];case 2:return a.compose(b[0],b[1]);case 3:return a.compose(a.compose(b[0],b[1]),b[2]);case 4:return a.compose(a.compose(b[0],b[1]),a.compose(b[2],b[3]));default:const c=b.slice();for(b=b.length;b>1;){let d=0;for(let e=0;e<b;e+=2)c[d++]=e+1<b?a.compose(c[e],c[e+1]):c[e];b=d}return c[0]}};ep=function(a,b,c){ja(a.wi(b,c),"{} != {}",b,c)};Yjb=function(a,b){return new fp(b(a.Pu),b(a.rv),a.twa,a.LCa)};
gp=__c.gp=function(a,b){return new fp(a,b,!1,!1)};hp=__c.hp=function(a){return new fp(void 0,a,!0,!1)};ip=__c.ip=function(a,b){a.twa||(a.twa=b.twa);a.LCa||(a.LCa=b.LCa);return b};Zjb=function(a,b=!0){a.twa||(a.twa=b)};$jb=function(a,b=!0){a.LCa||(a.LCa=b)};jp=function(a){return a===1?akb:{type:0,length:a}};ckb=function(a){return a===1?bkb:{type:1,length:a}};ekb=function(a){return a===1?dkb:{type:2,length:a}};kp=function(a,b){return{type:3,state:a,shift:b}};lp=function(a,b){return{type:4,delta:a,shift:b}};
hkb=function(a){switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;case 2:return`T(${a.length})`;case 3:return`I(${fkb(a.state)})${gkb(a.shift)}`;case 4:return`U(${fkb(a.delta)})${gkb(a.shift)}`;default:throw new r(a);}};fkb=function(a){return a!=null?a:"\u22a5"};gkb=function(a){return a!=null?`[${a.ei},${a.Jm}]`:""};
jkb=function(a,b){return b&&a.hPa?new ikb(a.ops.map(c=>c.type===3&&c.shift?kp(c.state,{ei:c.shift.ei+b,Jm:c.shift.Jm+b}):c.type===4&&c.shift?lp(c.delta,{ei:c.shift.ei+b,Jm:c.shift.Jm+b}):c),a.pre,a.post,a.hPa):a};mp=function(a,b){const c=m(a.Mm);if(c.type===0)return a.WD(0,1),kkb;if(c.type===1)return a.WD(1,1),lkb;if(c.type===2)return a.WD(2,1),mkb;if(c.type!==b)throw Error();a.Mm=a.ops[a.i++];return c};nkb=function(a){return a.every(()=>!1)};
okb=function(a,b){ja(b.length>0);const c=a.length;b.forEach((d,e)=>a.list[c+e]=d);a.length+=b.length};pkb=function(a){ja(a.$Ka<a.input.length,"{} >= {}",a.$Ka,a.input.length);return a.input[a.$Ka++]};qkb=function(a,b){b=a.$Ka+b;ja(b<=a.input.length);const c=a.input.slice(a.$Ka,b);a.$Ka=b;return c};rkb=function(a,b){a.ukb||(a.ukb=new Set);ja(!a.ukb.has(b),"duplicate modification: {}",b);a.ukb.add(b)};skb=function(a,b,c){rkb(a,b);(a.vyc||(a.vyc=new Map)).set(b,c)};
tkb=function(a,b,c){rkb(a,b);(a.uyc||(a.uyc=new Map)).set(b,c)};ukb=function(a,b){let {ei:c,Jm:d}=b;var e=a.vyc;a=a.uyc;if(e){const f=e.get(c);f!=null&&(c=f,e.delete(c))}a&&(e=a.get(d),e!=null&&(d=e,a.delete(d)));return c!==b.ei||d!==b.Jm?{ei:c,Jm:d}:b};np=function(a,b,c){rkb(a,b);c!=null&&(a.D6a||(a.D6a=new Map)).set(b,c)};op=function(a,b,c){(a.IQa||(a.IQa=new Map)).set(b,c)};pp=function(a,b,c){(a.YPa||(a.YPa=new Map)).set(c,b)};vkb=function({ei:a,Jm:b}){return{ei:b,Jm:a}};
wkb=function(a,b){return a?!!b&&a.ei===b.ei&&a.Jm===b.Jm:!b};__c.xkb=function(a){return a.filter(()=>!0)};rp=function(a,b){ja(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};zkb=function(a,b){return a===sp?b:b===sp?a:new ykb(a,b)};tp=function(a,b){return b===sp?sp:new a(b)};Dkb=function(a){a:{a={items:tp(Akb,a),ik:sp};for(b in a)if(a[b]!==sp){var b=new Bkb(a);break a}b=sp}return zkb(Ckb,b)};
Fkb=function(a,b){ka(a.YL!=null,"mutable not connected");try{a.k0(b),a.domain.isIdentity(b)||a.N1b&&a.N1b.reportChanged()}catch(c){throw a.error(c),c;}Ekb(a,b)};Gkb=function(a,b){if(a.clients){for(const c of a.clients.keys())try{c.error(b)}catch(d){}a.clients=void 0}};Ekb=function(a,b){ka(a.YL!=null);if(a.clients){var c=!1;for(const d of a.clients.keys())try{d.next(b)}catch(e){try{d.error(`could not publish to incoming: ${e}`)}catch(f){}a.clients.delete(d);c=!0}c&&!a.clients.size&&(a.clients=void 0)}};
up=__c.up=function(a,b){a.Nfc||(a.Nfc={next:c=>{a.YL&&(a.N1b&&a.N1b.reportChanged(),Ekb(a,c),a.YL.next(c))},error:c=>{a.error(c)}});return new Hkb(a.Nfc,b)};vp=__c.vp=function(a,b,c){b=a.AA(b);a=a.connect(b,c);return{mutable:b,Yx:a}};wp=__c.wp=function(a,b,c,d){a.destroy(d,b);c.complete()};Ikb=function(a,b){let c=a.rows[b];c==null&&(c=a.rows[b]=a.ikd++);return c};Jkb=function(a,b){let c=a.cols[b];c==null&&(c=a.cols[b]=a.gkd++);return c};
Kkb=function(a,b,c,d=()=>!0){a.cols.spliceWithArray(b,0,Array(c));for(let e=0;e<a.rows.length;e++){const f=a.get(e,b-1);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(e,g,f)}};Lkb=function(a,b,c,d=()=>!0){a.rows.spliceWithArray(b,0,Array(c));for(let e=0;e<a.cols.length;e++){const f=a.get(b-1,e);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(g,e,f)}};Mkb=function(a,b){ja(a.cQ(b),"invalid value: {}",b);return b};
Nkb=function(a,b,c){if(!a.Dx(b,c))throw Error(`Invalid argument: ${a.stringify(b)} != ${a.stringify(c)}`);};xp=__c.xp=function(a){return new Okb(a)};yp=__c.yp=function(...a){return a.length===1?new Pkb(a[0]):new Qkb(new Set(a))};zp=__c.zp=function(a,b){return new Rkb(a,b,tp(Akb,a.serializer))};__c.Ukb=function(a,b){return new Skb(a,b,tp(Tkb,b.serializer))};Ap=__c.Ap=function(a,b){return new Vkb(a,b)};__c.Bp=function(a,b){return new Wkb(a,b)};Cp=__c.Cp=function(a){return new Xkb(a)};
Ykb=function(a,b){ja(Number.isSafeInteger(a)&&Number.isSafeInteger(b)&&a<=b);return xp(c=>Number.isSafeInteger(c)&&a<=c&&c<=b)};Dp=__c.Dp=function(a,b){ja(Number.isFinite(a)&&Number.isFinite(b)&&a<=b);return xp(c=>Number.isFinite(c)&&a<=c&&c<=b)};Fp=__c.Fp=function(a){return a instanceof Ep?new Zkb(a,tp($kb,a.serializer)):new alb(a,tp($kb,a.l$b),tp($kb,a.Ota))};clb=function(a){return new blb(a)};Gp=__c.Gp=function(a){return new dlb(a,a.serializer)};Hp=__c.Hp=function(a){return new elb(a,a.Ota)};
Ip=__c.Ip=function(a){return Gp(Fp(a))};glb=function(a,b,c){return c==null||a.component.isIdentity(c)?flb:new Map([[b,c]])};hlb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};ilb=function(a,b,c){const d=up(a,g=>a.domain.update(b,g)),{mutable:e,Yx:f}=vp(a.type,c,d);return{gZc:{to:f,from:d},value:e}};__c.Jp=function(...a){[,a]=a.length===1?[void 0,a[0]]:a;return new jlb(a,tp(Tkb,a.Ota))};Kp=__c.Kp=function(a){return new klb(a,a.serializer)};
__c.Mp=function({get:a,set:b,equals:c}){return new llb(Lp(a,{set:b,equals:c}))};nlb=function(a,b,c){return mlb.of({...a,...b,...c})};olb=function(...a){const b=new Set;for(const c of a)for(const d in c)ja(!b.has(d),'duplicate key: "{}"',d),b.add(d)};plb=function(a,b){return up(a,c=>({[b]:c}))};qlb=function(a,b){return up(a,c=>({[b]:c}))};
rlb=function(a,b){if(!a)return b;if(!b)return a;const c=a.create,d=b.create;return{Ub:{...a.Ub,...b.Ub},attributes:{...a.attributes,...b.attributes},create:e=>{const {Ub:f,attributes:g}=c(e),{Ub:h,attributes:k}=d({...e,...f,...g});return{Ub:{...f,...h},attributes:{...g,...k}}}}};Np=__c.Np=function(a){return slb.Di(a)};Op=__c.Op=function(a){return a.domain.Mg()};Pp=__c.Pp=function(a){return new __c.tlb(a,Dkb(a.Ota))};Qp=__c.Qp=function(){throw Error("list not modifiable");};
__c.Rp=function(a,b){return a?b?(...c)=>{a(...c);b(...c)}:a:b};ulb=function(a,b){a=a.length;ja(0<=b&&b<a,"{} \u2209 [0, {})",b,a)};vlb=function(a,b){a=a.length;ja(0<b&&b<a,"{} \u2209 (0, {})",b,a)};__c.wlb=function(a,b){return a?b?{ib:__c.Rp(a.ib,b.ib),item:__c.Rp(a.item,b.item),ik:__c.Rp(a.ik,b.ik)}:a:b};xlb=function(a,b){a=a.Pca;ja(0<b&&b<a,"{} \u2209 (0, {})",0,a)};ylb=function(a,b){a=a.r3;ja(0<b&&b<a,"{} \u2209 (0, {})",0,a)};
Sp=__c.Sp=function(a,b,c){switch(b.type){case 0:case 1:switch(c.type){case 0:case 1:return a.change(b.state,c.state);case 2:return a.YY(b.state);default:throw new r(c);}case 2:switch(c.type){case 0:case 1:return a.y6a(c.state);case 2:return a.eta(b.state);default:throw new r(c);}default:throw new r(b);}};Tp=__c.Tp=function(a){const b=m(a.Mm);a.Mm=a.ops[a.i++];return b};__c.zlb=function(a,b){const c=m(a.Mm),d=c.Pca;ja(0<b&&b<=d);if(b<d){const [e,f]=c.VTb(b);a.Mm=f;return e}a.Mm=a.ops[a.i++];return c};
Alb=function(a,b){const c=m(a.Mm),d=c.r3;ja(0<b&&b<=d);if(b<d){const [e,f]=c.UTb(b);a.Mm=f;return e}a.Mm=a.ops[a.i++];return c};Clb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ja(b.type===1),new Up(a.component.apply(b.state,c.delta));case 3:return __c.Blb(a,b,c.oldState),c.newState;default:throw new r(c);}};
Dlb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ja(b.type===1),new Up(a.component.Yl(b.state,c.delta));case 3:return __c.Blb(a,b,c.newState),c.oldState;default:throw new r(c);}};Vp=function(a,b,c){switch(b.type){case 0:return c.type===0&&b.state===c.state;case 1:return c.type===1&&a.component.wi(b.state,c.state);case 2:return c.type===2&&b.state===c.state;default:throw new r(b);}};__c.Blb=function(a,b,c){ja(Vp(a,b,c),"{} != {}",b,c)};
__c.Elb=function(a,b){const c=__c.Wp.Mg(),d=a.cursor(0,{...Xp,ik:g=>c.retain(g)}),e={...Xp,ib:g=>c.retain(g.length)},f={...Xp,ib:g=>c.YY(g)};b.forEach({retain:g=>d.uo(g,e),delete:g=>d.uo(g,f),insert:g=>c.insert(g)});return c.build()};
Flb=function(a,b){const c=new Yp,d=a.cursor();a=h=>{throw Error(String(h));};const e={...Xp,ib:h=>c.retain(h.length)},f={...Xp,ib:a},g={...Xp,ib:()=>0,ik:a};b.forEach({retain:h=>d.ZS(h,e),update:h=>{throw new r(h);},insert:h=>h.type!==2&&c.insert(h.state),change:(h,k)=>{h.type===2?(d.ZS(h.length,f),k.type!==2&&c.insert(k.state)):(d.ZS(h.length,g),k.type===2?c.delete(h.length):(ja(h.state===k.state,"non-reflexive change: {} != {}",h,k),c.retain(h.length)))}});return c.build()};__c.Zp=function(a){return Object.keys(a)};
__c.$p=function(a,b,c){for(const [d,e]of Object.entries(a))c(d,e,b[d])};__c.Glb=function(a,b){return a.length?b.length?[...(new Set([...a,...b]))]:a:b};Hlb=function(a,b){return{type:0,lF:a,DG:b}};Ilb=function(a){return{type:1,length:a}};__c.Jlb=function(a,b){return a&&b?a.so===b.so&&a.sn===b.sn:!a&&!b};__c.Klb=function(a,b){Object.entries(a).forEach(([c,d])=>d!=null&&b(d,c))};
Llb=function(a,b){const c=__c.Zp(a),d=__c.Zp(b);if(a===b||!c.length&&!d.length)return!0;if(c.length!==d.length)return!1;const e=__c.Glb(c,d);return c.length===e.length&&d.length===e.length&&e.every(f=>__c.Jlb(a[f].r,b[f].r))};Mlb=function(a,b={}){return{type:0,length:a,changes:b}};aq=function(a,b){return a?!!b&&a.from===b.from&&a.to===b.to:!b};
Nlb=function(a,b){let c=0,d=0;for(const e of a.jga)switch(a=e.length,e.type){case 0:b.retain&&b.retain(a,c,d);c+=a;d+=a;break;case 1:b.insert&&b.insert(a,c,d);d+=a;break;default:throw new r(e.type);}};Olb=function(a,b,c){let {from:d,to:e}=a;d+=d>b?c:0;e+=e>b?c:0;return a.from!==d||a.to!==e?new bq(d,e):a};Plb=function(a,b,c){for(const [d,e]of a){const f=Olb(e,b,c);f!==e&&a.set(d,f)}};
cq=function(a,b,c,d){for(const [e,f]of a){const g=f.Qca,h=f.Kca,k=g&&(b!=null?Olb(g,b,d):g),l=h&&(c!=null?Olb(h,c,d):h);k===g&&l===h||a.set(e,new Qlb(k,l))}};Rlb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};Slb=function(a,b){dp(a,b);return a};Tlb=function(a,b){return{key:a.CWa(b),value:b}};dq=__c.dq=function(a,b,c){return new Ulb(a,b,c)};Vlb=function(a,b){return a===b||a.size===b.size&&Array.from(a.keys()).every(c=>a.get(c)===b.get(c))};
Wlb=function(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const [e,f]of a){var d=b.get(e)||0;(d=f+d)&&c.set(e,d)}for(const [e,f]of b)a.has(e)||c.set(e,f);return c};Xlb=function(a,b){const c=new Map;for(const [d,e]of a)b(e)&&c.set(d,e);return c};Ylb=function(a){return new RegExp(`^${a}${"B"}${"[0-9b-df-hj-np-tv-zB-DF-HJ-NP-TV-Z]{14}"}$`)};__c.Zlb=function(a){dp(a.normalize(a.defaultValue),a.defaultValue)};__c.eq=function(a,b){return b!=null?a.decode(b):void 0};
__c.fq=function(a,b){return b!=null?a.encode(b):void 0};$lb=function(a){a=a.split("/");return a.length===2?a[0]:void 0};amb=function(a){if(a.startsWith(`${__c.gq}/`)){const [,b,c]=a.split("/");return[b,c]}};__c.bmb=function(a,b){if(b=amb(b)){const [c,d]=b;if(a.Mdd(c))return[c,d]}};__c.hq=function(a,b,c,d){c=a.Iqa(c);for(const e of Object.keys(b))a.SA(e)&&c(e)&&d(b[e],e)};__c.iq=function(a,b,c){const d={};a.copy(b,c,d);return d};
__c.cmb=function(a,b,c){return a.attributes[c].Ldd?b[c]:b[c]!==a.attributes[c].defaultValue?b[c]:void 0};__c.dmb=function(a,b,c){const d={};__c.hq(a,b,"all",(e,f)=>d[f]=c(e,f));return d};__c.jq=function(a,b){const c={};for(const [d,e]of Object.entries(b))try{ja(a.SA(d)),c[d]=e!=null?a.attributes[d].normalize(e):void 0}catch(f){throw f;}return c};__c.fmb=function(a){return new emb("block",a)};kq=__c.kq=function(a,b){return new gmb(a,b)};lq=__c.lq=function(a,b,c){return new hmb(a,b,c)};
mq=__c.mq=function(a,b){return new imb(a,b,b[0])};__c.kmb=function(a){const b=(d,e)=>{if(typeof e==="string")return d[e]?d[e]:(d=$lb(e))&&a.OWa[d]?a.OWa[d]:(e=amb(e))&&a.pw[e[0]]},c=new Proxy(a.static,{get:b,has:(d,e)=>b(d,e)!=null,ownKeys:d=>Object.keys(d)});return new __c.jmb(c,new Set(Object.keys(a.static)),new Set(Object.keys(a.OWa)),new Set(Object.keys(a.pw)))};nq=function(a){return{type:0,length:a}};lmb=function(a){return{type:1,length:a}};oq=function(a,b){return a.WD(1,b).length};
pq=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return mmb;ja(c[0]>=0);b=new Map;a=a.Bd(c[c.length-1],0);let d=0,e=0;for(const f of c){for(c=a.head;d<f;){ka(c!=null);switch(c.type){case 0:c=a.yA(Math.min(f-d,c.length));d+=c;e+=c;break;case 1:e+=oq(a,c.length);break;default:throw new r(c);}c=a.head}c&&c.type===1&&(e+=oq(a,c.length));if(d!==f)throw Error();b.set(d,e)}return b};
nmb=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return mmb;ja(c[0]>=0);b=new Map;a=a.Bd(0,c[c.length-1]);let d=0,e=0;for(const f of c){for(c=a.head;e<f;){ka(c!=null);switch(c.type){case 0:c=a.yA(Math.min(f-e,c.length));d+=c;e+=c;break;case 1:e+=oq(a,Math.min(f-e,c.length));break;default:throw new r(c);}c=a.head}if(e!==f)throw Error();b.set(e,d)}return b};omb=function(a){return JSON.stringify(a,(b,c)=>c!=null?c:null)};qq=function(a){return new pmb(a.$Bd)};
rmb=function(a,b,c,d){var e=Math.max(a.Wq,b.Wq),f=Math.max(a.pB,b.pB);a=a.Bd(void 0,e,f);b=b.Bd(void 0,e,f);e=a.head;for(f=b.head;e||f;){if(e&&e.type===0||f&&f.type===0){const n=a.oy(),p=b.oy(),q=c.oy();e=n;f=p;for(var g=q,h=d,k=e.head,l=f.head;k||l;){if(k&&k.type===0||l&&l.type===0){k=e.Bw();l=f.Bw();for(const u of qmb(k,l))g.ym(u,h(u,e.attrs[u],f.attrs[u]))}else if(k&&l)k=Math.min(k.length,l.length),e.Jo(k),f.Jo(k),g.EC(k);else throw Error(`length mismatch: ${k} x ${l}`);k=e.head;l=f.head}n.finish();
p.finish();q.finish()}else if(e&&f)e=Math.min(e.length,f.length),rq(a,e),rq(b,e),c.rows(e);else throw Error(`length mismatch: ${e} x ${f}`);e=a.head;f=b.head}a.finish();b.finish()};tmb=function(a,b,c,d){return uq.isIdentity(c)&&uq.isIdentity(d)||b.items.isEmpty()?b:smb("apply",a.$Bd,b,c,d)};
smb=function(a,b,c,d,e){const f=new vq,[g,h]=a==="apply"?[c.items.Bd(e.pre),e.Bd(c.items.length,0)]:[c.items.Bd(e.post),e.Bd(0,c.items.length)];e=g.head;var k=h.head;for(c=0;e||k;){if(k&&k.type===1)oq(h,k.length),a==="apply"?f.Lc(k.length):g.Jo(k.length);else if(e&&e.type===0){e=g.Bw();const [n,p]=a==="apply"?[e.Bd(d.pre),d.Bd(e.length,0)]:[e.Bd(d.post),d.Bd(0,e.length)];e=a;k=new vq;var l=n.head;let q=p.head;for(;l||q;){if(q&&q.type===1)oq(p,q.length),e==="apply"?k.Lc(q.length):n.Jo(q.length);else if(l)l.type===
0?k.grad(n.Bw()):q?(l=Math.min(l.length,q.length),n.Jo(l),p.yA(l),k.Lc(l)):(n.Jo(l.length),k.Lc(l.length));else throw Error(`length mismatch: ${l} vs ${q}`);l=n.head;q=p.head}e=k.build();e.isEmpty()||(f.grad(e),c=Math.max(c,e.length));n.finish();p.finish()}else if(e&&k)e=Math.min(k.length,e.length),g.Jo(e),h.yA(e),f.Lc(e);else throw Error("length mismatch");e=g.head;k=h.head}g.finish();h.finish();a=f.build();return wq.of(b,a,c,a.length)};umb=function(a){return{type:1,length:a}};
rq=__c.rq=function(a,b){ka(a.NX==null);return a.NWa.Jo(b)};vmb=function(a,b,c,d){return c===d?!0:c&&d?a(b,c.tc,d.tc)&&a(b,c.r,d.r):!1};__c.wmb=function(a,b,c,d){if(!d)return c;ja(a(b,c,d.tc),"{} != {}",c,d.tc);return d.r};xmb=function(a,b,c,d){return vmb(a,b,c,d)?void 0:{t:c,b:d}};
__c.ymb=function(a,b,c){const d={};if(b&&c)for(const f of qmb(b,c)){var e=xmb(a,f,b[f],c[f]);e&&(d[f]=e)}else if(b)for(e of xq(b))(c=xmb(a,e,b[e]))&&(d[e]=c);else if(c)for(const f of xq(c))(b=xmb(a,f,void 0,c[f]))&&(d[f]=b);return yq(d)?void 0:d};zmb=function(a,b,c){return qmb(b,c).every(d=>{var e=b&&b[d],f=c&&c[d];return e===f?!0:e&&f?vmb(a,d,e.t,f.t)&&vmb(a,d,e.b,f.b):!1})};xq=__c.xq=function(a){return Object.keys(a)};
qmb=function(a,b){return a&&b?[...(new Set([...xq(a),...xq(b)]))]:a?xq(a):b?xq(b):[]};yq=__c.yq=function(a){return xq(a).length===0};Amb=function(a,b,c,d){const e=__c.jq(a.uh,__c.iq(a.uh,b,d)),f=__c.dmb(a.uh,e,(h,k)=>__c.cmb(a.uh,e,k)),g={};__c.hq(a.uh,f,b,(h,k)=>{g[k]={o:c&&c[k],n:f[k]}});return g};Cmb=function(a,b){b.forEach(a.uh.SA,(c,d,e)=>{const f=a.grid.get(c,d),g=f?{...f}:{};Bmb(e,(h,k)=>{h!=null&&(ka(a.uh.hEa(k,f&&f[k],h.o)),g[k]=h.n)});a.write(c,d,g)})};
Bmb=function(a,b){for(const c of Object.keys(a))b(a[c],c)};Dmb=function(a,b){return a&&b?[...(new Set([...Object.keys(a),...Object.keys(b)]))]:a?Object.keys(a):b?Object.keys(b):[]};zq=__c.zq=function(a,b,c,d){ka(0<=a);ka(0<=b);ka(a<=c);ka(b<=d);return{left:a,top:b,right:c,bottom:d}};__c.Emb=function(a,b){return{span:a,state:b}};Fmb=function(a){const b=a.rows[a.y];if(b!=null)for(;b.cells[a.x]==null&&a.x<b.cells.length;)a.x++};Gmb=function(a){for(;a.rows[a.y]==null&&a.y<a.rows.length;)a.y++};
Aq=function(a,b){return a.right===b.right&&a.bottom===b.bottom};
Hmb=function(a,b,c,d){if(uq.isIdentity(c)&&uq.isIdentity(d))return b;const e=new Set,f=new Set;b.forEach((l,n,p)=>{e.add(l);f.add(n);switch(p.type){case 1:p.bounds&&e.add(p.bounds.o.right);p.bounds&&f.add(p.bounds.o.bottom);p.bounds&&e.add(p.bounds.n.right);p.bounds&&f.add(p.bounds.n.bottom);break;case 0:p.o&&e.add(p.o.right);p.o&&f.add(p.o.bottom);p.n&&e.add(p.n.right);p.n&&f.add(p.n.bottom);break;default:throw new r(p);}});const g=pq(c,e),h=pq(d,f),k=new Bq;b.forEach((l,n,p)=>{switch(p.type){case 1:k.add(m(g.get(l)),
m(h.get(n)),a.update(p.bounds&&{o:{right:m(g.get(p.bounds.o.right)),bottom:m(h.get(p.bounds.o.bottom))},n:{right:m(g.get(p.bounds.n.right)),bottom:m(h.get(p.bounds.n.bottom))}},p.delta));break;case 0:k.add(m(g.get(l)),m(h.get(n)),a.replace(p.o&&{right:m(g.get(p.o.right)),bottom:m(h.get(p.o.bottom)),state:p.o.state},p.n&&{right:m(g.get(p.n.right)),bottom:m(h.get(p.n.bottom)),state:p.n.state}));break;default:throw new r(p);}});return k.build()};
Kmb=function(a,b,c){const d=new Bq;Imb(b.Bd(),c.Bd(),(e,f,g,h)=>{b==null&&c==null||d.add(e,f,Jmb(a,g,h))});return d.build()};Imb=function(a,b,c){var d=a.head;let e=b.head;for(;d||e;){d=d==null?1:e==null?-1:d===e||d.y===e.y&&d.x===e.x?0:d.y<e.y||d.y===e.y&&d.x<e.x?-1:1;if(d<0){const {x:f,y:g,value:h}=a.wt();c(f,g,h,void 0)}else if(d>0){const {x:f,y:g,value:h}=b.wt();c(f,g,void 0,h)}else{const {x:f,y:g,value:h}=a.wt();({value:d}=b.wt());c(f,g,h,d)}d=a.head;e=b.head}a.finish();b.finish()};
Jmb=function(a,b,c){if(b==null)return c;if(c==null)return b;switch(b.type){case 0:a:switch(c.type){case 1:ka(b.n!=null);c.bounds&&ka(Aq(b.n,c.bounds.o));a=a.replace(b.o,{...(c.bounds?c.bounds.n:b.n),state:c.delta?a.component.apply(b.n.state,c.delta):b.n.state});break a;case 0:ka(Cq(a,b.n,c.o));a=a.replace(b.o,c.n);break a;default:throw new r(c);}return a;case 1:a:switch(c.type){case 1:b.bounds&&c.bounds&&ka(Aq(b.bounds.n,c.bounds.o));const d=b.bounds&&c.bounds?{o:b.bounds.o,n:c.bounds.n}:b.bounds||
c.bounds;b=b.delta&&c.delta?a.component.compose(b.delta,c.delta):b.delta||c.delta;a=a.update(d,b);break a;case 0:ka(c.o!=null);b.bounds&&ka(Aq(b.bounds.n,c.o));a=a.replace({...(b.bounds?b.bounds.o:c.o),state:b.delta?a.component.Yl(c.o.state,b.delta):c.o.state},c.n);break a;default:throw new r(c);}return a;default:throw new r(b);}};Cq=function(a,b,c){return b===c?!0:b&&c?Aq(b,c)&&a.component.wi(b.state,c.state):!1};
Nmb=function(a,b,c,d,e,f){const g=d.type===0?d.n:d.bounds&&d.bounds.n,h=g?g.bottom:c;for(let n=Math.max(c,f.yi);n<=h;n++)Lmb(f,n*2),f.oy(),f.c8b((p,q)=>{e.append(zq(p,q,p,q))}),f.Peb();f.yi<=h&&Lmb(f,(h+1)*2);if(g==null)return{Kab:b}=Mmb(e,{left:b,top:c,right:b,bottom:c}),b?a.replace(void 0,void 0):void 0;const {Kab:k,SQb:l}=Mmb(e,{left:b,top:c,right:g.right,bottom:g.bottom});if(k){if(l)return a.update({o:{right:g.right,bottom:g.bottom},n:l},void 0);ka(d.type===0);return a.replace(d.n,void 0)}};
Pmb=function(a,b){Omb(a,b.left,b.top);a.append(b)};Mmb=function(a,b){Omb(a,b.left,b.top);if(a.readBuffer(b.left,b.top))return{Kab:!0,SQb:void 0};let c=b.left,d=b.top;for(var e=b.left+1;e<=b.right;e++){if(a.readBuffer(e,b.top))return{Kab:!0,SQb:{right:c,bottom:d}};c=e}for(e=b.top+1;e<=b.bottom;e++){for(let f=b.left;f<=c;f++)if(a.readBuffer(f,e))return{Kab:!0,SQb:{right:c,bottom:d}};d=e}return{Kab:!1,SQb:void 0}};
Omb=function(a,b,c){c>a.lfa&&(a.buffer.splice(0,c-a.lfa),a.lfa=c,a.Uua=0);b>a.Uua&&a.buffer[0]&&(a.buffer[0].splice(0,b-a.Uua),a.Uua=b)};Qmb=function(a,b,c){c-=a.lfa;a=c===0?b-a.Uua:b;ka(c>=0&&a>=0);return{oHd:a,sHd:c}};Rmb=function(a){const b=uq.Mg();a=a.Bd();let c=a.head;for(;c;){switch(c.type){case 0:b.retain(c.length*2);a.yA(c.length);break;case 1:b.expand(c.length*2);oq(a,c.length);break;default:throw new r(c);}c=a.head}return b.build()};
Lmb=function(a,b){for(ka(b>=a.nma);b>a.nma;){var c=a.Bd.head;ka(c!=null);c.type===0?(a.oy(),a.Peb()):(c=Math.min(c.length,b-a.nma),rq(a.Bd,c),a.nma+=c)}};Smb=function(a,b){const c=new Bq,d=new Set;for(let e=b.top;e<=b.bottom;e++)for(let f=b.left;f<=b.right;f++){const g=a.grid.get(e,f);g==null||d.has(g)||(d.add(g),c.add(g.span.left,g.span.top,a.domain.replace({right:g.span.right,bottom:g.span.bottom,state:a.type.jc(g.value)},void 0)))}return a.domain.He({cells:c.build()})};
Tmb=function(a,b){return c=>{const {left:d,top:e}=b.Fnd.get();return a.domain.He({cells:(new Bq).add(d,e,a.domain.update(void 0,c)).build()})}};Eq=function(a,b,c,d){a.Ik.set(b,new Dq(c,d));return a};Vmb=function(a,b,c,d){a.Ik.set(b,new Umb(c,d));return a};Wmb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};
Xmb=function(a,b){if(uq.isIdentity(b))return a;const c=new Set;for(const e of a.values())switch(e.type){case 0:e.oldValue!=null&&c.add(e.oldValue);e.newValue!=null&&c.add(e.newValue);break;case 1:c.add(e.oldValue);c.add(e.newValue);break;default:throw new r(e);}const d=pq(b,c);return ah(a,e=>{switch(e.type){case 0:return new Dq(e.oldValue!=null?m(d.get(e.oldValue)):void 0,e.newValue!=null?m(d.get(e.newValue)):void 0);case 1:return new Umb(m(d.get(e.oldValue)),m(d.get(e.newValue)));default:throw new r(e);
}})};Fq=function(a){return{start:`${"a/"}${a}`,end:`${"b/"}${a}`}};Ymb=function(a){ka(a.startsWith("a/")||a.startsWith("b/"));return a.substring(2)};Zmb=function(a){const b=new Map;for(const [c,d]of a)a=Fq(c),b.set(a.start,d.start),b.set(a.end,d.end);return b};$mb=function(a){const b=new Map;a=new Map(a);for(const c of a.keys()){const d=Ymb(c),e=Fq(d),f=m(a.get(e.start)),g=m(a.get(e.end));a.delete(e.start);a.delete(e.end);b.set(d,Gq.from({start:f,end:g}))}if(a.size)throw Error();return b};
anb=function(a){const b=Hq.Mg();for(const [d,e]of a.Ye)switch(e.type){case "replace":var c=Fq(d);Eq(b,c.start,e.oldValue?e.oldValue.start:void 0,e.newValue?e.newValue.start:void 0);Eq(b,c.end,e.oldValue?e.oldValue.end:void 0,e.newValue?e.newValue.end:void 0);break;case "update":c=Fq(d);e.start&&Vmb(b,c.start,e.start.oldValue,e.start.newValue);e.end&&Vmb(b,c.end,e.end.oldValue,e.end.newValue);break;default:throw new r(e);}return Hq.He(a.axis,b.build().Ik)};
enb=function(a){const b=new Map,c=new Map(a.Ik);for(const [f,g]of c){const h=Ymb(f),k=Fq(h);switch(g.type){case 0:var d=m(c.get(k.start)),e=m(c.get(k.end));ka(d.type===g.type);ka(e.type===g.type);ka(d.oldValue!=null===(e.oldValue!=null));ka(d.newValue!=null===(e.newValue!=null));c.delete(k.start);c.delete(k.end);b.set(h,new bnb(d.oldValue!=null&&e.oldValue!=null?Gq.from([d.oldValue,e.oldValue]):void 0,d.newValue!=null&&e.newValue!=null?Gq.from([d.newValue,e.newValue]):void 0));break;case 1:d=c.get(k.start);
e=c.get(k.end);d&&ka(d.type===g.type);e&&ka(e.type===g.type);c.delete(k.start);c.delete(k.end);b.set(h,new cnb(d?Iq.from(d):void 0,e?Iq.from(e):void 0));break;default:throw new r(g);}}if(c.size)throw Error();return dnb.create(a.axis,b)};Kq=function(a,b,c){const {x:d,y:e,...f}=a;ja(uq.Bk(d,Jq(b)));ja(uq.Bk(e,Jq(c)));return f};
Jq=function(a){const b=uq.Mg();a.ops.forEach(c=>{switch(c.type){case 0:b.retain(c.length);break;case 1:b.expand(c.length);break;case 2:b.retain(c.length);break;case 3:b.expand(1);break;case 4:b.retain(1);break;default:throw new r(c);}});return b.build()};fnb=function(a,b){let c=a.items[b];c==null&&(c=a.items[b]={});return c};Lq=function(a,b){if(b!=null)return m(a.eed.get(b))};gnb=function(a,b){let c;for(let d=b.top;d<=b.bottom&&!(c=a.Sya(d));d++);return c};
hnb=function(a,b){let c;for(let d=b.left;d<=b.right&&!(c=a.Rya(d));d++);return c};inb=function(a,b){let c;for(let d=b.bottom;d>=b.top&&!(c=a.Sya(d));d--);return c};jnb=function(a,b){let c;for(let d=b.right;d>=b.left&&!(c=a.Rya(d));d--);return c};knb=function(a,b){const c=a.i1(b.Bg),d=a.e4(b.Gg),e=a.i1(b.Ck||b.Bg);a=a.e4(b.El||b.Gg);ja(c!=null&&d!=null&&e!=null&&a!=null);ja(d<=a&&c<=e);return{left:c,top:d,right:e,bottom:a}};lnb=function(...a){return b=>{for(const c of a){const d=c(b);if(d)return d}}};
mnb=function(a){return b=>{const c=[];if(b==="")return{s:b,value:c};for(;;){const d=a(b);if(!d||d.s===b)return{s:b,value:c};c.push(...d.value);b=d.s}}};
onb=function(a){const b=a.xR,c=__c.Mp({get:()=>b.cols.reduce((n,p)=>n+p.width,0),set:n=>{ka(n>0);n/=c.value;for(const p of b.cols)p.width*=n}}),d=__c.Mp({get:()=>b.rows.reduce((n,p)=>n+p.height,0),set:n=>{ka(n>0);n/=d.value;for(const p of b.rows)p.height*=n,p.minHeight=p.height}}),e=Lp(()=>{const n=new Map;for(const p of b.cols)n.set(p.id,p);return n}),f=Lp(()=>{const n=new Map;for(const p of b.rows)n.set(p.id,p);return n}),g=nnb(n=>b.rows.has(n)?(n=b.rows.wk(n))?g(n)+1:0:-1),h=nnb(n=>b.cols.has(n)?
(n=b.cols.wk(n))?h(n)+1:0:-1),k=nnb(n=>(n=b.cols.wk(n))?k(n)+n.width:0),l=nnb(n=>(n=a.xR.rows.wk(n))?l(n)+n.height:0);return{attributes:{width:c,height:d},Ub:{layout:b,rows:b.rows,cols:b.cols,Wob:n=>f.get().get(n),Hab:n=>e.get().get(n),c4a:n=>b.rows.cgc(n),kVa:n=>b.cols.cgc(n),d4:g,f1:h,Mc:k,Nc:l}}};Mq=__webpack_require__(519427);pnb=Mq._isComputingDerivation;__c.qnb=Mq.comparer;Lp=__c.Lp=Mq.computed;rnb=Mq.createAtom;Nq=Mq.observable;snb=Mq.ObservableMap;__c.tnb=__webpack_require__(481922).C;__c.unb=__webpack_require__(119930).xQ;__c.vnb=__webpack_require__(497827).h;__c.wnb=__webpack_require__(318386).U;var xnb,nnb;xnb=__webpack_require__(635872);__c.ynb=xnb.Om;nnb=xnb.kq;var Bnb,Cnb,Enb,Gnb;__c.znb=/^$|^(https?|ftp|tel|sms|mailto|shortcuts):(\/\/|[^/])[^ ]+(\/|$)|^[^: ]+(\/|$)|^[\w.]+:\d+(\/|$)/;__c.Anb=/^#[0-9a-f]{6}$/;Bnb=/^#[0-9a-f]{6}$|^transparent$/;Cnb=/^#[0-9a-f]{6}$|^inherit$/;__c.Dnb=/^[0-9]+(\.[0-9]+)?$/;Enb=/^[0-9]+(\.[0-9]+)?px$|^inherit$/;__c.Fnb=/^-?[0-9]+(\.[0-9]+)?%$/;Gnb=/^(([1-9]|10)( ([1-9]|10)){0,9})?$|^inherit$/;var Hnb,Inb;Oq=__c.Oq=class{static equals(a,b){return a?!!b&&a.equals(b):!b}map(a,b,c,d){return new Hnb(this,a,b,c,d)}};
Hnb=class extends Oq{isIdentity(a){return this.component.isIdentity(this.b5(a))}compose(a,b){return this.vMa(this.component.compose(this.b5(a),this.b5(b)))}transform(a,b){a=this.component.transform(this.b5(a),this.b5(b));return Yjb(a,c=>this.vMa(c))}Nl(a){return this.vMa(this.component.Nl(this.b5(a)))}Bk(a,b){return a===b||this.component.Bk(this.b5(a),this.b5(b))}identity(a){return this.vMa(this.component.identity(this.xla(a)))}apply(a,b){const c=this.xla(a);b=this.component.apply(c,this.b5(b));return c===
b?a:this.Gjb(b)}Yl(a,b){const c=this.xla(a);b=this.component.Yl(c,this.b5(b));return c===b?a:this.Gjb(b)}wi(a,b){return a===b||this.component.wi(this.xla(a),this.xla(b))}equals(a){return this===a}constructor(a,b,c,d,e){super();this.component=a;this.vMa=b;this.b5=c;this.Gjb=d;this.xla=e}};fp=__c.fp=class{static As(){return new Inb}constructor(a,b,c,d){this.Pu=a;this.rv=b;this.twa=c;this.LCa=d}};Inb=class{build(a,b){return new fp(a,b,this.twa,this.LCa)}constructor(){this.LCa=this.twa=!1}};var Jnb=class extends Oq{isIdentity(){return!0}compose(){}transform(){return gp()}Nl(){}Bk(){return!0}identity(){}apply(a){return a}Yl(a){return a}wi(a,b){return this.Dx(a,b)}equals(a){return this===a}constructor(a){super();this.Dx=a}};var blb=class{toString(){return`U(${this.delta})`}constructor(a){this.delta=a;this.type=0}},Knb=class{toString(){return`R(${this.oldState}, ${this.newState})`}constructor(a,b){this.oldState=a;this.newState=b;this.type=1}},Lnb=class extends Oq{update(a){return this.component.isIdentity(a)?void 0:new blb(a)}replace(a,b){return new Knb(a,b)}isIdentity(a){return a==null||a.type===0&&this.component.isIdentity(a.delta)}compose(a,b){if(a==null)return b;if(b==null)return a;switch(a.type){case 0:switch(b.type){case 0:return this.update(this.component.compose(a.delta,
b.delta));case 1:return this.replace(this.component.Yl(b.oldState,a.delta),b.newState);default:throw new r(b);}case 1:switch(b.type){case 0:return this.replace(a.oldState,this.component.apply(a.newState,b.delta));case 1:return ep(this.component,a.newState,b.oldState),this.replace(a.oldState,b.newState);default:throw new r(b);}default:throw new r(a);}}transform(a,b){if(a==null||b==null)return gp(b,a);switch(a.type){case 0:switch(b.type){case 0:return Yjb(this.component.transform(a.delta,b.delta),c=>
this.update(c));case 1:return a=this.component.apply(b.oldState,a.delta),new fp(this.replace(a,b.newState),void 0,!1,!0);default:throw new r(b);}case 1:switch(b.type){case 0:return b=this.component.apply(a.oldState,b.delta),hp(this.replace(b,a.newState));case 1:return ep(this.component,a.oldState,b.oldState),hp(this.replace(b.newState,a.newState));default:throw new r(b);}default:throw new r(a);}}Nl(a){if(a==null)return a;switch(a.type){case 0:return this.update(this.component.Nl(a.delta));case 1:return this.replace(a.newState,
a.oldState);default:throw new r(a);}}Bk(a,b){return a===b?!0:a==null||b==null?a===b:a.type===0&&b.type===0?this.component.Bk(a.delta,b.delta):a.type===1&&b.type===1?this.component.wi(a.oldState,b.oldState)&&this.component.wi(a.newState,b.newState):!1}identity(){}apply(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.apply(a,b.delta);case 1:return ep(this.component,a,b.oldState),b.newState;default:throw new r(b);}}Yl(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.Yl(a,
b.delta);case 1:return ep(this.component,a,b.newState),b.oldState;default:throw new r(b);}}wi(a,b){return this.component.wi(a,b)}equals(a){return this===a||a instanceof Lnb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};var Mnb=class extends Oq{isIdentity(a){return a==null||this.component.isIdentity(a)}compose(a,b){ja(a==null===(b==null));return a!=null&&b!=null?this.component.compose(a,b):void 0}transform(a,b){ja(a==null===(b==null));return a!=null&&b!=null?this.component.transform(a,b):gp(b,a)}Nl(a){return a!=null?this.component.Nl(a):void 0}Bk(a,b){return a!=null&&b!=null&&this.component.Bk(a,b)||a==null&&b==null}identity(a){return a!=null?this.component.identity(a):void 0}apply(a,b){ja(a==null===(b==null));return a!=
null&&b!=null?this.component.apply(a,b):void 0}Yl(a,b){ja(a==null===(b==null));return a!=null&&b!=null?this.component.Yl(a,b):void 0}wi(a,b){return a===b||a!=null&&b!=null&&this.component.wi(a,b)}equals(a){return this===a||a instanceof Mnb&&this.component.equals(a.component)}constructor(a){super();this.component=a;ja(!(a instanceof Mnb))}};var akb={type:0,length:1},bkb={type:1,length:1},dkb={type:2,length:1},lkb=kp(),kkb=lp(),mkb=lp(new Knb),ikb=class{toString(){return this.ops.map(hkb).join("")}constructor(a,b,c,d){this.ops=a;this.pre=b;this.post=c;this.hPa=d}},Nnb=new ikb([],0,0,0),Onb=class{H9(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(jp(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(ckb(this.acc));this.post+=this.acc;this.acc=0;break;case 2:this.ops.push(ekb(this.acc));
this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 3:case 4:break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ja(b>=0,"{} < 0",b);b&&(this.H9(a),this.acc+=b);return this}AQb({ei:a,Jm:b}){const c=this.ops.length,d=this.U8||(this.U8=new Map),e=this.$Ba||(this.$Ba=new Map);ja(!d.has(a),"duplicate record: {}",a);ja(!e.has(b),"duplicate recall: {}",b);d.set(a,c);e.set(b,c)}append(a,b){switch(a.type){case 0:return this.retain(a.length);case 1:return this.expand(a.length);case 2:return this.eta(a.length);
case 3:var c=a.shift;if(!b&&(b=a.state,c&&c.ei===c.Jm&&(c=void 0,a=kp(b)),b==null&&c==null))return this.expand();this.H9(a.type);c&&this.AQb(c);this.ops.push(a);this.post++;return this;case 4:c=a.shift;if(!b)if(b=a.delta,c&&c.ei===c.Jm&&(c=void 0,a=lp(b)),b==null){if(c==null)return this.retain()}else if(b.type===1&&b.oldState==null&&b.newState==null&&c==null)return this.eta();this.H9(a.type);c&&this.AQb(c);this.ops.push(a);this.pre++;this.post++;return this;default:throw new r(a);}}retain(a){return a==
null||typeof a==="number"?this.accumulate(0,a):this.append(lp(void 0,a))}expand(a){return a==null||typeof a==="number"?this.accumulate(1,a):this.append(kp(void 0,a))}eta(a){return a==null||typeof a==="number"?this.accumulate(2,a):this.append(lp(this.component.replace(void 0,void 0),a))}insert(a,b){return this.append(kp(a,b))}update(a,b){return this.append(lp(a!=null?this.component.update(a):void 0,b))}y6a(a){return this.append(lp(this.component.replace(void 0,a)))}YY(a){return this.append(lp(this.component.replace(a,
void 0)))}change(a,b,c){return this.append(lp(this.component.replace(a,b),c))}build(a){this.mode!==0&&this.H9();if(a&&a.PLc())return a.Oec(this.ops);if(!this.U8&&!this.$Ba)return new ikb(this.ops,this.pre,this.post,0);a=this.ops;const b=m(this.U8);var c=[...b.keys()];if(c.some((g,h)=>g!==h)){const g=new Map;c.forEach((h,k)=>g.set(h,k));for(const h of b.values())switch(c=a[h],c.type){case 3:var d=c.shift,e=g.get(d.ei),f=g.get(d.Jm);if(e!==d.ei||f!==d.Jm)a[h]=kp(c.state,{ei:e,Jm:f});break;case 4:d=
c.shift;e=g.get(d.ei);f=g.get(d.Jm);if(e!==d.ei||f!==d.Jm)a[h]=lp(c.delta,{ei:e,Jm:f});break;case 0:case 1:case 2:throw Error(`INSERT | UPDATE expected: ${hkb(c)}`);default:throw new r(c);}}return new ikb(a,this.pre,this.post,b.size)}constructor(a){this.component=a;this.ops=[];this.acc=this.post=this.pre=0;this.$Ba=this.U8=this.mode=void 0}},Pnb=class{static create(a,b,c){ja(b>=0,"{} < 0",b);ja(c>=0,"{} < 0",c);a=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,jp(b)]:a.ops;return new Pnb(a)}get head(){return this.Mm}WD(a,
b=1){const c=m(this.Mm);if(c.type!==a)throw Error();const d=c.length;ja(0<b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Mm=jp(d-b),jp(b);case 1:return this.Mm=ckb(d-b),ckb(b);case 2:return this.Mm=ekb(d-b),ekb(b);default:throw new r(a);}else return this.Mm=this.ops[this.i++],c}constructor(a){this.ops=a;this.i=0;this.Mm=a[this.i++]}},Qnb=class{AQb(a,{ei:b,Jm:c}){const d=this.U8||(this.U8=new Map),e=this.$Ba||(this.$Ba=new Map);ka(!d.has(b),"already recorded: {}",b);ka(!e.has(c),
"already recalled: {}",c);d.set(b,a);e.set(c,this.length)}append(a,b){b?this.AQb(a,b):a!=null&&(this.list[this.length]=a);this.length++;return this}expand(a=1){ja(a>=0,"{} < 0",a);this.length+=a;return this}build(){const a=this.list;if(this.U8||this.$Ba){const c=m(this.U8);var b=m(this.$Ba);dp(c.size,b.size);for(const [d,e]of b)ka(c.has(d),"recall has no record: {}",d),b=c.get(d),b!=null&&(a[e]=b)}this.z5c!=null&&dp(this.length,this.z5c);return a}constructor(a){this.z5c=a;this.list=[];this.length=
0;this.$Ba=this.U8=void 0}},Rnb=class{static create(a,b){a.length<b&&(a=a.slice(),a.length=b);return new Rnb(a)}finish(){dp(this.$Ka,this.input.length)}constructor(a){this.input=a;this.$Ka=0}},Snb=class{PLc(){return!!this.ukb}Oec(a){const b=new Onb(this.component);for(const c of a)switch(c.type){case 3:b.append(this.I6c(c));break;case 4:b.append(this.J6c(c));break;case 0:case 1:case 2:b.append(c);break;default:throw new r(c);}return b.build()}constructor(a){this.component=a;this.uyc=this.vyc=this.ukb=
void 0}},Tnb=class extends Snb{I6c(a){if(!a.shift)return a;const b=a.state,c=a.shift;var d=this.D6a&&this.D6a.get(c.ei);d=this.component.apply(b,d);const e=ukb(this,c);return d!==b||e!==c?kp(d,e):a}J6c(a){if(!a.shift)return a;const b=a.delta,c=a.shift;var d=this.D6a&&this.D6a.get(c.ei);d=this.component.compose(b,d);const e=ukb(this,c);return d!==b||e!==c?lp(d,e):a}constructor(...a){super(...a);this.D6a=void 0}},Unb=class extends Snb{PLc(){return super.PLc()||!!this.YPa||!!this.IQa}I6c(a){if(!a.shift)return a;
const b=a.shift,c=ukb(this,b);if(c!==b)throw Error(`${JSON.stringify(c)} != ${JSON.stringify(b)}`);return a}J6c(a){const b=a.delta,c=a.shift;var d=this.YPa;if(d){var e=d.get(a);if(e==null)e=a.delta;else{d.delete(a);d=m(this.IQa);var f=d.get(e);d.delete(e);e=f}}else e=a.delta;d=c&&ukb(this,c);return e!==b||d!==c?lp(e,d):a}Oec(a){a=super.Oec(a);if(this.YPa&&this.YPa.size)throw Error(`unconsumed setSurrogates: ${[...this.YPa.values()]}`);if(this.IQa&&this.IQa.size)throw Error(`unconsumed subSurrogates: ${[...this.IQa.keys()]}`);
return a}constructor(...a){super(...a);this.IQa=this.YPa=void 0}},Vnb=class extends Oq{Mg(){return new Onb(this.component)}isIdentity(a){return!a.ops.length||a.ops.every(b=>{switch(b.type){case 0:return!0;case 4:return!b.shift&&this.component.isIdentity(b.delta);case 2:case 1:case 3:return!1}throw new r(b);})}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=this.component,d=this.Mg(),e=new Tnb(c),f=Pnb.create(a,0,b.pre),g=Pnb.create(jkb(b,a.hPa),a.post,0);for(var h=f.head,
k=g.head;h||k;){if(k)if(k.type===1)d.append(g.WD(k.type,k.length));else if(k.type===3)d.append(mp(g,k.type));else if(h)if(h.type===1)switch(k.type){case 2:case 0:var l=Math.min(h.length,k.length);f.WD(h.type,l);g.WD(k.type,l);d.append(ckb(l));break;case 4:l=mp(f,h.type);k=mp(g,k.type);h=k.shift;d.append(kp(c.apply(l.state,k.delta),h));break;default:throw new r(k);}else if(h.type===3){l=mp(f,h.type);k=mp(g,k.type);h=l.shift;var n=k.shift;h==null?d.append(kp(c.apply(l.state,k.delta),n)):n==null?(d.append(l),
np(e,h.Jm,k.delta)):(d.append(kp(l.state,{ei:h.ei,Jm:n.Jm})),np(e,h.Jm,k.delta),tkb(e,n.ei,h.Jm))}else h.type===4||k.type===4?(k=mp(f,4),l=mp(g,4),h=k.shift,n=l.shift,h==null?d.append(lp(c.compose(k.delta,l.delta),n)):n==null?(d.append(k),np(e,h.Jm,l.delta)):(d.append(lp(k.delta,{ei:h.ei,Jm:n.Jm})),np(e,h.Jm,l.delta),tkb(e,n.ei,h.Jm))):(l=Math.min(h.length,k.length),h=f.WD(h.type,l),k=g.WD(k.type,l),d.append(h.type===2||k.type===2?ekb(l):jp(l)));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);
h=f.head;k=g.head}return d.build(e)}transform(a,b){if(!a.ops.length||!b.ops.length)return gp(b,a);const c=this.component,d=Pnb.create(a,b.pre,0),e=Pnb.create(jkb(b,a.hPa),a.pre,0),f=this.Mg(),g=this.Mg(),h=fp.As(),k=new Unb(c),l=new Unb(c);for(var n=d.head,p=e.head;n||p;){if(n&&n.type===3)if(p=mp(d,n.type),p.shift){var q=p.shift;n=lp();g.append(n,"nocollapse");f.append(p);pp(k,q.Jm,n);op(k,q.ei)}else g.append(akb),f.append(p);else if(n&&n.type===1)p=d.WD(n.type,n.length),g.append(jp(p.length)),f.append(p);
else if(p&&p.type===3)if(p=mp(e,p.type),p.shift){n=p.shift;q=n.ei;n=n.Jm;var u=-q-1,w=lp(void 0,{ei:-n-1,Jm:n});g.append(p);f.append(w);pp(l,n,w);op(l,q);skb(l,u,q)}else g.append(p),f.append(akb);else if(p&&p.type===1)q=e.WD(p.type,p.length),g.append(q),f.append(jp(p.length));else if(n&&p)if(n.type===4||p.type===4){q=mp(d,n.type);n=mp(e,p.type);const {Pu:x,rv:z}=ip(h,c.transform(q.delta,n.delta));p=q.shift;n=n.shift;if(p)if(n){q=n.ei;n=n.Jm;u=p.ei;p=p.Jm;w=-q-1;const B=lp(void 0,{ei:-n-1,Jm:n}),C=
lp(void 0,{ei:q,Jm:n});g.append(C);f.append(B);pp(k,p,C);pp(l,n,B);op(k,u,x);op(l,q,z);skb(l,w,u);tkb(l,q,p)}else q=p.ei,n=p.Jm,u=lp(),g.append(u,"nocollapse"),f.append(lp(z,p)),pp(k,n,u),op(k,q,x);else n?(p=n.ei,q=n.Jm,u=-p-1,w=lp(void 0,{ei:-q-1,Jm:q}),g.append(lp(x,n)),f.append(w),pp(l,q,w),op(l,p,z),skb(l,u,p)):(g.append(lp(x)),f.append(lp(z)))}else q=Math.min(n.length,p.length),n=d.WD(n.type,q),p=e.WD(p.type,q),n.type===2&&p.type===2?g.append(jp(p.length)):g.append(p),f.append(n);else throw Error(`length mismatch (${a} x ${b})`);
n=d.head;p=e.head}return h.build(g.build(k),f.build(l))}Nl(a){if(!a.ops.length)return a;const b=this.Mg(),c=new Tnb(this.component);for(const d of a.ops)switch(d.type){case 0:case 1:case 2:b.retain(d.length);break;case 4:a=this.component.Nl(d.delta);const e=d.shift&&vkb(d.shift);e?(b.retain(e),np(c,e.Jm,a)):b.append(lp(a));break;case 3:a=d.shift&&vkb(d.shift);d.state!=null?a?(b.retain(a),np(c,a.Jm,this.component.replace(d.state,void 0))):b.YY(d.state):b.retain(a);break;default:throw new r(d);}return b.build(c)}Bk(a,
b){if(a===b)return!0;if(a.pre!==b.pre||a.post!==b.post||a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.Ztc(a.ops[c],b.ops[c]))return!1;return!0}Ztc(a,b){switch(a.type){case 0:case 1:case 2:return a.type===b.type&&a.length!==b.length;case 3:return a.type===b.type&&this.component.wi(a.state,b.state)&&wkb(a.shift,b.shift);case 4:return a.type===b.type&&this.component.Bk(a.delta,b.delta)&&wkb(a.shift,b.shift);default:throw new r(a);}}Dg(a){return new Qnb(a)}identity(){return Nnb}apply(a,
b){if(!b.ops.length)return a;const c=Rnb.create(a,b.pre),d=new Qnb(Math.max(a.length,b.pre)+(b.post-b.pre));a=b.pre<a.length?[...b.ops,jp(a.length-b.pre)]:b.ops;for(const e of a)switch(e.type){case 0:okb(d,qkb(c,e.length));break;case 1:d.expand(e.length);break;case 2:ka(nkb(qkb(c,e.length)));d.expand(e.length);break;case 3:d.append(e.state,e.shift);break;case 4:d.append(this.component.apply(pkb(c),e.delta),e.shift);break;default:throw new r(e);}c.finish();return d.build()}Yl(a,b){if(!b.ops.length)return a;
const {unshift:c,Taf:d}=this.unshift(b);b=d;a=this.apply(a,c);const e=Rnb.create(a,b.post),f=new Qnb(Math.max(a.length,b.post)+(b.pre-b.post));a=b.post<a.length?[...b.ops,jp(a.length-b.post)]:b.ops;for(const g of a)switch(g.type){case 0:okb(f,qkb(e,g.length));break;case 1:ka(nkb(qkb(e,g.length)));break;case 2:ka(nkb(qkb(e,g.length)));f.expand(g.length);break;case 3:ep(this.component,g.state,pkb(e));break;case 4:f.append(this.component.Yl(pkb(e),g.delta));break;default:throw new r(g);}e.finish();return f.build()}unshift(a){const b=
this.Mg(),c=this.Mg();for(const d of a.ops)switch(d.type){case 0:b.append(d);c.append(d);break;case 1:case 2:b.append(jp(d.length));c.append(d);break;case 4:d.shift?(b.retain(vkb(d.shift)),c.append(lp(d.delta))):(b.retain(),c.append(d));break;case 3:d.shift?(b.retain(vkb(d.shift)),c.append(kp(d.state))):(b.retain(),c.append(d));break;default:throw new r(d);}return{unshift:b.build(),Taf:c.build()}}wi(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;const c=Object.keys(a),d=Object.keys(b);if(c.length!==
d.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==d[e]||!this.component.wi(a[c[e]],b[d[e]]))return!1;return!0}equals(a){return this===a||a instanceof Vnb&&this.component.equals(a.component)}constructor(a){super();this.component=new Lnb(new Mnb(a))}};var sp,ykb,Wnb,Akb,Ckb,Tkb,Bkb,$kb;sp=Object.freeze({serialize:a=>a,deserialize:a=>a});Pq=__c.Pq=Object.freeze({serialize(){throw Error("serialization not implemented");},deserialize(){throw Error("serialization not implemented");}});ykb=class{serialize(a){return this.b.serialize(this.a.serialize(a))}deserialize(a){return this.a.deserialize(this.b.deserialize(a))}constructor(a,b){this.a=a;this.b=b}};
Wnb=class{get serializer(){this.DQc==null&&(this.DQc=this.zse());return this.DQc}serialize(a){return this.serializer.serialize(a)}deserialize(a){return this.serializer.deserialize(a)}constructor(a){this.zse=a}};Akb=class{serialize(a){return a.map(b=>this.serializer.serialize(b))}deserialize(a){return a.map(b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
Ckb=Object.freeze({serialize(a){let b=0,c=0;const d=__c.xkb(a),e=[];a.forEach((f,g)=>{if(f=g-c)b&&(e.push(b),b=0),e.push(-f);b++;c=g+1});return{items:d,ik:e}},deserialize({items:a,ik:b}){const c=[];let d=0;for(const e of b)e<0?d+=-e:e>0&&(a.slice(0,e).forEach(f=>c[d++]=f),a=a.slice(e));a.length&&a.forEach(e=>c[d++]=e);return c}});Tkb=class{serialize(a){return ah(a,b=>this.serializer.serialize(b))}deserialize(a){return ah(a,b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
Bkb=class{serialize(a){return rp(this.fields,(b,c)=>b.serialize(a[c]))}deserialize(a){return rp(this.fields,(b,c)=>b.deserialize(a[c]))}constructor(a){this.fields=a}};$kb=class{serialize(a){return a!=null?this.serializer.serialize(a):void 0}deserialize(a){return a!=null?this.serializer.deserialize(a):void 0}constructor(a){this.serializer=a}};Object.freeze({serialize:a=>a,deserialize:a=>new blb(a.delta)});Object.freeze({serialize:a=>a,deserialize:a=>new Knb(a.oldState,a.newState)});
Object.freeze({serialize:a=>({ops:a}),deserialize:a=>a.ops});var Xnb,Hkb,Ynb,Znb;Xnb={next:()=>{},error:()=>{}};Hkb=class{next(a){this.closed||this.o.next(this.f(a))}error(a){this.closed||(this.closed=!0,this.o.error(a))}constructor(a,b){this.o=a;this.f=b;this.closed=!1}};Ynb=class{create(a,b=__c.tnb,c=Xnb){a=this.AA(a);b.subscribe(this.connect(a,c));return a}};
Qq=__c.Qq=class extends Ynb{map(a,b,c,d,e,f){return new Znb(this,a,b,c,d,e,f,zkb({serialize:b,deserialize:a},this.l$b),zkb({serialize:d,deserialize:c},this.Ota))}constructor(a,b){super();this.l$b=a;this.Ota=b}};
Znb=class extends Qq{AA(a){return this.NFe(this.component.AA(this.xla(a)))}connect(a,b){const c=this.component.connect(this.rWb(a),{next:d=>b.next(this.vMa(d)),error:d=>b.error(d)});return{next:d=>c.next(this.b5(d)),complete:()=>c.complete()}}jc(a){return this.Gjb(this.component.jc(this.rWb(a)))}destroy(a,b){return this.component.destroy(this.rWb(a),this.xla(b))}gj(a,b){return this.component.gj(this.rWb(a),this.xla(b))}constructor(a,b,c,d,e,f,g,h,k){super(h,k);this.component=a;this.vMa=b;this.b5=
c;this.Gjb=d;this.xla=e;this.NFe=f;this.rWb=g;this.domain=this.component.domain.map(this.vMa,this.b5,this.Gjb,this.xla)}};Rq=__c.Rq=class{connect(a){ka(this.YL==null);this.YL=a;return{next:b=>{this.YL&&Fkb(this,b)},complete:()=>this.complete()}}jc(){return this.cV()}complete(){this.YL&&(this.YL=void 0,Gkb(this,"mutable disconnected"))}error(a){this.YL&&(this.YL.error(a),this.YL=void 0,Gkb(this,"mutable failure"))}Kr(a){var b;Fkb(this,a);this.domain.isIdentity(a)||(b=this.YL)===null||b===void 0||b.next(a)}constructor(){this.clients=this.Nfc=this.YL=void 0}};var $nb;Sq=__c.Sq=class{get(){this.vY.reportObserved();return this.value}set(a){__c.qnb.identity(this.value,a)||(this.value=a,this.vY.reportChanged())}constructor(a){this.value=a;this.vY=rnb("")}};
$nb=class{static F(a){hb(a,{Fzc:Lp,s7b:Lp})}get Wq(){return this.cols.length}get pB(){return this.rows.length}get Fzc(){const a=new Map;this.rows.forEach((b,c)=>a.set(b,c));return a}get s7b(){const a=new Map;this.cols.forEach((b,c)=>a.set(b,c));return a}get(a,b){a=this.rows[a];b=this.cols[b];if(a!=null&&b!=null){var c=this.values.get(this.$_(a,b));c==null&&pnb()&&(c=new Sq,this.values.set(this.$_(a,b),c));return c&&c.get()}}set(a,b,c){let d=this.rows[a];d==null&&(d=this.rows[a]=this.ikd++);a=this.cols[b];
a==null&&(a=this.cols[b]=this.gkd++);(b=this.values.get(this.$_(d,a)))?b.set(c):this.values.set(this.$_(d,a),new Sq(c))}delete(a,b){a=this.rows[a];b=this.cols[b];if(a!=null&&b!=null){var c=this.values.get(this.$_(a,b));c&&c.set(void 0);this.values.delete(this.$_(a,b))}}forEach(a){for(const c of this.rows)for(const d of this.cols){var b=this.values.get(this.$_(c,d));b!=null&&(b=b.get(),b!=null&&a(b,c,d))}}$_(a,b){return`${a}:${b}`}constructor(){this.ikd=($nb.F(this),0);this.gkd=0;this.rows=Nq.array([],
{deep:!1});this.cols=Nq.array([],{deep:!1});this.values=new Map}};var aob,Pkb,Qkb,Okb,Rkb,Skb,bob,Vkb,Wkb,Zkb,Xkb,eob,gob,hob,iob;Ep=__c.Ep=class{constructor(a){this.serializer=a}};aob=class extends Ep{Dx(a,b){return a===b}stringify(a){return JSON.stringify(a)}};Pkb=class extends aob{cQ(a){return a===this.value}constructor(a){super(sp);this.value=a}};Qkb=class extends aob{cQ(a){return this.values.has(a)}constructor(a){super(sp);this.values=a}};Okb=class extends aob{constructor(a){super(sp);this.cQ=a}};
Rkb=class extends Ep{cQ(a){return a.every(b=>this.type.cQ(b))&&(!this.R8a||this.R8a(a))}Dx(a,b){return a.length===b.length&&a.every((c,d)=>d in b&&this.type.Dx(c,b[d]))&&a.reduce(c=>c+1,0)===b.reduce(c=>c+1,0)}stringify(a){return a.length?"[ "+a.map(b=>this.type.stringify(b)).join(", ")+" ]":"[]"}constructor(a,b,c){super(c);this.type=a;this.R8a=b}};
Skb=class extends Ep{cQ(a){return[...a].every(this.lAe)}Dx(a,b){if(a.size!==b.size)return!1;for(const [c,d]of a)if(a=b.get(c),a==null||!this.valueType.Dx(d,a))return!1;return!0}stringify(a){return a.size?`{ ${[...a].map(([b,c])=>`${this.keyType.stringify(b)} => ${this.valueType.stringify(c)}`).join(", ")} }`:"{}"}constructor(a,b,c){super(c);this.keyType=a;this.valueType=b;this.lAe=([d,e])=>bob.every(f=>!d.includes(f))&&this.keyType.cQ(d)&&this.valueType.cQ(e)}};bob=["$",".","\x00"];
Vkb=class extends Ep{cQ(a){return this.keys.every(b=>this.fields[b].cQ(a[b]))&&(!this.R8a||this.R8a(a))}Dx(a,b){return this.keys.every(c=>this.fields[c].Dx(a[c],b[c]))}stringify(a){return this.keys.length?"{ "+this.keys.map(b=>`${b}: ${this.fields[b].stringify(a[b])}`).join(", ")+" }":"{}"}constructor(a,b){super(Pq);this.fields=a;this.R8a=b;this.keys=Object.keys(this.fields)}};
Wkb=class extends Ep{cQ(a){return this.aN[this.FBb(a)].cQ(a)}Dx(a,b){const c=this.FBb(a),d=this.FBb(b);return c===d&&this.aN[c].Dx(a,b)}stringify(a){return this.aN[this.FBb(a)].stringify(a)}constructor(a,b){super(Pq);this.aN=a;this.FBb=b}};Zkb=class extends Ep{cQ(a){return a==null||this.type.cQ(a)}Dx(a,b){return a!=null?b!=null&&this.type.Dx(a,b):b==null}stringify(a){return a!=null?this.type.stringify(a):"undefined"}constructor(a,b){super(b);this.type=a}};
Xkb=class extends aob{cQ(a){return typeof a==="string"&&this.eXe.test(a)}constructor(a){super(sp);this.eXe=a}};Tq=__c.Tq=xp(a=>typeof a==="boolean");Uq=__c.Uq=xp(a=>typeof a==="string");__c.cob=xp(a=>a.length===1);__c.dob=Ykb(-2147483648,2147483647);eob=xp(a=>Number.isSafeInteger(a));Vq=__c.Vq=Ykb(0,2147483647);__c.fob=Ykb(1,2147483647);Wq=__c.Wq=Ykb(0,Number.MAX_SAFE_INTEGER);Xq=__c.Xq=xp(a=>Number.isFinite(a));Yq=__c.Yq=Dp(0,Number.MAX_VALUE);gob=xp(a=>Number.isFinite(a)&&0<a&&a<=Number.MAX_VALUE);
hob=zp(Yq);iob=zp(Uq);var job,alb;job={next:a=>ja(a==null),complete:()=>{}};
alb=class extends Qq{AA(a){return a!=null?this.type.AA(a):void 0}connect(a,b){if(a==null)return job;const c=this.type.connect(a,b);return{next:d=>c.next(m(d)),complete:()=>c.complete()}}jc(a){return a!=null?this.type.jc(a):void 0}destroy(a,b){if(a!=null&&b!=null)this.type.destroy(a,b);else if(a!=null||b!=null)throw Error(`${this.jc(a)} != ${b}`);}gj(a,b){return a!=null?b!=null&&this.type.gj(a,b):b==null}constructor(a,b,c){super(b,c);this.type=a;this.domain=new Mnb(this.type.domain)}};__c.Zq=Fp(Uq);
__c.kob=Fp(Tq);Fp(__c.dob);Fp(eob);__c.$q=Fp(Xq);__c.lob=Fp(Vq);__c.mob=Fp(Wq);__c.nob=Fp(Yq);var oob,dlb,pob,elb,qob;oob=class extends Rq{k0(a){if(a!=null)switch(a.type){case 1:ja(this.YFd.Dx(this._value.get(),a.oldState));this._value.set(a.newState);break;case 0:ja(a.delta==null);break;default:throw new r(a);}}get value(){return this._value.get()}set value(a){Mkb(this.YFd,a);const b=this._value.get();this.Kr(this.domain.replace(b,a))}cV(){return this.value}constructor(a,b,c){super();this.YFd=a;this.domain=b;this._value=new Sq(c)}};
dlb=class extends Qq{AA(a){a=Mkb(this.type,a);return new oob(this.type,this.domain,a)}connect(a,b){return a.connect(b)}jc(a){return a.jc()}destroy(a,b){Nkb(this.type,a.value,b)}gj(a,b){this.type.Dx(a.value,b)||(a.value=b);return!0}constructor(a,b){super(Pq,b);this.type=a;this.domain=new Lnb(new Jnb((c,d)=>this.type.Dx(c,d)))}};
pob=class extends Rq{instantiate(a){const b=up(this,clb),{mutable:c,Yx:d}=vp(this.type,a,b);this.Ewb.set(c);this.yRa=d;this.nfb=b}destroy(a){wp(this.type,a,this.yRa,this.Ewb.get())}k0(a){if(a!=null)switch(a.type){case 0:this.yRa.next(a.delta);break;case 1:this.destroy(a.oldState);this.instantiate(a.newState);break;default:throw Error();}}cV(){return this.type.jc(this.ref)}get ref(){return this.Ewb.get()}set(a){this.Kr(new Knb(this.type.jc(this.Ewb.get()),a))}constructor(a,b,c){super();this.type=a;
this.domain=b;a=up(this,clb);const {mutable:d,Yx:e}=vp(this.type,c,a);this.Ewb=new Sq(d);this.yRa=e;this.nfb=a}};elb=class extends Qq{AA(a){return new pob(this.type,this.domain,a)}connect(a,b){return a.connect(b)}jc(a){return a.jc()}destroy(a,b){this.type.destroy(a.ref,b)}gj(a,b){this.type.gj(a.ref,b)||a.set(b);return!0}constructor(a,b){super(Pq,b);this.type=a;this.domain=new Lnb(this.type.domain)}};__c.ar=Gp(Uq);br=__c.br=Gp(Tq);__c.cr=Gp(Xq);__c.dr=Gp(Vq);__c.er=Gp(Yq);qob=Gp(gob);__c.rob=Gp(hob);
__c.fr=Gp(iob);__c.gr=Ip(Uq);__c.sob=Ip(Tq);__c.hr=Ip(Xq);__c.tob=Ip(Vq);__c.ir=Ip(Yq);var flb=new Map,uob=class extends Oq{create(a,b){return glb(this,a,this.component.replace(void 0,b))}update(a,b){return glb(this,a,this.component.update(b))}replace(a,b,c){return glb(this,a,this.component.replace(b,c))}delete(a,b){return glb(this,a,this.component.replace(b,void 0))}identity(){return flb}isIdentity(a){return!a.size||Array.from(a.values()).every(b=>this.component.isIdentity(b))}Nl(a){if(!a.size)return a;const b=new Map;for(const [c,d]of a)a=this.component.Nl(d),a!=null&&b.set(c,a);
return b}compose(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const d of hlb(a,b)){const e=this.component.compose(a.get(d),b.get(d));e!=null&&c.set(d,e)}return c}transform(a,b){if(!a.size||!b.size)return gp(b,a);const c=new Map,d=new Map,e=fp.As();for(const f of hlb(a,b)){const g=ip(e,this.component.transform(a.get(f),b.get(f)));g.rv!=null&&c.set(f,g.rv);g.Pu!=null&&d.set(f,g.Pu)}return e.build(d,c)}apply(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.apply(a.get(e),
d);d!=null?c.set(e,d):c.delete(e)});return c}Yl(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.Yl(a.get(e),d);d!=null?c.set(e,d):c.delete(e)});return c}wi(a,b){return a===b||a.size===b.size&&Array.from(hlb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.wi(d,c)})}Bk(a,b){return a===b||a.size===b.size&&Array.from(hlb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.Bk(d,c)})}equals(a){return this===
a||a instanceof uob&&this.component.equals(a)}constructor(a){super();this.component=new Lnb(new Mnb(a))}};var vob=class extends Rq{static F(a){hb(a,{refs:Nq.shallow})}get size(){return this.refs.size}set(a,b){var c=this.refs.get(a);c=c!=null?this.domain.replace(a,this.type.jc(c),b):this.domain.create(a,b);this.Kr(c);c=this.get(a);if(c==null)throw Error(`Unable to set key "${a}" to value "${b}"`);return c}get(a){return this.refs.get(a)}has(a){return this.refs.has(a)}delete(a){const b=this.refs.get(a);b!=null&&(a=this.domain.delete(a,this.type.jc(b)),this.Kr(a))}forEach(a){this.refs.forEach(a)}map(a){return[...this.refs].map(([b,
c])=>a(c,b))}every(a){return[...this.refs.entries()].every(([b,c])=>a(c,b))}entries(){return this.refs.entries()}keys(){return this.refs.keys()}values(){return this.refs.values()}RO(){return new Map(this.refs)}[Symbol.iterator](){return this.refs[Symbol.iterator]()}cV(){return ah(this.refs,a=>this.type.jc(a))}destroy(a){ja(this.refs.size===a.size);this.forEach((b,c)=>{const d=m(a.get(c));c=m(this.uHa.get(c));wp(this.type,d,c.to,b)})}gj(a){for(const [b,c]of this.refs)if(a.has(b)){const d=a.get(b);
this.type.gj(c,d)||this.set(b,d)}else this.delete(b);for(const [b,c]of a)this.refs.has(b)||this.set(b,c);return!0}k0(a){a.forEach((b,c)=>{if(b!=null)switch(b.type){case 0:b.delta!=null&&m(this.uHa.get(c)).to.next(b.delta);break;case 1:b.oldState!=null?(this.v$b(c,b.oldState),this.refs.delete(c),this.uHa.delete(c)):(ja(!this.refs.has(c)),ja(!this.uHa.has(c)));if(b.newState!=null){const {gZc:d,value:e}=ilb(this,c,b.newState);this.refs.set(c,e);this.uHa.set(c,d)}break;default:throw new r(b);}})}v$b(a,
b){const c=m(this.refs.get(a));a=m(this.uHa.get(a));wp(this.type,b,a.to,c)}constructor(a,b,c){super();this.type=a;this.domain=b;this.refs=(vob.F(this),new Map);this.uHa=new Map;c.forEach((d,e)=>{const {gZc:f,value:g}=ilb(this,e,d);this.refs.set(e,g);this.uHa.set(e,f)})}},jlb=class extends Qq{AA(a){return new vob(this.type,this.domain,a)}Kn(a){return a}connect(a,b){return this.Kn(a).connect(b)}jc(a){return this.Kn(a).jc()}destroy(a,b){return this.Kn(a).destroy(b)}gj(a,b){return this.Kn(a).gj(b)}constructor(a,
b){super(Pq,b);this.type=a;this.domain=new uob(this.type.domain)}};var wob={next:()=>{},complete:()=>{}},klb=class extends Qq{AA(a){return Mkb(this.type,a)}connect(){return wob}jc(a){return a}destroy(a,b){Nkb(this.type,a,b)}gj(a,b){return this.type.Dx(a,b)}constructor(a,b){super(sp,b);this.type=a;this.domain=new Jnb((c,d)=>this.type.Dx(c,d))}};var mlb=class extends Oq{static of(a){return new mlb(a)}update(a,b){const c={};m(this.components[a]).isIdentity(b)||(c[a]=b);return c}identity(){return this.id}isIdentity(a){return a===this.id||Object.entries(a).every(([b,c])=>c==null||this.components[b].isIdentity(c))}Nl(a){const b={};var c=Object.keys(a);if(!c.length)return a;for(const e of c){var d=a[e];d!=null&&(c=this.components[e],d=c.Nl(d),c.isIdentity(d)||(b[e]=d))}return b}compose(a,b){const c={};var d=Object.keys(a),e=Object.keys(b);if(!d.length)return b;
if(!e.length)return a;for(const f of new Set([...d,...e])){e=a[f];const g=b[f];e!=null&&g!=null?(d=this.components[f],e=d.compose(e,g),d.isIdentity(e)||(c[f]=e)):e!=null?c[f]=e:g!=null&&(c[f]=g)}return c}transform(a,b){const c={},d={};var e=Object.keys(a),f=Object.keys(b);if(!e.length||!f.length)return gp(b,a);const g=fp.As();for(const h of new Set([...e,...f])){f=a[h];const k=b[h];f!=null&&k!=null?(e=this.components[h],f=ip(g,e.transform(f,k)),e.isIdentity(f.rv)||(c[h]=f.rv),e.isIdentity(f.Pu)||
(d[h]=f.Pu)):f!=null?c[h]=f:k!=null&&(d[h]=k)}return g.build(d,c)}apply(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].apply(a[e],c));return d}Yl(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].Yl(a[e],c));return d}wi(a,b){return a===b||Object.keys(this.components).every(c=>this.components[c].wi(a[c],b[c]))}Bk(a,b){if(a===b)return!0;
const c=Object.keys(a),d=Object.keys(b);return!c.length&&!d.length||__c.Xo([...c,...d]).every(e=>{const f=a[e],g=b[e];return f!=null&&g!=null&&this.components[e].Bk(f,g)})}equals(a){return this===a?!0:a instanceof mlb?Object.keys(this.components).length===Object.keys(a.components).length&&Object.keys(this.components).every(b=>b in a.components&&this.components[b].equals(a.components[b])):!1}constructor(a){super();this.components=a;this.id={}}};var llb,yob;llb=class{get value(){return this.computed.get()}set value(a){this.computed.set(a)}constructor(a){this.computed=a}};
__c.xob=class extends Rq{cV(){const a=this.a$,b=this.kob,c=this.gUa,d={};for(const e in a)d[e]=this.values[e];for(const e in b)d[e]=b[e].jc(this.Ub[e]);for(const e in c)d[e]=c[e].jc(this.attributes[e]);return d}destroy(a){const b=this.a$,c=this.kob,d=this.gUa,e=this.m1c;for(const f in b)Nkb(b[f],this.values[f],a[f]);for(const f in c)wp(c[f],a[f],this.qsd[f],this.Ub[f]);for(const f in d)wp(d[f],a[f],this.sTc[f],this.attributes[f]);if(e)try{e()}catch(f){Promise.reject(f)}}gj(a){const b=this.a$,c=this.kob,
d=this.gUa;for(const e in b)if(!b[e].Dx(this.values[e],a[e]))return!1;for(const e in c)if(!c[e].gj(this.Ub[e],a[e]))return!1;for(const e in d)if(!d[e].gj(this.attributes[e],a[e]))return!1;return!0}k0(a){for(const b in a)a[b]!=null&&(b in this.kob?this.qsd[b].next(a[b]):b in this.gUa&&this.sTc[b].next(a[b]))}getAttribute(a){return this.attributes[a].value}setAttribute(a,b){this.attributes[a].value=b}constructor(a,b,c,d,e,f){super();this.domain=a;this.a$=b;this.kob=c;this.gUa=d;this.m1c=void 0;this.values=
rp(b,(g,h)=>Mkb(g,f[h]));a=rp(c,(g,h)=>{const k=plb(this,h),{Yx:l,mutable:n}=vp(g,f[h],k);return{ref:n,yRa:l,nfb:k}});this.Ub=rp(a,g=>g.ref);this.qsd=rp(a,g=>g.yRa);rp(a,g=>g.nfb);d=rp(d,(g,h)=>{const k=qlb(this,h),{Yx:l,mutable:n}=vp(g,f[h],k);return{ref:n,yRa:l,nfb:k}});this.attributes=rp(d,g=>g.ref);this.sTc=rp(d,g=>g.yRa);rp(d,g=>g.nfb);if(e){const {Ub:g,attributes:h,Sca:k}=e.create({...this.values,...this.Ub,...this.attributes});this.wYc=rp(e.Ub,(l,n)=>g[n]);this.Q7b=rp(e.attributes,(l,n)=>h[n]);
this.m1c=k}else this.wYc={},this.Q7b={}}};__c.xob.prototype.AQ=da(100);jr=__c.jr=Symbol("$impl");yob=class extends Qq{};
__c.zob=class extends yob{AA(a){a=new __c.xob(this.domain,this.values,this.Ub,this.attributes,this.computed,a);const b={...a.values,...a.Ub,...a.wYc};Object.defineProperties(b,this.AVe);Object.defineProperty(b,jr,{enumerable:!1,writable:!1,value:a});return b}connect(a,b){return a[jr].connect(b)}jc(a){return a[jr].jc()}destroy(a,b){a[jr].destroy(b)}gj(a,b){return a[jr].gj(b)}Di({values:a={},Ub:b={},attributes:c={},computed:d}){return new __c.zob({...this.values,...a},{...this.Ub,...b},{...this.attributes,
...c},rlb(this.computed,d))}constructor(a,b,c,d){super(Pq,Pq);this.values=a;this.Ub=b;this.attributes=c;this.computed=d;this.domain=nlb(rp(this.values,e=>new Jnb((f,g)=>e.Dx(f,g))),rp(this.Ub,e=>e.domain),rp(this.attributes,e=>e.domain));olb(a,{...b,...(d===null||d===void 0?void 0:d.Ub)},{...c,...(d===null||d===void 0?void 0:d.attributes)});a=rp(c,(e,f)=>({enumerable:!0,get(){return this[jr].getAttribute(f)},set(g){this[jr].setAttribute(f,g)}}));d=rp((d===null||d===void 0?void 0:d.attributes)||{},
(e,f)=>({enumerable:!0,get(){return this[jr].Q7b[f].value},set(g){this[jr].Q7b[f].value=g}}));this.AVe={...a,...d}}};__c.zob.prototype.AQ=da(99);var slb=new __c.zob({},{},{});var Aob=class extends Oq{EL(a){return a}isIdentity(a){return a===0}compose(a,b){return a+b}transform(a,b){return gp(b,a)}Bk(a,b){return a===b}identity(){return 0}apply(a,b){return a+b}Yl(a,b){return a-b}wi(a,b){return a===b}},Bob=class extends Aob{Nl(a){return 0-a}equals(a){return this===a||a instanceof Bob}},Cob=class extends Aob{EL(a){ja(a>=0);return super.EL(a)}compose(a,b){ja(a>=0);ja(b>=0);return super.compose(a,b)}transform(a,b){ja(a>=0);ja(b>=0);return super.transform(a,b)}Nl(a){ja(a>=0);return 0}apply(a,
b){ja(b>=0);return super.apply(a,b)}Yl(a,b){ja(b>=0);return super.Yl(a,b)}equals(a){return this===a||a instanceof Cob}},Dob=new Bob,Eob=new Cob;var Fob=class extends Rq{k0(a){this._value.set(this.domain.apply(this._value.get(),a))}get value(){return this._value.get()}EL(a){this.Kr(this.domain.EL(a))}cV(){return this.value}constructor(a,b){super();this.domain=a;this._value=new Sq(b)}},Gob=class extends Qq{AA(a){return new Fob(this.domain,a)}connect(a,b){return a.connect(b)}jc(a){return a.jc()}destroy(a,b){ep(this.domain,a.value,b)}gj(a,b){a.EL(b-a.value);return!0}},Hob=class extends Gob{constructor(){super(sp,sp);this.domain=Dob}},Iob=class extends Gob{gj(a,
b){return b<a.value?!1:super.gj(a,b)}constructor(){super(sp,sp);this.domain=Eob}};new Hob;new Iob;__c.Job=class{static F(a){hb(a,{empty:Lp})}get empty(){return this.first()==null}count(){return this.reduce(a=>a+1,0)}toArray(){return this.base.filter(this.predicate)}RO(){return new Map(this.map((a,b)=>[b,a]))}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}first(a){const b=this.predicate;return this.base.first(c=>b(c)&&(!a||a(c)))}last(a){const b=this.predicate;return this.base.last(c=>b(c)&&(!a||a(c)))}next(a,b){ja(this.has(a));const c=this.predicate;return this.base.next(a,d=>c(d)&&
(!b||b(d)))}wk(a,b){ja(this.has(a));const c=this.predicate;return this.base.wk(a,d=>c(d)&&(!b||b(d)))}Or(a,b){const c=this.predicate;ja(c(a));ja(c(b));return this.base.Or(a,b)}has(a){const b=this.predicate;return b(a)&&this.base.has(a)}fia(a){const b=this.predicate;ja(b(a));return this.base.fia(a)}eya(a){const b=this.predicate;return new __c.Job(this.base,c=>b(c)&&a(c))}map(a){const b=this.predicate,c=[];this.base.forEach((d,e)=>{b(d)&&c.push(a(d,e))});return c}flatMap(a){const b=this.predicate,c=
[];this.base.forEach((d,e)=>{b(d)&&c.push(...a(d,e))});return c}filter(a){const b=this.predicate;return this.base.filter((c,d)=>b(c)&&a(c,d))}forEach(a){const b=this.predicate;this.base.forEach((c,d)=>b(c)&&a(c,d))}reduce(a,b){const c=this.predicate;return this.base.reduce((d,e)=>c(e)?a(d,e):d,b)}some(a){const b=this.predicate;return this.base.some(c=>b(c)&&a(c))}every(a){const b=this.predicate;return this.base.every(c=>b(c)&&a(c))}constructor(a,b){this.base=a;this.predicate=b;__c.Job.F(this)}};__c.Kob=class{get values(){return this.list.get()}get empty(){return this.values.empty}count(){return this.values.count()}toArray(){return this.values.toArray()}RO(){return this.values.RO()}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}first(a){return this.values.first(a)}last(a){return this.values.last(a)}next(a,b){return this.values.next(a,b)}wk(a,b){return this.values.wk(a,b)}Or(a,b){return this.values.Or(a,b)}fia(a){return this.values.fia(a)}has(a){return this.values.has(a)}set(a,
b){return this.values.set(a,b)}replace(a,b){return this.values.replace(a,b)}append(a){return this.values.append(a)}prepend(a){return this.values.prepend(a)}nLa(a,b){return this.values.nLa(a,b)}insertBefore(a,b){return this.values.insertBefore(a,b)}delete(a){return this.values.delete(a)}eya(a){return new __c.Job(this,a)}map(a){return this.values.map(a)}flatMap(a){return this.values.flatMap(a)}filter(a){return this.values.filter(a)}forEach(a){return this.values.forEach(a)}reduce(a,b){return this.values.reduce(a,
b)}some(a){return this.values.some(a)}every(a){return this.values.every(a)}constructor(a){this.list=a}};__c.Kob.prototype.QL=da(109);__c.Kob.prototype.v6=da(104);__c.lr=class extends Rq{static F(a){hb(a,{Mba:Lp,dr:Lp,empty:Lp,kEb:Lp,FJb:Lp})}fNa(a){const b=up(this,e=>Op(this).retain(this.ZN(c)).update(e).build()),{mutable:c,Yx:d}=vp(this.type,a,b);return{id:String(this.hMb++),value:c,to:d,from:b}}u$b(a,b){wp(this.type,a,b.to,b.value)}get Mba(){const a=new Map;this.nL.forEach((b,c)=>b&&a.set(b.value,c));return a}get dr(){return this.nL.filter(__c.Ra)}get(a){return(a=this.nL[a])&&a.value}cgc(a){return(a=this.dr[a])&&a.value}ZN(a){return m(this.Mba.get(a),"ref not found")}k0(a){const b=
this.nL,c=new Map,d=new Map;var e=0;b.length<a.pre&&(b.length=a.pre);for(var f of a.ops)switch(f.type){case 0:case 2:e+=f.length;break;case 1:b.spliceWithArray(e,0,Array(f.length));e+=f.length;break;case 3:var g=f.state,h=f.shift;b.splice(e,0,g!=null?this.fNa(g):void 0);h&&(d.set(h.ei,b[e]),c.set(h.Jm,e));e++;break;case 4:var k=f.delta;g=f.shift;if(k)switch(k.type){case 0:h=k.delta;h!=null&&m(b[e]).to.next(h);break;case 1:h=k.oldState;k=k.newState;h==null?ka(b[e]==null):this.u$b(h,m(b[e]));b[e]=k!=
null?this.fNa(k):void 0;break;default:throw new r(k);}g&&(d.set(g.ei,b[e]),c.set(g.Jm,e));e++;break;default:throw new r(f);}ka(d.size===a.hPa);ka(c.size===a.hPa);for(e=0;e<a.hPa;e++)ka(d.has(e)),f=m(c.get(e)),b[f]=d.get(e);for(;b.length&&b[b.length-1]==null;)b.length--}cV(){const a=[];this.nL.forEach((b,c)=>{b!=null&&(a[c]=this.type.jc(b.value))});return a}destroy(a){let b=0;this.nL.forEach((d,e)=>{d!=null&&(ja(e in a),this.type.destroy(d.value,a[e]),b++)});const c=a.reduce(d=>d+1,0);ja(b===c)}gj(a){const b=
this.nL,c=Op(this);for(let e=0;e<b.length;e++){const f=b[e];f!=null&&a[e]!=null&&this.type.gj(f.value,a[e])||f==null&&a[e]==null?c.retain():c.change(f&&this.type.jc(f.value),a[e])}let d=b.length;a.forEach((e,f)=>{f>=b.length&&(c.retain(f-d),c.insert(e),d=f+1)});a=c.build();this.domain.isIdentity(a)||this.Kr(c.build());return!0}get empty(){return!this.dr.length}count(){return this.dr.length}toArray(){return this.dr.map(a=>a.value)}RO(){return new Map(this.map((a,b)=>[b,a]))}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}get kEb(){const a=
this.dr[0];return a&&a.value}get FJb(){const a=this.dr[this.dr.length-1];return a&&a.value}first(a){if(!a)return this.kEb;const b=this.dr.find(c=>a(c.value));return b&&b.value}last(a){if(!a)return this.FJb;const b=this.dr;for(let c=b.length-1;c>=0;c--){const d=b[c];if(a(d.value))return d.value}}next(a,b){const c=this.nL;for(a=this.ZN(a)+1;a<c.length;a++){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}wk(a,b){const c=this.nL;for(a=this.ZN(a)-1;a>=0;a--){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}Or(a,
b){a=this.Mba.get(a);b=this.Mba.get(b);ja(a!=null);ja(b!=null);return a<b?-1:a>b?1:0}fia(a){return this.nL[this.ZN(a)].id}has(a){return this.Mba.has(a)}insertAt(a,b){this.Kr(Op(this).retain(a).insert(b).build());return this.nL[a].value}set(a,b){var c;ja(a>=0);a>=this.nL.length&&(this.nL.length=a+1);const d=(c=this.nL[a])===null||c===void 0?void 0:c.value;c=d!=null?this.type.jc(d):void 0;this.Kr(Op(this).retain(a).change(c,b).build());return this.nL[a].value}replace(a,b){a=this.ZN(a);return this.set(a,
b)}append(a){return this.insertBefore(void 0,a)}prepend(a){return this.nLa(void 0,a)}nLa(a,b){return this.insertAt(a?this.ZN(a)+1:0,b)}insertBefore(a,b){return this.insertAt(a?this.ZN(a):this.nL.length,b)}delete(a){a=Op(this).retain(this.ZN(a)).YY(this.type.jc(a)).build();this.Kr(a)}moveTo(a,b){const c=this.ZN(b);if(c===a)return b;this.Kr(c<a?Op(this).retain(c).retain({ei:0,Jm:1}).retain(a-c-1).expand({ei:1,Jm:0}).build():Op(this).retain(a).expand({ei:0,Jm:1}).retain(c-a).retain({ei:1,Jm:0}).build());
return b}eya(a){return new __c.Job(this,a)}map(a){return this.dr.map(({value:b,id:c})=>a(b,c))}flatMap(a){return this.dr.flatMap(({value:b,id:c})=>a(b,c))}filter(a){return this.dr.filter(b=>a(b.value,b.id)).map(b=>b.value)}forEach(a){this.dr.forEach(b=>b!=null&&a(b.value,b.id))}reduce(a,b){return this.dr.reduce((c,d)=>a(c,d.value,d.id),b)}some(a){return this.dr.some(b=>a(b.value,b.id))}every(a){return this.dr.every(b=>a(b.value,b.id))}constructor(a,b,c){super();this.type=a;this.domain=b;this.nL=(__c.lr.F(this),
void 0);this.hMb=0;ja(!c.length||c[c.length-1]!=null);this.nL=Nq.array([...c.map(d=>this.fNa(d))],{deep:!1})}};__c.lr.prototype.QL=da(108);__c.lr.prototype.v6=da(103);__c.tlb=class extends Qq{Mg(){return this.domain.Mg()}Kn(a){return a}AA(a){return new __c.lr(this.type,this.domain,a)}connect(a,b){return this.Kn(a).connect(b)}jc(a){return this.Kn(a).jc()}destroy(a,b){this.Kn(a).destroy(b)}gj(a,b){return this.Kn(a).gj(b)}constructor(a,b){super(Pq,b);this.type=a;this.domain=new Vnb(this.type.domain)}};
__c.tlb.prototype.BB=da(111);__c.mr=class{get empty(){return this.list.empty}count(){return this.list.count()}toArray(){return this.list.toArray()}RO(){return this.list.RO()}first(a){return this.list.first(a)}last(a){return this.list.last(a)}next(a,b){return this.list.next(a,b)}wk(a,b){return this.list.wk(a,b)}Or(a,b){return this.list.Or(a,b)}fia(a){return this.list.fia(a)}has(a){return this.list.has(a)}eya(a){return this.list.eya(a)}map(a){return this.list.map(a)}flatMap(a){return this.list.flatMap(a)}filter(a){return this.list.filter(a)}forEach(a){this.list.forEach(a)}reduce(a,
b){return this.list.reduce(a,b)}some(a){return this.list.some(a)}every(a){return this.list.every(a)}[Symbol.iterator](){return this.list[Symbol.iterator]()}set(){return Qp()}replace(){return Qp()}nLa(){return Qp()}insertBefore(){return Qp()}append(){return Qp()}prepend(){return Qp()}delete(){return Qp()}constructor(a){this.list=a}};__c.mr.prototype.QL=da(107);__c.mr.prototype.v6=da(102);var Lob;Lob=class extends Oq{isIdentity(a){throw new r(a);}compose(a){throw new r(a);}transform(a){throw new r(a);}Nl(a){throw new r(a);}Bk(a){throw new r(a);}identity(a){throw new r(a);}apply(a){throw new r(a);}Yl(a){throw new r(a);}wi(a){throw new r(a);}equals(a){return this===a||a instanceof Lob}};__c.Mob=new Lob;var Nob,Oob,Sob,Tob,Uob,Vob,qr,Xob,Yob,Wob;Nob=class{};nr=__c.nr=class extends Nob{get length(){return this.state.length}iXb(a){ulb(this,a);return this.state.charAt(a)}aU(a){vlb(this,a);return[new nr(this.state.substring(0,a)),new nr(this.state.substring(a))]}$J(){return this}toString(){return this.state}constructor(a){super();this.state=a;this.type=0;ja(!!a)}};
Up=__c.Up=class extends Nob{get length(){return 1}iXb(a){ulb(this,a);return this.state}aU(a){vlb(this,a);throw Error();}$J(a){return new Up(a(this.state))}toString(){return`[${this.state}]`}constructor(a){super();this.state=a;this.type=1}};
or=__c.or=class extends Nob{get length(){return this.state}iXb(a){ulb(this,a)}aU(a){vlb(this,a);return[new or(a),new or(this.state-a)]}$J(){return this}toString(){return this.state<=7?"\u00b7".repeat(this.state):`\u00b7\u00b7(${this.state})\u00b7\u00b7`}constructor(a){super();this.state=a;this.type=2;ja(!!a)}};
__c.pr=class{get length(){return this.Bna+this.Sr+this.bGc}Bd(a){return new Oob(this,a)}cursor(a,b){return new __c.Pob(this,a,b)}$J(a){const b=this.Xw.map(c=>c.$J(a));return new __c.pr(b,this.Bna,this.Sr,this.bGc)}ib(){return this.Xw.map(a=>a.type===0?a.state:"").join("")}forEach(a,b){for(const c of this.Xw)switch(c.type){case 0:b.ib&&b.ib(c.state);break;case 1:b.item(c.state);break;case 2:b.ik&&b.ik(c.state);break;default:throw new r(c);}(a=Math.max(0,a-this.length))&&b.ik&&b.ik(a)}map(a,b){const c=
this.Xw.map(d=>{switch(d.type){case 0:return b.ib(d.state);case 1:return b.item(d.state);case 2:return b.ik(d.state);default:throw new r(d);}});(a=Math.max(0,a-this.length))&&c.push(b.ik(a));return c}reduce(a,b){return this.Xw.reduce((c,d)=>{switch(d.type){case 0:return a.ib(c,d.state);case 1:return a.item(c,d.state);case 2:return a.ik?a.ik(c,d.state):c;default:throw new r(d);}},b)}slice(a,b){ja(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.Qob;
const d=new __c.Rob;c=this.cursor(b);c.ZS(a);c.ZS(b-a,{item:e=>d.item(e),ib:e=>d.cf(e),ik:e=>d.R4(e)});return d.build()}toString(){return this.Xw.join("")}constructor(a,b,c,d){this.Xw=a;this.Bna=b;this.Sr=c;this.bGc=d;a=a.length?a[a.length-1]:void 0;ja(!a||a.type!==2)}};__c.pr.prototype.mJb=da(112);__c.Qob=new __c.pr([],0,0,0);
__c.Rob=class{Yka(a){this.mode!==a&&(this.flush(),this.mode=a)}flush(){if(this.mode!=null){switch(this.mode){case 0:this.Xw.push(new nr(this.pob));this.dzb+=this.pob.length;this.pob="";break;case 2:this.Xw.push(new or(this.qob));this.NVb+=this.qob;this.qob=0;break;default:throw new r(this.mode);}this.mode=void 0}}region(a){switch(a.type){case 0:return this.cf(a.state);case 1:return this.item(a.state);case 2:return this.R4(a.state);default:throw new r(a);}}cf(a){a&&(this.Yka(0),this.pob+=a);return this}item(a){this.flush();
this.Xw.push(new Up(a));this.gmc++;return this}R4(a){a>0&&(this.Yka(2),this.qob+=a);return this}append(a,b=0){a.forEach(b,{ib:c=>this.cf(c),item:c=>this.item(c),ik:c=>this.R4(c)});return this}get length(){return this.dzb+this.gmc+this.NVb}build(){this.mode!==2&&this.flush();return this.length?new __c.pr(this.Xw,this.dzb,this.gmc,this.NVb):__c.Qob}constructor(){this.Xw=[];this.mode=void 0;this.pob="";this.NVb=this.gmc=this.dzb=this.qob=0}};
Oob=class{get head(){return this.Mm}get prevValue(){return this.unb&&this.unb.iXb(this.unb.length-1)}Jo(a){const b=m(this.Mm),c=b.length;ja(0<a&&a<=c,"{} \u2209 (0, {}]",a,c);if(a<c)return a=b.aU(a),this.Mm=a[1],this.unb=a[0];this.Mm=this.Xw[this.i++];return this.unb=b}finish(){ka(this.Mm==null,"unconsumed reader head: {}",this.Mm)}constructor(a,b=0){this.i=0;this.unb=void 0;this.Xw=(b=Math.max(0,b-a.length))?[...a.Xw,new or(b)]:a.Xw;this.Mm=this.Xw.length?this.Xw[this.i++]:void 0}};
__c.Pob=class{get prevValue(){return this.Bd.prevValue}move(a,b,c){for(c=__c.wlb(this.Ljb,c);a;){var d=this.Bd.head;if(d)switch(d=this.Bd.Jo(b||d.type!==2?Math.min(d.length,a):d.length),d.type){case 0:c&&c.ib&&c.ib(d.state);a-=d.length;break;case 1:c&&c.item&&c.item(d.state);a-=d.length;break;case 2:c&&c.ik&&c.ik(d.state);b&&(a-=d.length);break;default:throw new r(d);}else ja(b,"not enough characters or items: {}",a),c&&c.ik&&c.ik(a),a-=a}}ZS(a,b){this.move(a,!0,b)}uo(a,b){this.move(a,!1,b)}finish(){this.Bd.finish()}constructor(a,
b,c){this.Ljb=c;this.Bd=a.Bd(b)}};__c.Pob.prototype.VMa=da(113);__c.Pob.prototype.QL=da(106);Sob=class{};Tob=class extends Sob{get Pca(){return this.length}get r3(){return this.length}VTb(a){xlb(this,a);return this.aU(a)}UTb(a){ylb(this,a);return this.aU(a)}aU(a){return[new Tob(a),new Tob(this.length-a)]}map(){return this}toString(){return`R${this.length}`}constructor(a){super();this.length=a;this.type=0}};
Uob=class extends Sob{get Pca(){return 1}get r3(){return 1}VTb(a){xlb(this,a);throw Error();}UTb(a){ylb(this,a);throw Error();}map(a){return new Uob(a(this.delta))}toString(){return`U[${this.delta}]`}constructor(a){super();this.delta=a;this.type=1}};
Vob=class extends Sob{get Pca(){return 0}get r3(){return this.state.length}VTb(a){xlb(this,a);throw Error();}UTb(a){ylb(this,a);const [b,c]=this.state.aU(a);return[new Vob(b),new Vob(c)]}map(a,b){return new Vob(this.state.$J(b))}toString(){switch(this.state.type){case 0:case 1:return`I${this.state}`;case 2:return`X${this.state.length}`;default:throw new r(this.state);}}constructor(a){super();this.state=a;this.type=2}};
qr=class extends Sob{get Pca(){return this.oldState.length}get r3(){return this.newState.length}VTb(a){xlb(this,a);return this.aU(a)}UTb(a){ylb(this,a);return this.aU(a)}aU(a){const [b,c]=this.oldState.aU(a),[d,e]=this.newState.aU(a);return[new qr(b,d),new qr(c,e)]}map(a,b){return new qr(this.oldState.$J(b),this.newState.$J(b))}toString(){return this.oldState.type===2?this.newState.type===2?`\u25e0${this.oldState.state}`:`\u2191${this.newState}`:this.newState.type===2?`\u2193${this.oldState}`:`\u25e1[${this.oldState}|${this.newState}]`}constructor(a,
b){super();this.oldState=a;this.newState=b;this.type=3;dp(a.length,b.length)}};
Xob=class{Bd(a,b){return new Wob(this,a,b)}forEach(a,b=this.pre,c=this.post){for(const d of this.ops)switch(d.type){case 0:a.retain&&a.retain(d.length);break;case 1:a.update&&a.update(d.delta);break;case 2:a.insert&&a.insert(d.state);break;case 3:a.change&&a.change(d.oldState,d.newState);break;default:throw new r(d);}(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length);case 1:return a.update(b.delta);case 2:return a.insert(b.state);
case 3:return a.change(b.oldState,b.newState);default:throw new r(b);}})}$J(a,b){const c=this.ops.map(d=>d.map(a,b));return new Xob(c,this.pre,this.post)}toString(){return`[${this.ops.toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};Yob=new Xob([],0,0);
__c.Zob=class{Yka(a,b,c){if(this.F3!==a||this.Yqc!==b||this.qqc!==c)switch(this.flush(),this.F3=a,this.Yqc=b,this.qqc=c,a){case 0:break;case 2:c===0&&(this.TZ="");break;case 3:b===0&&(this.SAa="");c===0&&(this.TZ="");break;default:throw new r(a);}}flush(){if(this.F3!=null){switch(this.F3){case 0:this.push(new Tob(this.acc));this.acc=0;break;case 2:var a=this.TZ!=null?new nr(this.TZ):new or(this.acc);this.push(new Vob(a));this.TZ=void 0;this.acc=0;break;case 3:a=this.SAa!=null?new nr(this.SAa):new or(this.acc);
const b=this.TZ!=null?new nr(this.TZ):new or(this.acc);this.push(new qr(a,b));this.TZ=this.SAa=void 0;this.acc=0;break;default:throw new r(this.F3);}this.qqc=this.Yqc=this.F3=void 0}}push(a){this.ops.push(a);this.pre+=a.Pca;this.post+=a.r3}op(a){switch(a.type){case 0:return this.retain(a.length);case 1:return this.update(a.delta);case 2:return this.iza(a.state);case 3:return Sp(this,a.oldState,a.newState);default:throw new r(a);}}iza(a){switch(a.type){case 0:return this.insert(a.state);case 1:return this.insert(a.state);
case 2:return this.expand(a.state);default:throw new r(a);}}retain(a){ja(a>=0);a&&(this.Yka(0),this.acc+=a);return this}update(a){if(this.isIdentity(a))return this.retain(1);this.flush();this.ops.push(new Uob(a));this.pre++;this.post++;return this}expand(a){ja(a>=0);a&&(this.Yka(2,void 0,2),this.acc+=a);return this}insert(a){typeof a==="string"?a&&(this.Yka(2,void 0,0),this.TZ+=a):(this.flush(),this.push(new Vob(new Up(a))));return this}eta(a){ja(a>=0);a&&(this.Yka(3,2,2),this.acc+=a);return this}y6a(a){typeof a===
"string"?a&&(this.Yka(3,2,0),this.acc+=a.length,this.TZ+=a):(this.flush(),this.push(new qr(new or(1),new Up(a))));return this}YY(a){typeof a==="string"?a&&(this.Yka(3,0,2),this.acc+=a.length,this.SAa+=a):(this.flush(),this.push(new qr(new Up(a),new or(1))));return this}change(a,b){typeof a==="string"?typeof b==="string"?(dp(a.length,b.length),a&&(this.Yka(3,0,0),this.SAa+=a,this.TZ+=b)):(dp(a.length,1),this.flush(),this.push(new qr(new nr(a),new Up(b)))):typeof b==="string"?(dp(1,b.length),this.flush(),
this.push(new qr(new Up(a),new nr(b)))):(this.flush(),this.push(new qr(new Up(a),new Up(b))));return this}build(){this.F3!==0&&this.flush();return new Xob(this.ops,this.pre,this.post)}constructor(a){this.isIdentity=a;this.ops=[];this.post=this.pre=0;this.qqc=this.Yqc=this.F3=void 0;this.acc=0;this.TZ=this.SAa=void 0}};__c.Zob.prototype.jza=da(116);
Wob=class{get head(){return this.Mm}finish(){ka(this.Mm==null)}constructor(a,b=0,c=0){this.ops=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,new Tob(b)]:a.ops;this.i=0;this.Mm=this.ops[this.i++]}};
__c.$ob=class extends Oq{Mg(){return new __c.Zob(a=>this.component.isIdentity(a))}Dg(){return new __c.Rob}id(){return Yob}HP(){return __c.Qob}isIdentity(a){return!a.ops.length||a.ops.every(b=>b.type===0)}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=a.Bd(0,b.pre),d=b.Bd(a.post,0),e=this.Mg();for(;;){let g=c.head;var f=d.head;if(!f)break;f.type===2?(g=void 0,f=Tp(d)):g&&(f=Math.min(g.r3,f.Pca),g=Alb(c,f),f=__c.zlb(d,f));if(f.type===2)e.iza(f.state);else if(g)g.type===2?e.iza(Clb(this,
g.state,f)):f.type===0?e.op(g):g.type===0?e.op(f):g.type===1?f.type===1?e.update(this.component.compose(g.delta,f.delta)):Sp(e,Dlb(this,f.oldState,g),f.newState):Sp(e,g.oldState,Clb(this,g.newState,f));else throw Error(`length mismatch: ${a} ; ${b}`);}c.finish();d.finish();return e.build()}transform(a,b){if(!a.ops.length||!b.ops.length)return gp(b,a);const c=this.Mg(),d=this.Mg(),e=a.Bd(b.pre,0),f=b.Bd(a.pre,0),g=fp.As();for(;;){var h=e.head,k=f.head;if(!h&&!k)break;h&&h.type===2?(h=Tp(e),k=void 0):
k&&k.type===2?(h=void 0,k=Tp(f)):h&&k&&(k=Math.min(h.Pca,k.Pca),h=__c.zlb(e,k),k=__c.zlb(f,k));if(h&&h.type===2)d.retain(h.r3),c.op(h);else if(k&&k.type===2)d.op(k),c.retain(k.r3);else if(h&&k)h.type===0||k.type===0?(d.op(k),c.op(h)):h.type===3?(d.retain(h.r3),Sp(c,Clb(this,h.oldState,k),h.newState),Zjb(g,k.type===3?!Vp(this,h.newState,k.newState):!this.component.isIdentity(k.delta))):k.type===3?(Sp(d,Clb(this,k.oldState,h),k.newState),c.retain(k.r3),$jb(g,!this.component.isIdentity(h.delta))):(h=
ip(g,this.component.transform(h.delta,k.delta)),d.update(h.Pu),c.update(h.rv));else throw Error(`length mismatch (${a} x ${b})`);}e.finish();f.finish();return g.build(d.build(),c.build())}Nl(a){if(!a.ops.length)return a;const b=this.Mg();for(const c of a.ops)switch(c.type){case 0:b.retain(c.length);break;case 1:b.update(this.component.Nl(c.delta));break;case 2:a=c.state;a.type===2?b.retain(a.length):b.YY(a.state);break;case 3:a=c.oldState;const d=c.newState;a.type===2&&d.type===2?b.retain(a.length):
Sp(b,d,a);break;default:throw new r(c);}return b.build()}Bk(a,b){if(a===b)return!0;if(a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.Ztc(a.ops[c],b.ops[c]))return!1;return!0}Ztc(a,b){switch(a.type){case 0:return b.type===0&&a.length===b.length;case 1:return b.type===1&&this.component.Bk(a.delta,b.delta);case 2:return b.type===2&&Vp(this,a.state,b.state);case 3:return b.type===3&&Vp(this,a.oldState,b.oldState)&&Vp(this,a.newState,b.newState);default:throw new r(a);}}identity(){return Yob}apply(a,
b){const c=this.Dg(),d=a.Bd(b.pre);for(a=b.Bd(a.length,0);;){b=d.head;var e=a.head;if(!e)break;e.type===2?(b=void 0,e=Tp(a)):b&&(e=Math.min(b.length,e.Pca),b=d.Jo(e),e=__c.zlb(a,e));if(e.type===2)c.region(e.state);else if(b)c.region(Clb(this,b,e));else break}d.finish();a.finish();return c.build()}Yl(a,b){const c=this.Dg(),d=a.Bd(b.post);for(a=b.Bd(0,a.length);;){b=d.head;var e=a.head;if(!b||!e)break;e.type===2?(b=d.Jo(e.r3),e=Tp(a)):(e=Math.min(b.length,e.r3),b=d.Jo(e),e=Alb(a,e));if(e.type===2)__c.Blb(this,
b,e.state);else if(b)c.region(Dlb(this,b,e));else break}d.finish();a.finish();return c.build()}wi(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.Bd();b=b.Bd();let c=a.head,d=b.head;for(;c||d;){if(!c||!d||!Vp(this,c,d))return!1;a.Jo(c.length);b.Jo(d.length);c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof __c.$ob&&this.component.equals(a.component)}constructor(a){super();this.component=a}};__c.$ob.prototype.YD=da(121);__c.Wp=new __c.$ob(__c.Mob);
Xp=__c.Xp={item:a=>{throw new r(a);}};var apb;apb=class{forEach(a,b=this.pre,c=this.post){this.ops.forEach(d=>{switch(d.type){case 0:a.retain&&a.retain(d.ib);break;case 2:a.insert&&a.insert(d.ib);break;case 1:a.delete&&a.delete(d.ib);break;default:throw new r(d);}});(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}static As(){return new Yp}constructor(a,b,c){this.pre=a;this.post=b;this.ops=c}};
Yp=__c.Yp=class{static insert(a,b){return(new Yp).retain(a).insert(b).build()}static delete(a,b){return(new Yp).retain(a).delete(b).build()}retain(a){ja(a>=0);a>0&&(this.H9(0),this.X3a+=a);return this}insert(a){a.length>0&&(this.H9(2),this.Thb+=a);return this}delete(a){a>0&&(this.H9(1),this.jWa+=a);return this}H9(a){if(this.mode!==a){switch(this.mode){case 0:var b=this.ops,c=b.push,d=this.X3a;ja(d>0);c.call(b,{type:0,ib:d});this.pre+=this.X3a;this.post+=this.X3a;this.X3a=0;break;case 2:b=this.ops;
c=b.push;d=this.Thb;ja(d.length>0);c.call(b,{type:2,ib:d});this.post+=this.Thb.length;this.Thb="";break;case 1:b=this.ops;c=b.push;d=this.jWa;ja(d>0);c.call(b,{type:1,ib:d});this.pre+=this.jWa;this.post+=this.jWa;this.jWa=0;break;case void 0:break;default:throw new r(this.mode);}this.mode=a}}build(){this.mode!==0&&this.H9();return new apb(this.pre,this.post,this.ops)}constructor(){this.ops=[];this.post=this.pre=0;this.mode=void 0;this.X3a=0;this.Thb="";this.jWa=0}};__c.bpb=class extends Rq{static F(a){hb(a,{ib:Lp})}get ib(){return this.state.get().ib()}insert(a,b){this.Kr(__c.Elb(this.state.get(),Yp.insert(a,b)))}delete(a,b){this.Kr(__c.Elb(this.state.get(),Yp.delete(a,b)))}k0(a){const b=Flb(this.state.get(),a);this.state.set(__c.Wp.apply(this.state.get(),a));this.subject.next(b)}cV(){return this.state.get()}destroy(a){ja(__c.Wp.wi(this.state.get(),a))}gj(a){return __c.Wp.wi(this.state.get(),a)}constructor(a,b){super();this.domain=a;this.state=(__c.bpb.F(this),
void 0);this.subject=new __c.unb;this.state=new Sq(b)}};__c.bpb.prototype.vP=da(126);var cpb=class extends Ynb{Kn(a){return a}AA(a){return new __c.bpb(this.domain,a)}connect(a,b){return this.Kn(a).connect(b)}jc(a){return this.Kn(a).jc()}destroy(a,b){this.Kn(a).destroy(b)}gj(a,b){return this.Kn(a).gj(b)}constructor(){super();this.domain=__c.Wp}};new cpb;__c.dpb=class extends Oq{get target(){return m(this.T1b)}isIdentity(a){return this.target.isIdentity(a)}compose(a,b){return this.target.compose(a,b)}transform(a,b){return this.target.transform(a,b)}Nl(a){return this.target.Nl(a)}Bk(a,b){return this.target.Bk(a,b)}identity(a){return this.target.identity(a)}apply(a,b){return this.target.apply(a,b)}Yl(a,b){return this.target.Yl(a,b)}wi(a,b){return this.target.wi(a,b)}equals(a){return this===a||a instanceof __c.dpb&&this.target.equals(a.target)}constructor(){super();
this.T1b=void 0}};__c.dpb.prototype.Lka=da(128);__c.rr=class extends Qq{get type(){return m(this.V1b)}AA(a){return this.type.AA(a)}connect(a,b){return this.type.connect(a,b)}jc(a){return this.type.jc(a)}destroy(a,b){this.type.destroy(a,b)}gj(a,b){return this.type.gj(a,b)}constructor(){super(new Wnb(()=>this.type.l$b),new Wnb(()=>this.type.Ota));this.V1b=void 0;this.domain=new __c.dpb}};__c.rr.prototype.Lka=da(127);var epb,kpb,fpb,gpb;epb=Hlb({},{});
__c.jpb=class{Bd(a){return new fpb(this,a)}cursor(a,b){return new gpb(this,a,b)}forEach(a,{grad:b,Lc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.lF,d.DG);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}map(a,{grad:b,Lc:c}){const d=this.items.map(e=>{switch(e.type){case 0:return b(e.lF,e.DG);case 1:return c(e.length);default:throw new r(e);}});(a=Math.max(0,a-this.length))&&d.push(c(a));return d}reduce({grad:a,Lc:b},c){return this.items.reduce((d,
e)=>{switch(e.type){case 0:return a?a(d,e.lF,e.DG):d;case 1:return b?b(d,e.length):d;default:throw new r(e);}},c)}slice(a,b){ja(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.hpb;const d=new __c.ipb;c=this.cursor(b);c.move(a);d.attrs(c.GQ,c.Uja);c.move(b-a,{cells:(e,f,g,h)=>d.attrs(f,h).Lc(e)});return d.build()}toString(){return`${this.items.map(a=>{switch(a.type){case 0:const b=[];for(const [c,d]of Object.entries(a.DG))b.push(`${c}:${d!=
null?`<${d}|`:""}`);return`G{${b.join(",")}}`;case 1:return`R${a.length}`;default:throw new r(a);}}).join("")}`}constructor(a,b,c={}){this.items=a;this.length=b;this.attributes=c;a=a.length?a[a.length-1]:void 0;ja(!a||a.type!==1)}};__c.jpb.prototype.KKb=da(129);__c.hpb=new __c.jpb([],0);
__c.lpb=class{Bd(a,b){return new kpb(this,a,b)}forEach(a){for(const b of this.ops)switch(b.type){case 0:a.retain(b.length,b.changes);break;case 1:a.insert(b.length,b.changes);break;default:throw new r(b);}}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length,b.changes);case 1:return a.insert(b.length,b.changes);default:throw new r(b);}})}equals(a){if(this===a)return!0;if(this.pre!==a.pre||this.post!==a.post||this.ops.length!==a.ops.length)return!1;for(let b=0;b<this.ops.length;b++){const c=
this.ops[b],d=a.ops[b];if(c!==d)switch(c.type){case 0:case 1:if(c.type!==d.type||c.length!==d.length||!Llb(c.changes,d.changes))return!1;break;default:throw new r(c);}}return!0}toString(){return`[${this.ops.map(a=>{let b;switch(a.type){case 0:b="R";break;case 1:b="I";break;default:throw new r(a);}const c=[];__c.Klb(a.changes,({r:e},f)=>{e?c.push(`+"${f.toString()}":${e.so!=null?`"${e.so}"`:"null"}=>${e.sn!=null?`"${e.sn}"`:"null"}`):c.push(`-"${f.toString()}"`)});const d=c.length?`{${c.join(",")}}`:
"";return`${b}${a.length}${d}`}).toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};__c.mpb=new __c.lpb([],0,0);
kpb=class{get vO(){return this.Dwb}get next(){return this._next}wt(a,b){const c=m(this._next);ka(c.type===a,"{} != {}",c.type,a);ja(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);for(const [d,e]of Object.entries(c.changes)){const f=e&&e.r;f?this.Dwb[d]=f:delete this.Dwb[d]}b<c.length?this._next={type:a,length:c.length-b,changes:{}}:(this._next=this.i<this.input.length?this.input[this.i++]:void 0,!this._next&&this.v5a&&(this._next=Mlb(this.v5a,Wo(this.Dwb,()=>({r:void 0}))),this.v5a=0));return c.changes}yA(a){return this.wt(0,
a)}uga(a){return this.wt(1,a)}finish(){ka(!this._next)}constructor(a,b=0,c=0){this.i=0;this.Dwb={};this.input=a.ops;this._next=this.i<this.input.length?this.input[this.i++]:void 0;this.v5a=Math.max(0,b-a.pre,c-a.post);!this._next&&this.v5a&&(this._next=Mlb(this.v5a),this.v5a=0)}};
fpb=class{get head(){return this.Mm}get GQ(){return this.gJ}get Uja(){return this.S1b}Jo(a){var b=this.Mm;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Mm=a<b?Ilb(b-a):this.input[this.i++];return a}apply(a){__c.$p(a.lF,a.DG,(b,c,d)=>{c!=null&&d!=null?(this.gJ[b]=c,this.S1b[b]=d):(delete this.gJ[b],delete this.S1b[b])})}Bw(){const a=this.Mm;if(!a||a.type===1)return epb;this.Mm=this.input[this.i++];this.apply(a);return a}finish(){ka(!this.Mm)}constructor(a,
b=0){this.i=0;this.gJ={};this.S1b={};b=Math.max(0,b-a.length);this.length=a.length+b;this.input=b?[...a.items,Ilb(b)]:a.items;this.Mm=this.input.length?this.input[this.i++]:void 0}};
gpb=class{get gC(){return this.Bd.length-this.Gfa}get GQ(){return this.Bd.GQ}get Uja(){return this.Bd.Uja}move(a,b){var c=this.Ljb;b=c?b?{cells:__c.Rp(c.cells,b.cells)}:c:b;ja(a>=0,"{} < 0",a);a=this.Gfa+a;for(ja(a<=this.Bd.length,"{} > {}",a,this.Bd.length);this.Gfa<a;){c=this.Bd.Bw();const d=this.Bd.Jo(a-this.Gfa);this.Gfa+=d;b&&b.cells&&b.cells(d,c.lF,this.GQ,c.DG,this.Uja)}}finish(){this.Bd.Bw();this.Bd.finish()}constructor(a,b,c){this.Ljb=c;this.Gfa=0;this.Bd=new fpb(a,b)}};
__c.ipb=class{ym(a,b,c){this.ss[a]!==c?(this.lF[a]=b,this.DG[a]=c):(delete this.lF[a],delete this.DG[a]);return this}attrs(a,b){__c.$p(a,b,(c,d,e)=>this.ym(c,d,e));return this}Lc(a){a>0&&(Object.keys(this.lF).length&&(this.length&&(this.items.push(Ilb(this.length)),this.length=0),this.items.push(Hlb(this.lF,this.DG)),__c.$p(this.lF,this.DG,(b,c,d)=>{if(c!=null){this.as[b]=c;this.ss[b]=d;var e;((e=this.attributes[b])!==null&&e!==void 0?e:this.attributes[b]=new Set).add(c)}else delete this.as[b],delete this.ss[b]}),
this.lF={},this.DG={}),this.length+=a,this.T4+=a);return this}append(a,b=0){a.forEach(b,{grad:(c,d)=>this.attrs(c,d),Lc:c=>this.Lc(c)});return this}build(){for(const a of __c.Zp(this.as))this.ym(a);for(const a of __c.Zp(this.lF))this.ym(a);Object.keys(this.lF).length?(ka(!!this.length,"attributes still open: {}",this.lF),this.items.push(Ilb(this.length)),this.items.push(Hlb(this.lF,this.DG)),this.length=0,this.lF={},this.DG={}):this.T4-=this.length;return new __c.jpb(this.items,this.T4,this.attributes)}constructor(){this.items=
[];this.attributes={};this.as={};this.ss={};this.length=this.T4=0;this.lF={};this.DG={}}};var bq,npb,opb,ppb,Qlb,rpb,qpb,tpb,upb,vpb,spb;bq=class{static from(a){if(a instanceof bq)return a;if(Array.isArray(a)){const [b,c]=a;return new bq(b,c)}return new bq(a.from,a.to)}toString(){return`[${this.from},${this.to}]`}constructor(a,b){this.from=a;this.to=b}};
npb=class{get isEmpty(){return!this.Ye.size}slice(a,b){ja(0<=a&&a<=b,"invalid range: [{}, {})",a,b);const c=new Map;for(const [e,f]of this.Ye){var d=b<f.from||f.to<a?void 0:new bq(Math.max(f.from,a)-a,Math.min(f.to,b)-a);d&&c.set(e,d)}return new npb(c)}toString(){return[...this.Ye].map(([a,b])=>`"${a}":${b}`).join(",")}constructor(a=new Map){this.Ye=a}};opb=new npb;
ppb=class{range(a,b){b?this.B$.set(a,bq.from(b)):this.B$.delete(a);return this}Ye(a){a.forEach((b,c)=>this.B$.set(c,bq.from(b)));return this}build(){return this.B$.size?new npb(this.B$):opb}constructor(){this.B$=new Map}};Qlb=class{toString(){return`${this.Qca||"_"}->${this.Kca||"_"}`}constructor(a,b){this.Qca=a;this.Kca=b}};rpb=class{toString(){return`${qpb[this.type]}${this.length}`}constructor(a,b){this.type=a;this.length=b}};qpb={[0]:"R",[1]:"I"};
tpb=class{Bd(a,b){return new spb(this,a,b)}toString(){const a=this.jga.join(""),b=[...this.Ye].map(([c,d])=>`"${c}":${d}`).join(",");return`{${a}|${b}}`}constructor(a,b,c,d){this.jga=a;this.Ye=b;this.pre=c;this.post=d}};upb=new tpb([],new Map,0,0);
vpb=class{append(a,b){ja(b>=0,"{} < 0",b);if(!b)return this;this.F3===a?this.length+=b:(this.F3!=null&&this.ops.push(new rpb(this.F3,this.length)),this.F3=a,this.length=b);switch(a){case 0:this.pre+=b;this.post+=b;break;case 1:this.post+=b;break;default:throw new r(a);}return this}retain(a){return this.append(0,a)}insert(a){return this.append(1,a)}createRange(a,b){return this.L3a(a,void 0,b)}L3a(a,b,c){b=new Qlb(b&&bq.from(b),c&&bq.from(c));this.Ye.set(a,b);return this}lPa(a){a.forEach((b,c)=>this.Ye.set(c,
b));return this}build(){const a=this.F3,b=this.length;a===0?(this.pre-=b,this.post-=b):a!=null&&this.ops.push(new rpb(a,b));return this.ops.length||this.Ye.size?new tpb(this.ops,this.Ye,this.pre,this.post):upb}constructor(){this.ops=[];this.F3=void 0;this.post=this.pre=this.length=0;this.Ye=new Map}};
spb=class{get next(){return this._next}get bwc(){return this.Cwb}get nPb(){return this.yTa}get oLa(){return this.yTa-this.Cwb}wt(a,b){const c=m(this._next);ka(c.type===a,"{} != {}",c.type,a);ja(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);this._next=b<c.length?new rpb(a,c.length-b):this.i<this.input.length?this.input[this.i++]:void 0}yA(a){this.wt(0,a);this.Cwb+=a;this.yTa+=a}uga(a){this.wt(1,a);this.yTa+=a}finish(){ka(!this._next)}constructor(a,b=0,c=0){this.yTa=this.Cwb=this.i=0;this.input=
(b=Math.max(0,b-a.pre,c-a.post))?[...a.jga,new rpb(0,b)]:a.jga;this._next=this.i<this.input.length?this.input[this.i++]:void 0}};
__c.wpb=class extends Oq{Dg(){return new ppb}Mg(){return new vpb}isIdentity(a){return!a.jga.length&&!a.Ye.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=new Map,d=new Map,e=new Map;for(var f of Rlb(a.Ye,b.Ye)){var g=a.Ye.get(f),h=b.Ye.get(f);g&&h?(ja(aq(g.Kca,h.Qca)),e.set(f,new Qlb(g.Qca,h.Kca))):g?c.set(f,g):h&&d.set(f,h)}f=this.Mg();g=a.Bd(0,b.pre);a=b.Bd(a.post,0);b=g.next;for(h=a.next;h;){if(h.type===1)b=h.length,cq(c,void 0,g.nPb+a.oLa,b),a.uga(b),f.insert(b);
else if(b)b.type===1?(b=Math.min(b.length,h.length),cq(d,a.bwc-g.oLa,void 0,-b),g.uga(b),a.yA(b),f.insert(b)):(b=Math.min(b.length,h.length),g.yA(b),a.yA(b),f.retain(b));else throw Error("length mismatch");b=g.next;h=a.next}g.finish();a.finish();f.lPa(e);f.lPa(c);f.lPa(d);return f.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return gp(b,a);var c=new Map,d=new Map;const e=new Map,f=fp.As();for(var g of Rlb(a.Ye,b.Ye)){var h=a.Ye.get(g),k=b.Ye.get(g);h&&k?(ja(aq(h.Qca,k.Qca)),e.set(g,
new Qlb(k.Kca,h.Kca)),Zjb(f)):h?c.set(g,h):k&&d.set(g,k)}h=a.Bd(b.pre,0);k=b.Bd(a.pre,0);g=this.Mg();const l=this.Mg();var n=h.next;let p=k.next;for(;n||p;){if(n&&n.type===1)n=n.length,cq(d,k.bwc+h.oLa,k.nPb+h.oLa,n),h.uga(n),l.retain(n),g.insert(n);else if(p&&p.type===1)n=p.length,cq(c,h.bwc+k.oLa,h.nPb+k.oLa,n),cq(e,void 0,h.nPb+k.oLa,n),k.uga(n),l.insert(n),g.retain(n);else if(n&&p)n=Math.min(n.length,p.length),h.yA(n),k.yA(n),l.retain(n),g.retain(n);else throw Error(`unreachable case: ${n} x ${p}`);
n=h.next;p=k.next}h.finish();k.finish();d=l.lPa(d).build();c=g.lPa(c).lPa(e).build();dp(d.post-d.pre,b.post-b.pre);dp(c.post-c.pre,a.post-a.pre);return f.build(d,c)}Nl(a){if(!a.Ye.size)return upb;const b=new Map(a.Ye);Nlb(a,{insert:(c,d,e)=>cq(b,e,void 0,c)});a=ah(b,c=>new Qlb(c.Kca,c.Qca));return new tpb([],a,0,0)}Bk(a,b){if(a===b)return!0;if(a.jga.length!==b.jga.length||a.Ye.size!==b.Ye.size)return!1;for(let e=0;e<a.jga.length;e++){var c=a.jga[e],d=b.jga[e];if(c.type!==d.type||c.length!==d.length)return!1}for(const e of a.Ye.keys())if(c=
a.Ye.get(e),d=b.Ye.get(e),c?!(d&&aq(c.Qca,d.Qca)&&aq(c.Kca,d.Kca)):d)return!1;return!0}id(){return upb}identity(){return upb}apply(a,b){if(this.isIdentity(b)||!a.Ye.size&&!b.Ye.size)return a;const c=this.Dg(),d=new Map(a.Ye);for(const [e,f]of b.Ye)ja(aq(a.Ye.get(e),f.Qca)),d.delete(e),c.range(e,f.Kca);Nlb(b,{insert:(e,f,g)=>Plb(d,g,e)});return c.Ye(d).build()}Yl(a,b){if(this.isIdentity(b)||!a.Ye.size&&!b.Ye.size)return a;const c=this.Dg(),d=new Map(a.Ye);for(const [e,f]of b.Ye)ja(aq(a.Ye.get(e),f.Kca)),
d.delete(e),c.range(e,f.Qca);Nlb(b,{insert:(e,f)=>Plb(d,f,-e)});return c.Ye(d).build()}wi(a,b){const c=a.Ye,d=b.Ye;return a===b||c===d?!0:c.size===d.size&&[...c.keys()].every(e=>aq(c.get(e),d.get(e)))}equals(a){return this===a||a instanceof __c.wpb}constructor(){super();this.HP=opb}};__c.wpb.prototype.YD=da(120);__c.xpb=new __c.wpb;var ypb=class extends Oq{isIdentity(a){return this.components[a.key].isIdentity(a.value)}compose(a,b){const c=Slb(a.key,b.key);return{key:c,value:this.components[c].compose(a.value,b.value)}}transform(a,b){const c=Slb(a.key,b.key);a=this.components[c].transform(a.value,b.value);return Yjb(a,d=>({key:c,value:d}))}Nl(a){return{key:a.key,value:this.components[a.key].Nl(a.value)}}Bk(a,b){return a.key===b.key&&this.components[a.key].Bk(a.value,b.value)}identity(a){return{key:a.key,value:this.components[a.key].identity(a.value)}}apply(a,
b){const c=Slb(a.key,b.key);return{key:c,value:this.components[c].apply(a.value,b.value)}}Yl(a,b){const c=Slb(a.key,b.key);return{key:c,value:this.components[c].Yl(a.value,b.value)}}wi(a,b){return a===b?!0:a.key===b.key&&this.components[a.key].wi(a.value,b.value)}equals(a){if(this===a)return!0;const b=this.components,c=a.components;a=Object.keys(b);const d=Object.keys(c);return a.length===d.length&&a.every(e=>e in c&&b[e].equals(c[e]))}constructor(a){super();this.components=a}};var zpb=class extends Oq{isIdentity(a){return this.sum.isIdentity(a)}compose(a,b){return this.sum.compose(a,b)}transform(a,b){return this.sum.transform(a,b)}Nl(a){return this.sum.Nl(a)}Bk(a,b){return this.sum.Bk(a,b)}identity(a){return this.sum.identity(Tlb(this,a))}apply(a,b){return this.sum.apply(Tlb(this,a),b).value}Yl(a,b){return this.sum.Yl(Tlb(this,a),b).value}wi(a,b){return a===b||this.sum.wi(Tlb(this,a),Tlb(this,b))}equals(a){return this===a||a instanceof zpb&&this.sum.equals(a.sum)}constructor(a,
b){super();this.components=a;this.CWa=b;this.sum=new ypb(this.components)}};var Ulb=class extends Qq{create(a,b,c){return super.create(a,b,c)}AA(a){const b=this.CWa(a);return this.aN[b].AA(a)}connect(a,b){const c=this.GBb(a),d=this.aN[c].connect(a,{next:e=>{b.next({key:c,value:e})},error:e=>b.error(e)});return{next:e=>{ja(e.key===c);d.next(e.value)},complete:()=>d.complete()}}jc(a){const b=this.GBb(a);return this.aN[b].jc(a)}destroy(a,b){const c=this.GBb(a),d=this.CWa(b);ja(c===d);this.aN[c].destroy(a,b)}gj(a,b){const c=this.GBb(a),d=this.CWa(b);return c===d&&this.aN[c].gj(a,
b)}constructor(a,b,c){super(Pq,Pq);this.aN=a;this.CWa=b;this.GBb=c;this.domain=new zpb(Wo(this.aN,d=>d.domain),this.CWa)}};var Apb=class extends Oq{isIdentity(){return!0}compose(){return 1}transform(){return gp(1,1)}Nl(){return 1}Bk(){return!0}identity(){return 1}apply(){return 1}Yl(){return 1}wi(){return!0}equals(a){return this===a||a instanceof Apb}constructor(){super();this.unit=1}},Bpb=new Apb;var Cpb;Cpb=class extends Qq{AA(a){return a}connect(){return{next:()=>{},complete:()=>{}}}jc(a){return a}destroy(){}gj(){return!0}constructor(){super(sp,sp);this.domain=Bpb}};__c.Dpb=new Cpb;var Epb=new Map,Fpb=class extends Oq{isIdentity(a){return!a.size||Array.from(a.values()).every(b=>b===0)}compose(a,b){return Wlb(a,b)}transform(a,b){return gp(b,a)}Nl(a){return a.size?ah(a,b=>-b):a}Bk(a,b){return Vlb(a,b)}identity(){return Epb}apply(a,b){return Wlb(a,b)}Yl(a,b){return Wlb(a,this.Nl(b))}wi(a,b){return Vlb(a,b)}equals(a){return this===a||a instanceof Fpb}};var Gpb,Hpb;
Gpb=class extends Rq{static F(a){hb(a,{values:Lp.struct})}k0(a){for(const [b,c]of a)(a=(this.map.get(b)||0)+c)?this.map.set(b,a):this.map.delete(b)}cV(){return new Map(this.map)}gj(a){const b=this.map,c=new Map;for(const [d,e]of b){const f=a.get(d)||0;e!==f&&c.set(d,f-e)}for(const [d,e]of a)!b.has(d)&&e&&c.set(d,e);this.Kr(c);return!0}add(a){const b=this.map.get(a)||0;b>0||this.Kr(new Map([[a,-b+1]]))}delete(a){const b=this.map.get(a)||0;b&&this.Kr(new Map([[a,-b]]))}has(a){return(this.map.get(a)||0)>
0}get values(){return[...Xlb(this.map,a=>a>0).keys()]}[Symbol.iterator](){return this.values[Symbol.iterator]()}constructor(a,b){super();this.domain=a;this.map=(Gpb.F(this),void 0);this.map=new snb(b)}};Hpb=class extends Qq{AA(a){return new Gpb(this.domain,a)}connect(a,b){return a.connect(b)}jc(a){return a.jc()}destroy(a,b){ja(this.domain.wi(a.jc(),b))}gj(a,b){return a.gj(b)}constructor(){super(Pq,Pq);this.domain=new Fpb}};__c.Ipb=new Hpb;var Jpb,Mpb,Npb,Qpb,sr,Zpb,hqb,iqb,kqb,mqb,nqb;Jpb=Ap({id:Uq,version:Vq});__c.Kpb=Np({values:{app:Jpb},attributes:{Rma:Gp(__c.Ukb(Uq,Uq))}});__c.Lpb=Dp(-1,1);Mpb=Dp(0,100);Npb=Dp(-100,100);__c.Opb=Dp(0,1);__c.Ppb=Dp(-180,180);Qpb=Gp(Mpb);sr=Gp(Npb);__c.Rpb=Gp(__c.Opb);__c.Spb=Gp(__c.Ppb);tr=__c.tr=Cp(__c.Anb);__c.Tpb=Fp(tr);__c.Upb=Gp(__c.Tpb);__c.Vpb=Cp(/^100%$/);__c.Wpb=Cp(/^[0-9]+(\.[0-9]+)?%$/);__c.Xpb=Cp(/^[0-9]+(\.[0-9]+)?px/);__c.Ypb=__c.Jp(Kp(Uq));__c.Jp(__c.Dpb);Zpb=Ykb(0,10);
__c.$pb=zp(Zpb,a=>a.length<=10);__c.aqb=Gp(__c.$pb);__c.bqb=Cp(Ylb("L"));__c.cqb=Cp(Ylb("T"));__c.dqb=Gp(yp(1,2,3));__c.eqb=Ap({text:Uq,Aaa:Tq});__c.fqb=yp(1,2);__c.gqb=Ap({top:Xq,left:Xq});hqb=Ap({width:Yq,height:Yq});iqb=Ap({top:Xq,left:Xq,height:Yq,width:Yq});__c.jqb=Gp(iqb);kqb=Ap({hf:zp(Vq)});__c.lqb=Gp(kqb);mqb=Ap({text:Uq,user:Uq,brand:Uq});nqb=Ap({text:Uq,url:Uq});var oqb,pqb,qqb,rqb,sqb,tqb,uqb,vqb;oqb=Ap({type:yp("google-sheets"),url:Uq,z3a:Fp(Wq),YG:Uq,range:__c.Zq});pqb={lQb:Cp(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*|[A-Z]+[1-9]\d*:[A-Z]+[1-9]\d*)$/)};qqb=Ap(pqb);rqb=Ap({type:yp("copy-sheets"),z3a:Fp(Wq),dg:Uq,t9:Uq,Ye:zp(qqb)});sqb=Ap({...pqb});tqb=Ap({type:yp("live-sheets"),z3a:Fp(Wq),t9:Uq,Ye:zp(sqb)});uqb=Ap({app:Jpb,source:Uq,title:__c.Zq});vqb=Ap({type:yp("app"),nZd:uqb,z3a:Fp(Wq)});
__c.wqb=__c.Bp({"google-sheets":oqb,"copy-sheets":rqb,"live-sheets":tqb,app:vqb},a=>a.type);var xqb,yqb,ur,zqb,Aqb,Bqb,Cqb,Dqb,Eqb,Fqb,Gqb,Hqb,Iqb,Jqb,Kqb,Lqb;xqb=Np({attributes:{ykc:Gp(yp(1,2,3,4)),value:Gp(Xq)}});yqb=__c.Jp(Vq,xqb);ur=Np({attributes:{c5a:__c.dr,Vi:__c.dr},Ub:{D4:yqb}});zqb=ur.Di({values:{type:yp("brightness")}});Aqb=ur.Di({values:{type:yp("contrast")}});Bqb=ur.Di({values:{type:yp("highlights")}});Cqb=ur.Di({values:{type:yp("shadows")}});Dqb=ur.Di({values:{type:yp("whites")}});Eqb=ur.Di({values:{type:yp("blacks")}});Fqb=ur.Di({values:{type:yp("saturation")}});Gqb=ur.Di({values:{type:yp("vibrance")}});
Hqb=ur.Di({values:{type:yp("temperature")}});Iqb=ur.Di({values:{type:yp("tint")}});Jqb=Ap({id:Uq});Kqb=ur.Di({values:{type:yp("lut"),B0a:Jqb}});Lqb=dq({brightness:zqb,contrast:Aqb,highlights:Bqb,shadows:Cqb,whites:Dqb,blacks:Eqb,saturation:Fqb,vibrance:Gqb,temperature:Hqb,tint:Iqb,lut:Kqb},a=>a.type,a=>a.type);__c.Mqb=Pp(Lqb);var Nqb,Oqb,Qqb,Sqb,Tqb,Vqb,Wqb,Xqb,Yqb,Zqb,$qb,arb;Nqb=Ap({top:Xq,left:Xq,width:Yq,height:Yq,rotation:__c.Ppb});Oqb=Ap({id:Uq,rg:Xq});__c.Pqb=Np({attributes:{uda:Ip(Oqb),brightness:sr,contrast:sr,saturation:sr,Z_:sr,S5a:Qpb,blur:sr,Jla:sr,qEa:sr,Hna:Qpb,Eua:Qpb,highlights:sr,p9:sr,s0:Qpb,Wxa:Qpb}});Qqb=Hp(Fp(__c.Pqb));__c.Rqb=Np({values:{media:Jpb},Ub:{filter:Qqb},attributes:{nF:Ip(Jpb),Ef:Ip(Nqb),tb:__c.Rpb,zg:Gp(__c.Ukb(tr,tr)),altText:Ip(__c.eqb)}});Sqb=Hp(Fp(__c.Rqb));Tqb=Ap({ad:Yq,Iw:Yq});
__c.Uqb=Np({values:{video:Uq,id:__c.Zq},Ub:{filter:Qqb,Fu:__c.Mqb},attributes:{Ef:Gp(Nqb),tb:__c.Rpb,zg:Gp(__c.Ukb(tr,tr)),altText:Ip(__c.eqb),trim:Ip(Tqb),Csa:Gp(__c.fqb),autoplay:br,playbackRate:Ip(Dp(.25,4)),volume:Gp(Dp(0,4))}});Vqb=Hp(Fp(__c.Uqb));Wqb=Ap({color:tr,tb:__c.Opb,position:Xq},a=>a.position>=-1&&a.position<=2);Xqb=zp(Wqb,a=>a.length>=2&&a.every((b,c,d)=>c===0||d[c-1].position<=b.position));Yqb=Gp(Xqb);Zqb=Np({values:{type:yp("linear")},attributes:{ds:Yqb,rotation:__c.Spb}});
$qb=Np({values:{type:yp("radial")},attributes:{ds:Yqb,center:Gp(__c.gqb)}});__c.vr=dq({linear:Zqb,radial:$qb},a=>a.type,a=>a.type);arb=Hp(Fp(__c.vr));__c.wr=Np({Ub:{image:Sqb,video:Vqb,gradient:arb},attributes:{dropTarget:__c.sob,color:__c.Upb,tb:__c.Rpb,locked:br,ZB:br,fN:__c.gr,Kp:__c.gr,flipX:br,flipY:br}});__c.xr=Np({Ub:{fill:__c.wr},attributes:{weight:__c.er,color:__c.Upb,gp:__c.aqb,Zt:br}});__c.brb=class{encode(a){return String(a)}decode(a){switch(typeof this.defaultValue){case "string":return a;case "number":return Number(a);case "boolean":return a!=="false";default:throw Error();}}validate(a){ja(this.isValid(a),"invalid value: {}",a)}normalize(a){this.validate(a);return this.d2c(a)}d2c(a){return a}constructor(a,b,c){this.scope=a;this.defaultValue=b;this.Ldd=c}};__c.gq=Object.keys({pw:0})[0];
__c.jmb=class{getScope(a){return this.attributes[a].scope}Iqa(a){if(typeof a==="function")return a;switch(a){case "all":return()=>!0;case "block":return this.Qze;case "inline":return this.AAe;default:throw new r(a);}}copy(a,b,c){__c.hq(this,b,a,(d,e)=>c[e]=d)}pR(a){for(const [b,c]of Object.entries(a))ja(this.SA(b)),c!=null&&this.attributes[b].validate(c)}validate(a,b){a=m(this.attributes[a]);b!=null&&a.validate(b)}normalize(a,b){a=m(this.attributes[a]);return b!=null?a.normalize(b):void 0}encode(a,
b){return __c.fq(this.attributes[a],b)}decode(a,b){return __c.eq(this.attributes[a],b)}constructor(a,b,c,d){this.attributes=a;this.DQa=b;this.PWa=c;this.Y6e=d;this.Ci=Wo(this.attributes,e=>e.defaultValue);this.eBb={as:this.Ci,ss:Wo(this.Ci,(e,f)=>e!=null?this.encode(f,e):void 0)};this.SA=e=>e in this.attributes;this.Qze=e=>this.getScope(e)==="block";this.AAe=e=>this.getScope(e)==="inline";this.xIb=e=>{e=$lb(e);return!(!e||!this.PWa.has(e))};this.OLa=e=>typeof e!=="string"?!1:__c.bmb(this,e)!=null;
this.Mdd=e=>{const f=this.Y6e;return typeof e==="string"&&f.has(e)};this.hEa=(e,f,g)=>f===g?!0:f!=null&&g!=null?this.attributes[e].hEa(f,g):f==null&&g==null}};__c.jmb.prototype.V2=da(130);
var emb=class extends __c.brb{eUa(){return new emb(this.scope,this,!0)}isValid(a){return Number.isInteger(a)&&this.min<=a&&a<=this.max}hEa(a,b){return a===b}encode(a){return`${a.toFixed(1)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=-2147483648,max:c=2147483647,defaultValue:d=0,units:e=""}={},f=!1){super(a,d,f);ja(Number.isInteger(b)&&b>=-2147483648);ja(Number.isInteger(c)&&c<=2147483647);ja(Number.isInteger(d));
ja(b<=d&&d<=c);this.min=b;this.max=c;this.units=e;__c.Zlb(this)}},gmb=class extends __c.brb{eUa(){return new gmb(this.scope,this,!0)}isValid(a){return Number.isFinite(a)&&this.min<=a&&a<=this.max}d2c(a){return a===0?a:Number(a.toPrecision(this.hzd))}hEa(a,b){return a===b}encode(a){return`${this.uza==="fixed"&&Number.isInteger(a)?a.toFixed(1):String(a)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=
-Number.MAX_VALUE,max:c=Number.MAX_VALUE,hzd:d=6,uza:e="integer",defaultValue:f=0,units:g=""}={},h=!1){super(a,f,h);ja(Number.isFinite(b)&&b>=-Number.MAX_VALUE);ja(Number.isFinite(c)&&c<=Number.MAX_VALUE);ja(Number.isInteger(d)&&1<=d&&d<=15);this.min=b;this.max=c;this.units=g;this.hzd=d;this.uza=e;__c.Zlb(this)}},hmb=class extends __c.brb{isValid(a){return this.dCa.test(a)}eUa(){return new hmb(this.scope,this.dCa,this.defaultValue,!0)}hEa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.dCa=
b;__c.Zlb(this)}},imb=class extends __c.brb{isValid(a){return this.aGd.has(a)}eUa(){return new imb(this.scope,this.aGd,this.defaultValue,!0)}hEa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.aGd=new Set(b);__c.Zlb(this)}};var grb,hrb,irb;__c.crb="normal thin extralight light medium semibold bold ultrabold heavy".split(" ");__c.drb=/^Y[A-Za-z0-9_-]{10},\d+$/;__c.erb=["normal","italic"];__c.frb=["none","underline"];grb=["start","center","end","justify"];
yr=__c.yr={fontFamily:lq("inline",__c.drb,"YACgEZ1cb1Q,0"),fontSize:kq("inline",{min:0,defaultValue:16,units:"px"}),fontWeight:mq("inline",__c.crb),fontStyle:mq("inline",__c.erb),yN:lq("inline",__c.Dnb,"1"),verticalAlign:lq("inline",__c.Fnb,"0%"),color:lq("inline",__c.Anb,"#000000"),backgroundColor:lq("inline",Bnb,"transparent"),P5:kq("inline",{min:0,max:.2,units:"em"}),O5:kq("inline",{min:0,max:.16,units:"em"}),xn:mq("inline",__c.frb),By:mq("inline",["none","strikethrough"]),link:lq("inline",__c.znb,
""),letterSpacing:kq("inline",{min:-.2,max:.8,units:"em"}),lineHeight:kq("block",{min:.5,max:2.5,defaultValue:1.4}),direction:mq("block",["ltr","rtl"]),textAlign:mq("block",grb),Vz:mq("block","none disc circle square decimal lower-alpha lower-roman checked unchecked".split(" ")),xI:__c.fmb({min:0}),marginInlineStart:__c.fmb({min:0,max:200,units:"px"}),textIndent:__c.fmb({min:0,max:32,units:"px"}),z6a:lq("inline",/^$/,""),A6a:lq("inline",/^$/,""),mtb:lq("inline",/^$/,"")};
hrb={Ip:lq("inline",/^(K[a-zA-Z0-9_-]{10}|)$/,"")};irb={...Wo(yr,a=>a.eUa()),oC:mq("inline",["add","delete"]).eUa()};__c.zr=__c.kmb({static:yr,OWa:hrb,pw:irb});__c.jrb=`${Object.keys({Ip:0})[0]}/`;__c.krb=Object.keys({oC:0})[0];var nrb=class{H9(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(nq(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(lmb(this.acc));this.post+=this.acc;this.acc=0;break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ja(b>=0,"{} < 0",b);b&&(this.H9(a),this.acc+=b);return this}retain(a){return this.accumulate(0,a)}expand(a){return this.accumulate(1,a)}append(a){switch(a.type){case 0:return this.accumulate(0,a.length);
case 1:return this.accumulate(1,a.length);default:throw new r(a);}}build(){this.mode!==0&&this.H9();return this.ops?new lrb(this.ops,this.pre,this.post):mrb}constructor(){this.ops=[];this.acc=this.post=this.pre=0;this.mode=void 0}},orb=class{static create(a,b,c,d=0,e=0){ja(d>=0,"{} < 0",d);ja(e>=0,"{} < 0",e);b=Math.max(0,d-b,e-c);return new orb(b?[...a,nq(b)]:a)}get head(){return this.Mm}yA(a){return this.WD(0,a).length}WD(a,b=1){const c=m(this.Mm);if(c.type!==a)throw Error();const d=c.length;ja(0<
b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Mm=nq(d-b),nq(b);case 1:return this.Mm=lmb(d-b),lmb(b);default:throw new r(a);}else return this.Mm=this.ops[this.i++],c}finish(){ka(this.Mm==null)}constructor(a){this.ops=a;this.i=0;this.Mm=a[this.i++]}},lrb=class{isEmpty(){return this.pre===0&&this.post===0&&this.ops.length===0}Bd(a,b){return orb.create(this.ops,this.pre,this.post,a,b)}toString(){return this.ops.map(a=>{switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;
default:throw new r(a);}}).join("")}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}},mrb=new lrb([],0,0),prb=class extends Oq{Mg(){return new nrb}isIdentity(a){return a.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.Mg(),d=a.Bd(0,b.pre),e=b.Bd(a.post,0);let f=d.head,g=e.head;for(;f||g;){if(g)if(g.type===1)c.append(e.WD(g.type,g.length));else if(f)if(f.type===1){var h=Math.min(f.length,g.length);d.WD(f.type,h);e.WD(g.type,h);c.append(lmb(h))}else h=
Math.min(f.length,g.length),d.WD(f.type,h),e.WD(g.type,h),c.append(nq(h));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);f=d.head;g=e.head}d.finish();e.finish();return c.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return gp(b,a);const c=a.Bd(b.pre,0),d=b.Bd(a.pre,0),e=this.Mg(),f=this.Mg();for(var g=c.head,h=d.head;g||h;){if(g&&g.type===1)h=c.WD(g.type,g.length),f.append(nq(h.length)),e.append(h);else if(h&&h.type===1){var k=
d.WD(h.type,h.length);f.append(k);e.append(nq(h.length))}else if(g&&h)k=Math.min(g.length,h.length),g=c.WD(g.type,k),h=d.WD(h.type,k),f.append(h),e.append(g);else throw Error(`length mismatch (${a} x ${b})`);g=c.head;h=d.head}c.finish();d.finish();return gp(f.build(),e.build())}Nl(){return mrb}Bk(a,b){if(a===b)return!0;if(!a||!b||a.pre!==b.pre||a.post!==b.post)return!1;a=a.Bd();b=b.Bd();let c=a.head,d=b.head;for(;c||d;){if(!c||!d)return!1;switch(c.type){case 0:if(d.type!==0||c.length!==d.length)return!1;
a.yA(c.length);b.yA(d.length);break;case 1:if(d.type!==1||c.length!==d.length)return!1;oq(a,c.length);oq(b,d.length);break;default:throw new r(c);}c=a.head;d=b.head}return!0}identity(){return mrb}apply(a){return a}Yl(a){return a}wi(a,b){return a===b}equals(a){return this===a||a instanceof prb}},mmb=new Map,uq=new prb;var rrb,trb,srb,qrb,vrb,pmb,wrb,xrb;
rrb=class extends Oq{Dg(){return new pmb(this.zC)}HP(){return qrb}He(a={}){return{x:a.x||uq.Mg().build(),y:a.y||uq.Mg().build(),attrs:a.attrs||qq(this).build()}}isIdentity(a){return uq.isIdentity(a.x)&&uq.isIdentity(a.y)&&a.attrs.items.isEmpty()}compose(a,b){const c=uq.compose(a.x,b.x),d=uq.compose(a.y,b.y);a=tmb(this,a.attrs,b.x,b.y);if(b.attrs.items.isEmpty())return this.He({x:c,y:d,attrs:a});const e=qq(this);rmb(a,b.attrs,e,(f,g,h)=>{g?h?(ka(this.zC(f,g.n,h.o)),f={o:g.o,n:h.n}):f=g:f=h;return f});
return{x:c,y:d,attrs:e.build()}}jJa(a,b,c,d){return uq.isIdentity(c)&&uq.isIdentity(d)||b.items.isEmpty()?b:smb(a,this.zC,b,c,d)}transform(a,b){const c=fp.As(),{Pu:d,rv:e}=ip(c,uq.transform(a.x,b.x)),{Pu:f,rv:g}=ip(c,uq.transform(a.y,b.y));a=tmb(this,a.attrs,d,f);b=tmb(this,b.attrs,e,g);if(a.items.isEmpty()||b.items.isEmpty()){var h=this.He({x:d,y:f,attrs:b});a=this.He({x:e,y:g,attrs:a});return c.build(h,a)}var k=Math.max(a.Wq,b.Wq),l=Math.max(a.pB,b.pB);a=a.Bd(void 0,k,l);k=b.Bd(void 0,k,l);b=qq(this);
l=qq(this);for(var n=a.head,p=k.head;n||p;){if(n&&n.type===0||p&&p.type===0){n=a.oy();p=k.oy();const x=b.oy(),z=l.oy();for(var q=n.head,u=p.head;q||u;){if(q&&q.type===0||u&&u.type===0){q=n.Bw();u=p.Bw();for(h of qmb(q,u)){q=h;u=n.attrs[h];var w=p.attrs[h];u&&w?(ka(this.zC(q,u.o,w.o)),q=hp({o:w.n,n:u.n})):q=gp(w,u);const {Pu:B,rv:C}=ip(c,q);x.ym(h,C);z.ym(h,B)}}else if(q&&u)q=Math.min(q.length,u.length),n.Jo(q),p.Jo(q),x.EC(q),z.EC(q);else if(q)q=q.length,n.Jo(q),x.EC(q),z.EC(q);else if(u)q=u.length,
p.Jo(q),x.EC(q),z.EC(q);else throw Error();q=n.head;u=p.head}n.finish();p.finish();x.finish();z.finish()}else if(n&&p)n=Math.min(n.length,p.length),rq(a,n),rq(k,n),b.rows(n),l.rows(n);else if(n)n=n.length,rq(a,n),b.rows(n),l.rows(n);else if(p)n=p.length,rq(k,n),b.rows(n),l.rows(n);else throw Error();n=a.head;p=k.head}a.finish();k.finish();h=this.He({x:d,y:f,attrs:l.build()});a=this.He({x:e,y:g,attrs:b.build()});return c.build(h,a)}Nl(a){a=a.attrs.Bd();const b=qq(this);for(var c=a.head;c;){if(c.type===
0){c=a.oy();const e=b.oy();for(var d=c.head;d;){if(d.type===0){d=c.Bw();for(const f of xq(d))d=c.attrs[f],e.ym(f,d&&{o:d.n,n:d.o})}else d=d.length,c.Jo(d),e.EC(d);d=c.head}c.finish();e.finish()}else c=c.length,rq(a,c),b.rows(c);c=a.head}return this.He({attrs:b.build()})}Bk(a,b){return uq.Bk(a.x,b.x)&&uq.Bk(a.y,b.y)&&a.attrs.equals(b.attrs)}identity(){return{x:uq.Mg().build(),y:uq.Mg().build(),attrs:qq(this).build()}}apply(a,b){a=this.jJa("apply",a,b.x,b.y);if(b.attrs.items.isEmpty())return a;const c=
this.Dg();rmb(a,b.attrs,c,(d,e,f)=>this.BZd(d,e,f));return c.build()}Yl(a,b){if(b.attrs.items.isEmpty())return this.jJa("unapply",a,b.x,b.y);const c=this.Dg();rmb(a,b.attrs,c,(d,e,f)=>this.jaf(d,e,f));return this.jJa("unapply",c.build(),b.x,b.y)}wi(a,b){return a.equals(b)}equals(a){return this===a?!0:a instanceof rrb?this.zC===a.zC:!1}constructor(a){super();this.zC=a;this.$Bd=(b,c,d)=>{if(c===d)return!0;if(c&&d){const e=c.n,f=d.n;return this.zC(b,c.o,d.o)&&this.zC(b,e,f)}return!c&&!d};this.BZd=(b,
c,d)=>d!=null?(ka(this.zC(b,c,d.o),"{}: {} != {}",b,c,d.o),d.n):c;this.jaf=(b,c,d)=>d!=null?(ka(this.zC(b,c,d.n)),d.o):c}};
trb=class{isEmpty(){return!this.items.length}Bd(a){return new srb(this.items,this.length,a)}forEach(a,{grad:b,Lc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.value);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}equals(a,b){if(this===a)return!0;if(this.length!==a.length)return!1;const c=this.Bd();a=a.Bd();for(var d=c.head,e=a.head;d||e;){if(!d||!e)return!1;switch(d.type){case 0:if(e.type!==0)return!1;d=c.Bw();e=a.Bw();if(d!=null?e==null||
!b(d,e):e!=null)return!1;break;case 1:if(e.type!==1||d.length!==e.length)return!1;c.Jo(d.length);a.Jo(e.length);break;default:throw new r(d);}d=c.head;e=a.head}return!0}toString(a="C",b="G",c=JSON.stringify){return this.items.map(d=>{switch(d.type){case 1:return`${a}${d.length}`;case 0:return`${b}${c(d.value)}`;default:throw new r(d);}}).join()}constructor(a,b){this.items=a;this.length=b}};__c.urb=new trb([],0);
srb=class{get head(){return this.Mm}Jo(a){var b=this.Mm;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Mm=a<b?umb(b-a):this.input[this.i++];return a}Bw(){const a=this.Mm;if(a&&a.type!==1)return this.Mm=this.input[this.i++],a.value}finish(){ka(this.Mm==null,"stream not empty: {}",this.Mm)}constructor(a,b,c=0){this.i=0;c=Math.max(0,c-b);this.length=b+c;this.input=c?[...a,umb(c)]:a;this.Mm=this.input.length?this.input[this.i++]:void 0}};
vq=__c.vq=class{grad(a){if(a==null)return this;ka(this.qra==null,"nextGrad already set: {}",this.qra);this.qra=a;return this}Lc(a){if(a<=0)return this;this.qra!=null&&(this.pra&&(this.items.push(umb(this.pra)),this.pra=0),this.items.push({type:0,value:this.qra}),this.qra=void 0);this.pra+=a;this.T4+=a;return this}build(){this.qra!=null?(ka(this.pra!==0),this.items.push(umb(this.pra)),this.items.push({type:0,value:this.qra}),this.pra=0,this.qra=void 0):this.T4-=this.pra;return new trb(this.items,this.T4)}constructor(){this.items=
[];this.pra=this.T4=0;this.qra=void 0}};
wq=__c.wq=class{static of(a,b,c,d){return b.isEmpty()?qrb:new wq(a,b,c,d)}Bd(a=()=>!0,b=0,c=0){b=Math.max(this.Wq,b);c=Math.max(this.pB,c);const d=this.items.Bd(c);return new vrb(this.zC,d,a,b,c)}forEach(a,b,c=0,d=0){a=this.Bd(a,c,d);c=a.head;let e=0;for(;c;)e=c.type!==0&&a.aKe?e+rq(a,c.length):e+a.c8b((f,g)=>b(e,f,g)),c=a.head;a.finish()}serialize(a){const b=a.oy;this.items.forEach(this.items.length,{Lc:a.rows,grad:c=>{const {EC:d,grad:e,Peb:f}=b();c.forEach(c.length,{Lc:d,grad:e});f()}})}equals(a){return this===
a?!0:a instanceof wq&&this.pB===a.pB&&this.Wq===a.Wq?this.items.equals(a.items,(b,c)=>b.equals(c,(d,e)=>zmb(this.zC,d,e))):!1}toString(){return this.items.toString("R","G",a=>a.toString("C","G",omb))}constructor(a,b,c,d){this.zC=a;this.items=b;this.Wq=c;this.pB=d}};qrb=new wq((a,b,c)=>b===c,__c.urb,0,0);
vrb=class{get head(){return this.NWa.head}c8b(a){ka(this.NX==null);const b=this.oy();var c=b.head;let d=0;for(;c;){if(c.type===0)b.Bw();else{c=b.Jo(c.length);if(!yq(b.attrs)){const e={...b.attrs};for(let f=0;f<c;f++)a(d+f,e)}d+=c}c=b.head}b.finish();return this.head?rq(this,1):0}get aKe(){ka(this.head!=null);ka(this.NX==null);return this.head.type===1&&this.YB.isEmpty()}oy(){ka(this.NX==null);var a=this.NWa.Bw();if(a){a=a.Bd(this.Wq);for(var b=this.YB.Bd(this.Wq),c=new vq,d=a.head,e=b.head;d||e;){if(d&&
d.type===0||e&&e.type===0){const g=a.Bw(),h=b.Bw();b:{d=this.iHa;e=this.Iqa;if(!g){d=h;break b}const k={...h};for(f in g){if(e&&!e(f))continue;const l=g[f];ja(vmb(d,f,h===null||h===void 0?void 0:h[f],l.t));l.b?k[f]=l.b:delete k[f]}d=yq(k)?void 0:k}c.grad(d)}else if(d&&e)d=Math.min(d.length,e.length),a.Jo(d),b.Jo(d),c.Lc(d);else throw Error("length mismatch");d=a.head;e=b.head}var f=c.build()}else f=this.YB;this.NX=f;return new wrb(this.iHa,this.Iqa,this.NX.Bd(this.Wq),this.Ysc)}finish(){ka(this.NX==
null);this.NWa.finish()}constructor(a,b,c,d,e){this.iHa=a;this.NWa=b;this.Iqa=c;this.Wq=d;this.pB=e;this.YB=__c.urb;this.NX=void 0;this.Ysc=()=>{ka(this.NX!=null);this.YB=this.NX;this.NX=void 0}}};
pmb=class{oy(){ka(this.asb==null);return this.asb=new xrb(this.zC,this.P6d)}rows(a){this.yac.Lc(a);return this}build(){ka(this.asb==null);ka(this.YB.isEmpty(),"prevDxs not empty: {}",this.YB);const a=this.yac.build();return wq.of(this.zC,a,this.Wq,a.length)}constructor(a){this.zC=a;this.yac=new vq;this.Wq=0;this.YB=__c.urb;this.asb=void 0;this.P6d=b=>{ka(this.asb!=null);this.Wq=Math.max(this.Wq,b.length);var c=this.YB.Bd(this.Wq);const d=b.Bd(this.Wq),e=new vq;for(var f=c.head,g=d.head;f||g;){if(f&&
f.type===0||g&&g.type===0)f=c.Bw(),g=d.Bw(),f=__c.ymb(this.zC,f,g),e.grad(f);else if(f&&g)f=Math.min(f.length,g.length),c.Jo(f),d.Jo(f),e.Lc(f);else throw Error("length mismatch");f=c.head;g=d.head}c=e.build();c.isEmpty()||this.yac.grad(c);this.YB=b;this.asb=void 0}}};
wrb=class{get attrs(){return this.gJ}get head(){return this.dCb.head}Jo(a){return this.dCb.Jo(a)}Bw(){const a=this.dCb.Bw();this.Oma(a);return a}finish(){this.dCb.finish();this.wl()}Oma(a){if(a)for(const b in a){if(!this.Iqa(b))continue;const c=__c.wmb(this.iHa,b,this.gJ[b],a[b]);c==null?delete this.gJ[b]:this.gJ[b]=c}}constructor(a,b,c,d){this.iHa=a;this.Iqa=b;this.dCb=c;this.wl=d;this.gJ={}}};
xrb=class{ym(a,b){var c=this.iHa,d=this.gJ[a];(b=c(a,d,b)?void 0:{tc:d,r:b})?(this.lK||(this.lK={}),this.lK[a]=b):this.lK&&(delete this.lK[a],yq(this.lK)&&(this.lK=void 0));return this}attrs(a){for(const b of xq(a))this.ym(b,a[b]);return this}EC(a){if(a<=0)return this;this.Oma();this.xxa.Lc(a);return this}Oma(){if(this.lK){var a=this.lK;this.lK=void 0;for(const b in a){const c=__c.wmb(this.iHa,b,this.gJ[b],a[b]);c==null?delete this.gJ[b]:this.gJ[b]=c}this.xxa.grad(a)}}finish(){this.Oma();ka(yq(this.gJ));
const a=this.xxa.build();this.wl(a)}constructor(a,b){this.iHa=a;this.wl=b;this.gJ={};this.lK=void 0;this.xxa=new vq}};var yrb=class extends Rq{get Wq(){return this.grid.Wq}get pB(){return this.grid.pB}set(a,b,c){const {s5e:d,e5e:e,eDb:f=d,$ke:g=e}=b;b=new Set;const h=qq(this.domain);h.rows(d);for(let n=d;n<=f;n++){const p=h.oy();p.EC(e);for(let q=e;q<=g;q++){var k=this.grid.get(n,q);k=Amb(this,a,k,c);for(const u of b)p.ym(u);p.attrs(k);for(const u of Object.keys(k))b.add(u);p.EC(1)}for(const q of b)p.ym(q);p.finish();h.rows(1)}a=h.oy();a.EC(e);for(c=e;c<=g;c++){for(var l of b)a.ym(l);a.EC(1)}for(const n of b)a.ym(n);
a.finish();l=this.domain.He({attrs:h.build()});this.Kr(l)}write(a,b,c){c==null||Object.keys(c).length===0?this.grid.delete(a,b):this.grid.set(a,b,c)}get(a,b,c){b=this.grid.get(b,c);if(b!=null&&(a=__c.iq(this.uh,a,b),Object.keys(a).length!==0))return a}cV(){const a=this.domain.Dg();for(let b=0;b<=this.pB;b++){const c=a.oy();let d={};for(let e=0;e<=this.Wq;e++){const f=this.grid.get(b,e);for(const g of Dmb(d,f))c.ym(g,f&&f[g]);d=f;c.EC(1)}c.finish();a.rows(1)}return a.build()}destroy(a){const b=this.jc();
ka(this.domain.wi(b,a))}gj(a){const b=this.jc(),c=qq(this.domain);rmb(b,a,c,(d,e,f)=>e==null&&f==null?void 0:{o:e,n:f});this.Kr(this.domain.He({attrs:c.build()}));return!0}k0(a){this.A3b(a.x);this.B3b(a.y);Cmb(this,a.attrs)}A3b(a){if(a.pre!==0||a.post!==0){var b=0;a=a.Bd();for(var c=a.head;c;)c.type===0?b+=a.yA(c.length):(c=oq(a,c.length),Kkb(this.grid,b,c),b+=c),c=a.head}}B3b(a){let b=0;a=a.Bd();for(var c=a.head;c;)c.type===0?b+=a.yA(c.length):(c=oq(a,c.length),Lkb(this.grid,b,c),b+=c),c=a.head}constructor(a,
b,c){super();this.uh=a;this.domain=b;this.grid=new $nb;c.forEach(a.SA,(d,e,f)=>{Object.keys(f).length===0||this.grid.set(d,e,f)});ka(this.domain.wi(c,this.cV()))}},zrb=class extends Ynb{Dg(){return this.domain.Dg()}AA(a){return new yrb(this.uh,this.domain,a)}Kn(a){return a}connect(a,b){return this.Kn(a).connect(b)}jc(a){return this.Kn(a).jc()}destroy(a,b){this.Kn(a).destroy(b)}gj(a,b){return this.Kn(a).gj(b)}constructor(){var a=__c.Ar;super();this.uh=a;this.domain=new rrb(a.hEa)}};__c.Brb=class{get Wq(){return this.grid.Wq}get pB(){return this.grid.pB}get rows(){return this.grid.rows}forEach(a){this.grid.forEach((b,c,d)=>{a(d.state,zq(b,c,d.right,d.bottom))})}map(a){const b=new Arb;this.forEach((c,d)=>{b.add(d,a(c,d))});return b.build()}get(a,b){var c=this.grid.rows[b];if(c!=null&&(c=c.cells[a],c!=null))return __c.Emb(zq(a,b,c.right,c.bottom),c.state)}values(){const a=[];this.forEach((b,c)=>{a.push(__c.Emb(c,b))});return a}Bd(){return this.grid.Bd()}constructor(a){this.grid=
a}};__c.Brb.prototype.Akc=da(131);
var Arb=class{add(a,b){Pmb(this.q6d,a);this.zud.add(a.left,a.top,a.right,a.bottom,{right:a.right,bottom:a.bottom,state:b});return this}build(){const a=this.zud.build();return a.isEmpty?Crb:new __c.Brb(a)}constructor(){this.zud=new Drb;this.q6d=new Erb}},Frb=class{constructor(a,b){this.type=0;this.o=a&&{right:a.right,bottom:a.bottom,state:a.state};this.n=b&&{right:b.right,bottom:b.bottom,state:b.state}}},Grb=class{constructor(a,b){this.bounds=a;this.delta=b;this.type=1}},Bq=class{add(a,b,c){if(c==
null)return this;switch(c.type){case 1:var d=a,e=b;if(c.bounds&&c.bounds.o){var f=zq(a,b,c.bounds.o.right,c.bounds.o.bottom);Pmb(this.Wkd,f);d=Math.max(d,c.bounds.o.right);e=Math.max(e,c.bounds.o.bottom)}c.bounds&&c.bounds.n&&(f=zq(a,b,c.bounds.n.right,c.bounds.n.bottom),Pmb(this.ekd,f),d=Math.max(d,c.bounds.n.right),e=Math.max(e,c.bounds.n.bottom));this.tZa.add(a,b,d,e,c);return this;case 0:return d=a,e=b,c.o&&(f=zq(a,b,c.o.right,c.o.bottom),Pmb(this.Wkd,f),d=Math.max(d,c.o.right),e=Math.max(e,c.o.bottom)),
c.n&&(f=zq(a,b,c.n.right,c.n.bottom),Pmb(this.ekd,f),d=Math.max(d,c.n.right),e=Math.max(e,c.n.bottom)),this.tZa.add(a,b,d,e,c),this;default:throw new r(c);}}build(){return this.tZa.build()}constructor(){this.tZa=new Drb;this.Wkd=new Erb;this.ekd=new Erb}},Irb=class{get isEmpty(){return this.rows.length===0}forEach(a){this.rows.forEach(({cells:b},c)=>{b.forEach((d,e)=>{a(e,c,d)})})}values(){const a=[];this.forEach((b,c,d)=>a.push([b,c,d]));return a}Bd(){return new Hrb(this.rows)}constructor(a,b,c){this.rows=
a;this.Wq=b;this.pB=c}},Hrb=class{get head(){const a=this.rows[this.y];return a&&a.cells[this.x]&&{x:this.x,y:this.y,value:a.cells[this.x]}}wt(){const a=m(this.head),b=m(this.rows[this.y]);this.x++;Fmb(this);b.cells[this.x]==null&&(this.y++,this.x=0,Gmb(this),Fmb(this));return a}finish(){ka(this.head==null)}constructor(a){this.rows=a;this.x=this.y=0;Gmb(this);Fmb(this)}},Drb=class{add(a,b,c,d,e){ja(a<=c);ja(b<=d);this.D8==null||this.D8.y<b?(this.flush(),this.rows.length&&ka(this.rows.length<=b),this.D8=
{y:b,Doc:d,cells:[]},this.D8.cells[a]=e):this.D8.y===b?(ka(this.D8.cells.length<=a),this.D8.Doc=Math.max(this.D8.Doc,d),this.D8.cells[a]=e):ka(this.D8.y>b);this.Wq=Math.max(this.Wq,c+1);this.pB=Math.max(this.pB,d+1);return this}flush(){if(this.D8){const {y:a,...b}=this.D8;this.rows[a]=b;this.D8=void 0}}build(){this.flush();return new Irb(this.rows,this.Wq,this.pB)}constructor(){this.rows=[];this.pB=this.Wq=0}},Crb=new __c.Brb(new Irb([],0,0)),Jrb=class extends Oq{Dg(){return new Arb}HP(){return Crb}replace(a,
b){return new Frb(a,b)}update(a,b){a=a==null||Aq(a.o,a.n)?void 0:a;b=b==null||this.component.isIdentity(b)?void 0:b;return a!=null||b!=null?new Grb(a,b):void 0}He(a={}){const b=a.cells||(new Bq).build();return{x:a.x||uq.Mg().build(),y:a.y||uq.Mg().build(),cells:b,L1:a.L1||Br.project(b)}}isIdentity(a){return uq.isIdentity(a.x)&&uq.isIdentity(a.y)&&a.cells.isEmpty&&Br.isIdentity(a.L1)}compose(a,b){const c=Hmb(this,a.cells,b.x,b.y),d=Br.expand(a.L1,b.x,b.y);return{x:uq.compose(a.x,b.x),y:uq.compose(a.y,
b.y),cells:Kmb(this,c,b.cells),L1:Br.compose(d,b.L1)}}transform(a,b){const c=fp.As(),{Pu:d,rv:e}=ip(c,uq.transform(a.x,b.x)),{Pu:f,rv:g}=ip(c,uq.transform(a.y,b.y)),h=Hmb(this,a.cells,d,f),k=Hmb(this,b.cells,e,g);a=Br.expand(a.L1,d,f);b=Br.expand(b.L1,e,g);const {Pu:l,rv:n}=ip(c,Br.transform(a,b)),p=new Erb,q=Br.cursor(a,Math.max(h.Wq,k.Wq),Math.max(h.pB,k.pB)),u=new Bq,w=new Bq;Imb(h.Bd(),k.Bd(),(x,z,B,C)=>{if(B!=null||C!=null){a:if(B==null||C==null)var F=gp(C,B);else switch(B.type){case 1:b:{switch(C.type){case 1:F=
fp.As();const {Pu:M,rv:N}=B.delta&&C.delta?ip(F,this.component.transform(B.delta,C.delta)):gp(C.delta,B.delta);if(B.bounds&&C.bounds){B=B.bounds;C=C.bounds;ka(Aq(B.o,C.o));const U={right:Math.min(B.n.right,C.n.right),bottom:Math.min(B.n.bottom,C.n.bottom)},Z=fp.As();Zjb(Z,!Aq(C.n,U));$jb(Z,!Aq(B.n,U));B=Z.build({o:C.n,n:U},{o:B.n,n:U});B=ip(F,B)}else B=gp(C.bounds,B.bounds);const {Pu:R,rv:T}=B;F=F.build(this.update(R,M),this.update(T,N));break b;case 0:ka(C.o!=null);B.bounds&&ka(Aq(B.bounds.o,C.o));
F=new fp(this.replace({...(B.bounds?B.bounds.n:C.o),state:B.delta?this.component.apply(C.o.state,B.delta):C.o.state},C.n),void 0,!1,!0);break b;default:throw new r(C);}F=void 0}break a;case 0:b:switch(C.type){case 1:ka(B.o!=null);C.bounds&&ka(Aq(B.o,C.bounds.o));F=hp(this.replace({...(C.bounds?C.bounds.n:B.o),state:C.delta?this.component.apply(B.o.state,C.delta):B.o.state},B.n));break b;case 0:ka(Cq(this,B.o,C.o));F=hp(this.replace(C.n,B.n));break b;default:throw new r(C);}break a;default:throw new r(B);
}var {Pu:H,rv:I}=ip(c,F);H&&(F=Nmb(this,x,z,H,p,q))&&(H=Jmb(this,H,F),I=Jmb(this,I,F),Zjb(c));H&&w.add(x,z,H);I&&u.add(x,z,I)}});q.finish();return c.build({x:d,y:f,cells:w.build(),L1:l},{x:e,y:g,cells:u.build(),L1:n})}Nl(a){const b=new Bq;a.cells.forEach((d,e,f)=>{if(f!=null)switch(f.type){case 1:f=this.update(f.bounds&&{o:f.bounds.n,n:f.bounds.o},f.delta&&this.component.Nl(f.delta));b.add(d,e,f);break;case 0:b.add(d,e,this.replace(f.n,f.o));break;default:throw new r(f);}});const c=b.build();return{x:uq.Nl(a.x),
y:uq.Nl(a.y),cells:c,L1:Br.project(c)}}Bk(a,b){var c;if(c=uq.Bk(a.x,b.x)&&uq.Bk(a.y,b.y))a:{c=a.cells;var d=b.cells;if(c.Wq!==d.Wq||c.pB!==d.pB)c=!1;else{c=c.Bd();d=d.Bd();for(var e=c.head,f=d.head;e||f;){var g;(g=e==null)||(g=f==null)||(g=e.x!==f.x||e.y!==f.y)||(e=e.value,f=f.value,g=!(e===f||(e==null||f==null?e===f:e.type===0&&f.type===0?Cq(this,e.o,f.o)&&Cq(this,e.n,f.n):e.type===1&&f.type===1&&(e.bounds&&f.bounds?Aq(e.bounds.o,f.bounds.o)&&Aq(e.bounds.n,f.bounds.n):e.bounds===f.bounds)&&(e.delta&&
f.delta?this.component.Bk(e.delta,f.delta):e.delta===f.delta))));if(g){c=!1;break a}c.wt();d.wt();e=c.head;f=d.head}c=!0}}return c&&Br.Bk(a.L1,b.L1)}identity(){return this.He()}apply(a,b){a=this.jJa(a,b.x,b.y);const c=this.Dg();Imb(a.Bd(),b.cells.Bd(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)ka(f!=null),c.add(zq(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:ka(f!=null);g.bounds&&ka(Aq(g.bounds.o,f));c.add({...(g.bounds?g.bounds.n:f),left:d,top:e},g.delta?this.component.apply(f.state,
g.delta):f.state);break;case 0:g.o&&(ka(f!=null),ka(Cq(this,f,g.o)));g.n&&c.add({left:d,top:e,right:g.n.right,bottom:g.n.bottom},g.n.state);break;default:throw new r(g);}});return c.build()}jJa(a,b,c){if(uq.isIdentity(b)&&uq.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=pq(b,d),g=pq(c,e),h=new Arb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};
h.add(l,k)});return h.build()}Yl(a,b){const c=this.Dg();Imb(a.Bd(),b.cells.Bd(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)ka(f!=null),c.add(zq(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:ka(f!=null);g.bounds&&ka(Aq(g.bounds.n,f));c.add({...(g.bounds?g.bounds.o:f),left:d,top:e},g.delta?this.component.Yl(f.state,g.delta):f.state);break;case 0:g.n&&(ka(f!=null),ka(Cq(this,f,g.n)));g.o&&c.add({left:d,top:e,right:g.o.right,bottom:g.o.bottom},g.o.state);break;default:throw new r(g);}});return this.pWb(c.build(),
b.x,b.y)}pWb(a,b,c){if(uq.isIdentity(b)&&uq.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=nmb(b,d),g=nmb(c,e),h=new Arb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};h.add(l,k)});return h.build()}wi(a,b){if(a===b)return!0;a=a.Bd();b=b.Bd();let c=a.head,d=b.head;for(;c||d;){if(c==null||d==null||c.x!==d.x||c.y!==d.y||c.value.bottom!==d.value.bottom||
c.value.right!==d.value.right||!this.component.wi(c.value.state,d.value.state))return!1;a.wt();b.wt();c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof Jrb&&this.component.equals(a.component)}constructor(a){super();this.component=a}},Erb=class{append(a){for(let b=a.top;b<=a.bottom;b++)for(let c=a.left;c<=a.right;c++){ka(!this.readBuffer(c,b));const {oHd:d,sHd:e}=Qmb(this,c,b);this.buffer[e]||(this.buffer[e]=[]);this.buffer[e][d]=!0}}readBuffer(a,b){const {oHd:c,sHd:d}=Qmb(this,a,
b);return this.buffer[d]&&this.buffer[d][c]}constructor(){this.buffer=[];this.Uua=this.lfa=0}},Krb=class extends Oq{isIdentity(a){return a.items.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.e$a.Dg();rmb(a,b,c,(d,e,f)=>e||f);return c.build()}transform(a,b){return gp(b,a)}Nl(a){return a}Bk(a,b){return a.equals(b)}identity(){return this.id}apply(a){return a}Yl(a){return a}wi(a,b){return a===b}equals(a){return this===a||a instanceof Krb}Mg(){return new Lrb(()=>
this.e$a.Dg(),a=>Xjb(this,a))}cursor(a,b,c){return new Mrb(a,b,c)}project(a){const b=this.Mg();a.forEach((c,d,e)=>{switch(e.type){case 1:e.bounds&&b.add(zq(c,d,e.bounds.n.right,e.bounds.n.bottom));break;case 0:e.n&&b.add(zq(c,d,e.n.right,e.n.bottom));break;default:throw new r(e);}});return b.build()}expand(a,b,c){b=this.e$a.He({x:Rmb(b),y:Rmb(c)});return this.e$a.apply(a,b)}constructor(){super();this.e$a=new rrb((a,b,c)=>b===c);this.id=this.e$a.Dg().build()}},Lrb=class{add(a){const b=this.tZa(),c=
a.left*2,d=a.top*2,e=a.right*2;a=a.bottom*2;b.rows(d);b.oy().EC(c).attrs({value:!0}).EC(e-c+1).attrs({value:void 0}).finish();b.rows(a-d+1);b.oy().EC(c).attrs({value:void 0}).EC(e-c+1).attrs({value:void 0}).finish();this.E6.push(b.build());return this}build(){return this.E6.length?this.reduce(this.E6):this.tZa().build()}constructor(a,b){this.tZa=a;this.reduce=b;this.E6=[]}},Mrb=class{get yi(){ka(this.nma%2===0);return this.nma/2}oy(){ka(this.CFa===0);this.QT=this.Bd.oy();return this}get value(){ka(this.QT!=
null);return this.QT.attrs.value}c8b(a){ka(this.QT!=null);for(var b=this.QT.head;b!=null;){if(b.type===0)this.QT.Bw();else if(b=this.QT.Jo(b.length),this.nma%2===0&&this.QT.attrs.value)for(let c=0;c<b;c++)this.CFa%2===0&&a(this.CFa/2,this.nma/2),this.CFa++;else this.CFa+=b;b=this.QT.head}return this}Peb(){for(ka(this.QT!=null);this.QT.head;)this.QT.head.type===0?this.QT.Bw():this.QT.Jo(this.QT.head.length);this.QT.finish();this.QT=void 0;this.CFa=0;return this}finish(){Lmb(this,this.Bd.pB);this.Bd.head&&
(this.oy(),this.Peb());this.Bd.finish()}constructor(a,b,c){this.CFa=this.nma=0;this.Bd=a.Bd(void 0,b*2,c*2)}},Br=new Krb;var Prb=class extends Rq{get(a,b){a=this.grid.get(a,b);if(a!=null)return{span:a.span,ref:a.value}}forEach(a){this.grid.forEach((b,c,d)=>{b.wLa.left===d&&b.wLa.top===c&&a(b.value,b.span)})}set(a,b){b=(new Bq).add(a.left,a.top,this.domain.replace(void 0,{right:a.right,bottom:a.bottom,state:b})).build();this.Kr(this.domain.compose(Smb(this,a),this.domain.He({cells:b})));return m(this.get(a.top,a.left))}delete(a){this.Kr(Smb(this,a))}createRef(a,b){var c=this.grid;var d={left:Jkb(this.grid,b.left),top:Ikb(this.grid,
b.top),right:Jkb(this.grid,b.right),bottom:Ikb(this.grid,b.bottom)};c=new Nrb(c,d);d=up(this,Tmb(this,c));const {mutable:e,Yx:f}=vp(this.type,a,d);a=new Orb(e,f,d,c);for(c=b.top;c<=b.bottom;c++)for(d=b.left;d<=b.right;d++)this.grid.set(c,d,a);return a}v$b(a,b,c){ka(a.span.left===c.left);ka(a.span.top===c.top);ka(a.span.right===c.right);ka(a.span.bottom===c.bottom);for(let d=c.top;d<=c.bottom;d++)for(let e=c.left;e<=c.right;e++)ka(this.grid.get(d,e)===a),this.grid.delete(d,e);wp(this.type,b,a.to,a.value)}k0(a){this.A3b(a.x);
this.B3b(a.y);a.cells.forEach((b,c,d)=>{switch(d.type){case 1:var e=m(this.grid.get(c,b));d.delta&&e.to.next(d.delta);if(d.bounds){ka(e.span.left===b&&e.span.top===c);const h=d.bounds.o;var f=d.bounds.n;ka(e.span.right===h.right&&e.span.bottom===h.bottom);if(h.right!==f.right||h.bottom!==f.bottom){d=Math.min(h.right,f.right);f=Math.min(h.bottom,f.bottom);for(var g=f+1;g<=h.bottom;g++)for(let k=b;k<=h.right;k++)ka(this.grid.get(g,k)===e),this.grid.delete(g,k);for(b=d+1;b<=h.right;b++)for(g=c;g<=f;g++)ka(this.grid.get(g,
b)===e),this.grid.delete(g,b);e.wLa.right=Jkb(this.grid,d);e.wLa.bottom=Ikb(this.grid,f)}}break;case 0:d.o&&(e=m(this.grid.get(c,b)),ka(e.span.left===b&&e.span.top===c),ka(e.span.right===d.o.right&&e.span.bottom===d.o.bottom),this.v$b(e,d.o.state,{left:b,top:c,right:d.o.right,bottom:d.o.bottom}));break;default:throw new r(d);}});a.cells.forEach((b,c,d)=>{switch(d.type){case 1:if(d.bounds){const g=m(this.grid.get(c,b));var e=d.bounds.o;d=d.bounds.n;var f=Math.min(e.right,d.right);e=Math.min(e.bottom,
d.bottom);for(e+=1;e<=d.bottom;e++)for(let h=b;h<=d.right;h++)ka(this.grid.get(e,h)==null),this.grid.set(e,h,g);for(b=f+1;b<=d.right;b++)for(f=c;f<=d.bottom;f++)ka(this.grid.get(f,b)==null),this.grid.set(f,b,g);g.wLa.right=Jkb(this.grid,d.right);g.wLa.bottom=Ikb(this.grid,d.bottom)}break;case 0:d.n&&this.createRef(d.n.state,{left:b,top:c,right:d.n.right,bottom:d.n.bottom});break;default:throw new r(d);}})}A3b(a){if(a.pre!==0||a.post!==0){var b=0;a=a.Bd();for(var c=a.head;c;)c.type===0?b+=a.yA(c.length):
(c=oq(a,c.length),Kkb(this.grid,b,c,d=>d.span.right!==b-1),b+=c),c=a.head}}B3b(a){let b=0;a=a.Bd();for(var c=a.head;c;)c.type===0?b+=a.yA(c.length):(c=oq(a,c.length),Lkb(this.grid,b,c,d=>d.span.bottom!==b-1),b+=c),c=a.head}cV(){const a=this.domain.Dg();for(let b=0;b<this.grid.pB;b++)for(let c=0;c<this.grid.Wq;c++){const d=this.grid.get(b,c);d!=null&&d.span.top===b&&d.span.left===c&&a.add(d.span,this.type.jc(d.value))}return a.build()}destroy(a){let b=0,c=0;a.forEach(()=>c++);for(let d=0;d<this.grid.pB;d++)for(let e=
0;e<this.grid.Wq;e++){const f=this.grid.get(d,e);if(f==null||f.span.top!==d||f.span.left!==e)continue;const g=m(a.get(f.span.left,f.span.top));ka(g.span.right===f.span.right&&g.span.bottom===f.span.bottom);this.type.destroy(f.value,g.state);b++}ka(c===b)}gj(a){const b=new Bq,c=new Bq;for(let d=0;d<this.grid.pB;d++)for(let e=0;e<this.grid.Wq;e++){const f=this.grid.get(d,e);f!=null&&f.span.top===d&&f.span.left===e&&b.add(f.span.left,f.span.top,this.domain.replace({right:f.span.right,bottom:f.span.bottom,
state:this.type.jc(f.value)},void 0))}a.forEach((d,e)=>c.add(e.left,e.top,this.domain.replace(void 0,{right:e.right,bottom:e.bottom,state:d})));this.Kr(this.domain.compose(this.domain.He({cells:b.build()}),this.domain.He({cells:c.build()})));return!0}constructor(a,b,c){super();this.type=a;this.domain=b;this.grid=new $nb;c.forEach((d,e)=>{this.createRef(d,e)})}},Orb=class{get span(){return this.wLa.Fnd.get()}constructor(a,b,c,d){this.value=a;this.to=b;this.from=c;this.wLa=d}},Nrb=class{get right(){return this.AQc.get()}set right(a){this.AQc.set(a)}get bottom(){return this.fQc.get()}set bottom(a){this.fQc.set(a)}constructor(a,
b){this.gHb=a;this.Fnd=Lp(()=>({left:m(this.gHb.s7b.get(this.left)),top:m(this.gHb.Fzc.get(this.top)),right:m(this.gHb.s7b.get(this.right)),bottom:m(this.gHb.Fzc.get(this.bottom))}),{equals:__c.qnb.structural});this.left=b.left;this.top=b.top;this.AQc=new Sq(b.right);this.fQc=new Sq(b.bottom)}},Qrb=class extends Qq{AA(a){return new Prb(this.type,this.domain,a)}Kn(a){return a}connect(a,b){return this.Kn(a).connect(b)}jc(a){return this.Kn(a).jc()}destroy(a,b){return this.Kn(a).destroy(b)}gj(a,b){return this.Kn(a).gj(b)}constructor(a){super(Pq,
Pq);this.type=a;this.domain=new Jrb(this.type.domain)}};var Rrb,Srb,Dq,Umb,Cr,Trb,Urb,Vrb;Rrb=new Map;Srb=class{ordinal(a,b){b!=null?this.V8a.set(a,b):this.V8a.delete(a);return this}Ik(a){a.forEach((b,c)=>this.V8a.set(c,b));return this}build(){return this.V8a.size?this.V8a:Rrb}constructor(){this.V8a=new Map}};Dq=class{toString(){var a,b;return`R(${(a=this.oldValue)!==null&&a!==void 0?a:"_"},${(b=this.newValue)!==null&&b!==void 0?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=0}};
Umb=class{toString(){return`U(${this.oldValue},${this.newValue})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=1}};Cr=class{static create(a,b){const c=uq.isIdentity(a),d=b.size===0;return c&&d?Trb:new Cr(c?Trb.axis:a,d?Trb.Ik:b)}toString(){const a=[...this.Ik].map(([b,c])=>`"${b}":${c}`).join(",");return`{${this.axis}|${a}}`}constructor(a,b){this.axis=a;this.Ik=b}};Trb=new Cr(uq.Mg().build(),new Map);
Urb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}build(){return Cr.create(this.axis.build(),this.Ik)}constructor(){this.Ik=new Map;this.axis=uq.Mg()}};
Vrb=class extends Oq{Dg(){return new Srb}Mg(){return new Urb}replace(a,b,c){return Eq(this.Mg(),a,b,c).build()}update(a,b,c){return Vmb(this.Mg(),a,b,c).build()}He(a,b){return Cr.create(a,b)}isIdentity(a){return uq.isIdentity(a.axis)&&!a.Ik.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=Xmb(a.Ik,b.axis),d=new Map;for(const h of Wmb(c,b.Ik)){var e=c.get(h);const k=b.Ik.get(h);if(e&&k){var f=d,g=f.set;a:{dp(e.newValue,k.oldValue);switch(e.type){case 0:e=new Dq(e.oldValue,
k.newValue);break a;case 1:switch(k.type){case 0:e=new Dq(e.oldValue,k.newValue);break a;case 1:e=new Umb(e.oldValue,k.newValue);break a;default:throw new r(k);}default:throw new r(e);}e=void 0}g.call(f,h,e)}else e?d.set(h,e):k&&d.set(h,k)}return Cr.create(uq.compose(a.axis,b.axis),d)}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return gp(b,a);const c=fp.As(),{Pu:d,rv:e}=ip(c,uq.transform(a.axis,b.axis));a=Xmb(a.Ik,d);const f=Xmb(b.Ik,e);b=new Map;const g=new Map;for(var h of Wmb(a,f)){var k=
a.get(h);const l=f.get(h);if(k&&l){a:{dp(k.oldValue,l.oldValue);switch(k.type){case 0:k=hp(new Dq(l.newValue,k.newValue));break a;case 1:switch(l.type){case 0:k=new fp(new Dq(k.newValue,l.newValue),void 0,!1,!0);break a;case 1:k=hp(new Umb(l.newValue,k.newValue));break a;default:throw new r(l);}default:throw new r(k);}k=void 0}const {Pu:n,rv:p}=ip(c,k);p&&b.set(h,p);n&&g.set(h,n)}else k?b.set(h,k):l&&g.set(h,l)}h=Cr.create(d,g);a=Cr.create(e,b);return c.build(h,a)}Nl(a){const b=a.Ik.size===0?a.Ik:
ah(a.Ik,c=>{switch(c.type){case 0:return new Dq(c.newValue,c.oldValue);case 1:return new Umb(c.newValue,c.oldValue);default:throw new r(c);}});return Cr.create(uq.Nl(a.axis),b)}Bk(a,b){if(a===b)return!0;if(!uq.Bk(a.axis,b.axis)||a.Ik.size!==b.Ik.size)return!1;for(const e of a.Ik.keys()){var c=a.Ik.get(e),d=b.Ik.get(e);if(c!==d&&(c==null||d==null||c.type!==d.type||c.oldValue!==d.oldValue||c.newValue!==d.newValue))return!1}return!0}identity(){return Trb}apply(a,b){if(this.isIdentity(b)||!a.size&&!b.Ik.size)return a;
a=this.jJa(a,b.axis);if(!b.Ik.size)return a;const c=new Map(a);for(const [d,e]of b.Ik)b=a.get(d),dp(b,e.oldValue),e.newValue!=null?c.set(d,e.newValue):c.delete(d);return c}jJa(a,b){if(uq.isIdentity(b))return a;const c=new Set(a.values()),d=pq(b,c);return ah(a,e=>m(d.get(e)))}Yl(a,b){if(this.isIdentity(b)||!a.size&&!b.Ik.size)return a;if(!b.Ik.size)return this.pWb(a,b.axis);const c=new Map(a);for(const [d,e]of b.Ik){const f=a.get(d);dp(f,e.newValue);e.oldValue!=null?c.set(d,e.oldValue):c.delete(d)}return this.pWb(c,
b.axis)}pWb(a,b){if(uq.isIdentity(b))return a;const c=new Set(a.values()),d=nmb(b,c);return ah(a,e=>m(d.get(e)))}wi(a,b){return a===b?!0:a.size===b.size&&[...a.keys()].every(c=>a.get(c)===b.get(c))}equals(a){return this===a||a instanceof Vrb}constructor(){super();this.HP=Rrb}};Hq=__c.Hq=new Vrb;var Wrb=new Map,Gq=class{static from(a){if(a instanceof Gq)return a;if(Array.isArray(a)){const [b,c]=a;return new Gq(b,c)}return new Gq(a.start,a.end)}toString(){return`[${this.start},${this.end}]`}constructor(a,b){this.start=a;this.end=b}},Xrb=class{range(a,b){b?this.B$.set(a,Gq.from(b)):this.B$.delete(a);return this}Ye(a){a.forEach((b,c)=>this.B$.set(c,Gq.from(b)));return this}build(){return this.B$.size?this.B$:Wrb}constructor(){this.B$=new Map}},bnb=class{toString(){var a,b;return`R(${(a=this.oldValue)!==
null&&a!==void 0?a:"_"},${(b=this.newValue)!==null&&b!==void 0?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type="replace"}},Iq=class{static from(a){if(a instanceof Iq)return a;if(Array.isArray(a)){const [b,c]=a;return new Iq(b,c)}return new Iq(a.oldValue,a.newValue)}toString(){return`[${this.oldValue},${this.newValue}]`}constructor(a,b){this.oldValue=a;this.newValue=b}},cnb=class{toString(){var a,b;return`U(${(a=this.start)!==null&&a!==void 0?a:"_"},${(b=this.end)!==null&&b!==void 0?
b:"_"})`}constructor(a,b){this.start=a;this.end=b;this.type="update"}},dnb=class{static create(a,b){const c=uq.isIdentity(a),d=b.size===0;return c&&d?Yrb:new dnb(c?Yrb.axis:a,d?Yrb.Ye:b)}toString(){return`{${this.axis}|${[...this.Ye].map(([a,b])=>`"${a}":${b}`).join(",")}}`}constructor(a,b){this.axis=a;this.Ye=b}},Yrb=new dnb(uq.Mg().build(),new Map),Zrb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}L3a(a,b,c){this.Ye.set(a,new bnb(b&&Gq.from(b),c&&Gq.from(c)));
return this}createRange(a,b){return this.L3a(a,void 0,b)}build(){return dnb.create(this.axis.build(),this.Ye)}constructor(){this.Ye=new Map;this.axis=uq.Mg()}},Dr,$rb;ka(!0);Dr=Hq.map(enb,anb,$mb,Zmb);
$rb=class extends Oq{Dg(){return new Xrb}Mg(){return new Zrb}replace(a,b,c){return this.Mg().L3a(a,b,c).build()}update(a,b,c){var d=this.Mg();d.Ye.set(a,new cnb(b&&Iq.from(b),c&&Iq.from(c)));return d.build()}He(a,b){return dnb.create(a,b)}isIdentity(a){return Dr.isIdentity(a)}compose(a,b){return Dr.compose(a,b)}transform(a,b){return Dr.transform(a,b)}Nl(a){return Dr.Nl(a)}Bk(a,b){return Dr.Bk(a,b)}identity(a){return Dr.identity(a)}apply(a,b){return Dr.apply(a,b)}Yl(a,b){return Dr.Yl(a,b)}wi(a,b){return Dr.wi(a,
b)}equals(a){return Dr.equals(a)}constructor(){super();this.HP=Wrb}};Er=__c.Er=new $rb;var asb=class extends Oq{He(a){return{rows:a.rows||this.rows.Mg().build(),cols:a.cols||this.cols.Mg().build(),Xo:a.Xo||Er.Mg().build().Ye,Wo:a.Wo||Hq.Mg().build().Ik,Ho:a.Ho||Er.Mg().build().Ye,co:a.co||Hq.Mg().build().Ik,cells:a.cells||Kq(this.cells.He({}),this.cols.Mg().build(),this.rows.Mg().build()),attrs:a.attrs||Kq(this.attrs.He({}),this.cols.Mg().build(),this.rows.Mg().build())}}isIdentity(a){return this.rows.isIdentity(a.rows)&&this.cols.isIdentity(a.cols)&&a.Xo.size===0&&a.Wo.size===0&&a.Ho.size===
0&&a.co.size===0&&a.cells.cells.isEmpty&&Br.isIdentity(a.cells.L1)&&a.attrs.attrs.items.isEmpty()}compose(a,b){const c=Jq(a.cols),d=Jq(a.rows),e=Jq(b.cols),f=Jq(b.rows),g=this.rows.compose(a.rows,b.rows),h=this.cols.compose(a.cols,b.cols),k=Er.compose(Er.He(d,a.Xo),Er.He(f,b.Xo)).Ye,l=Hq.compose(Hq.He(d,a.Wo),Hq.He(f,b.Wo)).Ik,n=Er.compose(Er.He(c,a.Ho),Er.He(e,b.Ho)).Ye,p=Hq.compose(Hq.He(c,a.co),Hq.He(e,b.co)).Ik,q=this.cells.compose(this.cells.He({...a.cells,x:c,y:d}),this.cells.He({...b.cells,
x:e,y:f}));a=this.attrs.compose(this.attrs.He({...a.attrs,x:c,y:d}),this.attrs.He({...b.attrs,x:e,y:f}));return{rows:g,cols:h,Xo:k,Wo:l,Ho:n,co:p,cells:Kq(q,h,g),attrs:Kq(a,h,g)}}transform(a,b){const c=Jq(a.cols),d=Jq(a.rows),e=Jq(b.cols),f=Jq(b.rows),g=fp.As(),{Pu:h,rv:k}=ip(g,this.rows.transform(a.rows,b.rows)),{Pu:l,rv:n}=ip(g,this.cols.transform(a.cols,b.cols)),{Pu:{Ye:p},rv:{Ye:q}}=ip(g,Er.transform(Er.He(d,a.Xo),Er.He(f,b.Xo))),{Pu:{Ik:u},rv:{Ik:w}}=ip(g,Hq.transform(Hq.He(d,a.Wo),Hq.He(f,b.Wo))),
{Pu:{Ye:x},rv:{Ye:z}}=ip(g,Er.transform(Er.He(c,a.Ho),Er.He(e,b.Ho))),{Pu:{Ik:B},rv:{Ik:C}}=ip(g,Hq.transform(Hq.He(c,a.co),Hq.He(e,b.co))),{Pu:F,rv:H}=ip(g,this.cells.transform(this.cells.He({...a.cells,x:c,y:d}),this.cells.He({...b.cells,x:e,y:f}))),{Pu:I,rv:M}=ip(g,this.attrs.transform(this.attrs.He({...a.attrs,x:c,y:d}),this.attrs.He({...b.attrs,x:e,y:f})));a={rows:h,cols:l,Xo:p,Wo:u,Ho:x,co:B,cells:Kq(F,l,h),attrs:Kq(I,l,h)};b={rows:k,cols:n,Xo:q,Wo:w,Ho:z,co:C,cells:Kq(H,n,k),attrs:Kq(M,n,k)};
return g.build(a,b)}Nl(a){const b=Jq(a.cols),c=Jq(a.rows),d=this.rows.Nl(a.rows),e=this.cols.Nl(a.cols),f=Er.Nl(Er.He(c,a.Xo)).Ye,g=Hq.Nl(Hq.He(c,a.Wo)).Ik,h=Er.Nl(Er.He(b,a.Ho)).Ye,k=Hq.Nl(Hq.He(b,a.co)).Ik,l=this.cells.Nl({...a.cells,x:b,y:c});a=this.attrs.Nl(this.attrs.He({...a.attrs,x:b,y:c}));return{rows:d,cols:e,Xo:f,Wo:g,Ho:h,co:k,cells:Kq(l,e,d),attrs:Kq(a,e,d)}}Bk(a,b){return this.rows.Bk(a.rows,b.rows)&&this.cols.Bk(a.cols,b.cols)&&Er.Bk(Er.He(uq.identity(),a.Xo),Er.He(uq.identity(),b.Xo))&&
Hq.Bk(Hq.He(uq.identity(),a.Wo),Hq.He(uq.identity(),b.Wo))&&Er.Bk(Er.He(uq.identity(),a.Ho),Er.He(uq.identity(),b.Ho))&&Hq.Bk(Hq.He(uq.identity(),a.co),Hq.He(uq.identity(),b.co))&&this.cells.Bk(this.cells.He(a.cells),this.cells.He(b.cells))&&this.attrs.Bk(this.attrs.He(a.attrs),this.attrs.He(b.attrs))}identity(a){return{rows:this.rows.identity(a.rows),cols:this.cols.identity(a.cols),Xo:Er.identity(a.Xo).Ye,Wo:Hq.identity(a.Wo).Ik,Ho:Er.identity(a.Ho).Ye,co:Hq.identity(a.co).Ik,cells:this.cells.identity(a.cells),
attrs:this.attrs.identity(a.attrs)}}apply(a,b){if(this.isIdentity(b))return a;const c=Jq(b.cols),d=Jq(b.rows),e=this.rows.apply(a.rows,b.rows),f=this.cols.apply(a.cols,b.cols),g=Er.apply(a.Xo,Er.He(d,b.Xo)),h=Hq.apply(a.Wo,Hq.He(d,b.Wo)),k=Er.apply(a.Ho,Er.He(c,b.Ho)),l=Hq.apply(a.co,Hq.He(c,b.co)),n=this.cells.apply(a.cells,{...b.cells,x:c,y:d});a=this.attrs.apply(a.attrs,this.attrs.He({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Xo:g,Wo:h,Ho:k,co:l,cells:n,attrs:a}}Yl(a,b){if(this.isIdentity(b))return a;
const c=Jq(b.cols),d=Jq(b.rows),e=this.rows.Yl(a.rows,b.rows),f=this.cols.Yl(a.cols,b.cols),g=Er.Yl(a.Xo,Er.He(d,b.Xo)),h=Hq.Yl(a.Wo,Hq.He(d,b.Wo)),k=Er.Yl(a.Ho,Er.He(c,b.Ho)),l=Hq.Yl(a.co,Hq.He(c,b.co)),n=this.cells.Yl(a.cells,{...b.cells,x:c,y:d});a=this.attrs.Yl(a.attrs,this.attrs.He({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Xo:g,Wo:h,Ho:k,co:l,cells:n,attrs:a}}wi(a,b){return a===b?!0:this.rows.wi(a.rows,b.rows)&&Er.wi(a.Xo,b.Xo)&&Hq.wi(a.Wo,b.Wo)&&Er.wi(a.Ho,b.Ho)&&Hq.wi(a.co,b.co)&&this.cols.wi(a.cols,
b.cols)&&this.cells.wi(a.cells,b.cells)&&this.attrs.wi(a.attrs,b.attrs)}equals(a){return this===a?!0:a instanceof asb?this.rows.equals(a.rows)&&this.cols.equals(a.cols)&&this.cells.equals(a.cells)&&this.attrs.equals(a.attrs):!1}constructor(a,b,c,d){super();this.rows=a;this.cols=b;this.cells=c;this.attrs=d}};var bsb=class extends Rq{static F(a){hb(a,{eed:Lp})}get eed(){const a=new Map;this.items.forEach((b,c)=>a.set(b,c));return a}get(a){return Lq(this,this.refs.get(a))}forEach(a){for(const [b,c]of this.refs)a(Lq(this,c),b)}create(a,b){a=this.domain.replace(a,this.get(a),b);this.Kr(a)}update(a,b){const c=m(Lq(this,this.refs.get(a)));a=this.domain.update(a,c,b);this.Kr(a)}delete(a){const b=Lq(this,this.refs.get(a));b!=null&&(a=this.domain.replace(a,b,void 0),this.Kr(a))}cV(){const a=this.domain.Dg();for(const [b,
c]of this.refs)a.ordinal(b,Lq(this,c));return a.build()}destroy(a){ka(this.refs.size===a.size);for(const [b,c]of this.refs)ka(a.has(b)),ka(Lq(this,c)===a.get(b))}gj(a){const b=this.domain.Mg();for(const [c,d]of this.refs){const e=Lq(this,d),f=a.get(c);Eq(b,c,e,f)}for(const [c,d]of a)this.refs.has(c)||Eq(b,c,void 0,d);this.Kr(b.build());return!0}k0(a){if(!this.domain.isIdentity(a)){var b=a.axis;if(!b.isEmpty()){var c=0;this.items.length<b.pre&&(this.items.length=b.pre);b=b.Bd();for(var d=b.head;d;)d.type===
0?c+=b.yA(d.length):(d=oq(b,d.length),this.items.spliceWithArray(c,0,Array(d)),c+=d),d=b.head}for(const [e,f]of a.Ik)switch(f.type){case 0:f.oldValue!=null?(a=m(this.refs.get(e)),c=fnb(this,f.oldValue),ja(a===c)):ja(!this.refs.has(e));f.newValue!=null?this.refs.set(e,fnb(this,f.newValue)):this.refs.delete(e);break;case 1:a=m(this.refs.get(e));c=fnb(this,f.oldValue);ja(a===c);this.refs.set(e,fnb(this,f.newValue));break;default:throw new r(f);}}}constructor(a){super();this.domain=(bsb.F(this),Hq);this.items=
Nq.array([],{deep:!1});this.refs=Nq.map(new Map,{deep:!1});for(const [b,c]of a)this.refs.set(b,fnb(this,c))}},csb=class extends Qq{AA(a){return new bsb(a)}Kn(a){return a}connect(a,b){return this.Kn(a).connect(b)}jc(a){return this.Kn(a).jc()}destroy(a,b){return this.Kn(a).destroy(b)}gj(a,b){return this.Kn(a).gj(b)}constructor(){super(Pq,sp);this.domain=__c.Hq}},Fr=new csb;var dsb=class{create(a,b){a=Fq(a);var c=this.base.get(a.start);const d=this.base.get(a.end);if(c==null&&d==null){c=this.base;b=new Map([[a.start,b.start],[a.end,b.end]]);a=c.domain.Mg();for(const [e,f]of b)Eq(a,e,c.get(e),f);c.Kr(a.build())}}get(a){var b=Fq(a);a=this.base.get(b.start);b=this.base.get(b.end);if(a!=null&&b!=null)return{start:a,end:Math.max(a,b)}}forEach(a){const b=new Set;this.base.forEach((c,d)=>{c=Ymb(d);b.has(c)||(b.add(c),d=m(this.get(c)),a(d,c))})}delete(a){var b=Fq(a);a=this.base;
var c=new Set([b.start,b.end]);b=a.domain.Mg();for(const d of c)c=a.get(d),c!=null&&Eq(b,d,c);a.Kr(b.build())}constructor(a){this.base=a}},esb=Fr.map(enb,anb,$mb,Zmb,a=>new dsb(a),a=>a.base),fsb=class extends Ynb{AA(a){a=Fr.AA(Zmb(a));return new dsb(a)}connect(a,b){return esb.connect(a,b)}jc(a){return esb.jc(a)}destroy(a,b){return esb.destroy(a,b)}gj(a,b){return esb.gj(a,b)}constructor(){super();this.domain=__c.Er}},Gr=new fsb;var ksb,isb,jsb,gsb,hsb;
ksb=class extends Rq{cV(){return{rows:this.BRb.jc(this.rows),cols:this.Ezb.jc(this.cols),Xo:Gr.jc(this.Xo.Ye),Wo:Fr.jc(this.Wo.Ik),Ho:Gr.jc(this.Ho.Ye),co:Fr.jc(this.co.Ik),cells:this.czb.jc(this.cells.grid),attrs:this.Gxb.jc(this.attrs.grid)}}destroy(a){wp(this.BRb,a.rows,this.qCd,this.rows);wp(this.Ezb,a.cols,this.gCd,this.cols);wp(Gr,a.Xo,this.VFc,this.Xo.Ye);wp(Fr,a.Wo,this.UFc,this.Wo.Ik);wp(Gr,a.Ho,this.SFc,this.Ho.Ye);wp(Fr,a.co,this.RFc,this.co.Ik);wp(this.czb,a.cells,this.yVb,this.cells.grid);
wp(this.Gxb,a.attrs,this.xVb,this.attrs.grid)}gj(a){return this.BRb.gj(this.rows,a.rows)&&this.Ezb.gj(this.cols,a.cols)&&Gr.gj(this.Xo.Ye,a.Xo)&&Fr.gj(this.Wo.Ik,a.Wo)&&Gr.gj(this.Ho.Ye,a.Ho)&&Fr.gj(this.co.Ik,a.co)&&this.czb.gj(this.cells.grid,a.cells)&&this.Gxb.gj(this.attrs.grid,a.attrs)}k0(a){const b=Jq(a.rows),c=Jq(a.cols);this.qCd.next(a.rows);this.gCd.next(a.cols);this.VFc.next(Er.He(b,a.Xo));this.UFc.next(Hq.He(b,a.Wo));this.SFc.next(Er.He(c,a.Ho));this.RFc.next(Hq.He(c,a.co));this.yVb.next(this.domain.cells.He({...a.cells,
y:b,x:c}));this.xVb.next(this.domain.attrs.He({...a.attrs,y:b,x:c}))}constructor(a,b,c,d,e,f){super();this.BRb=a;this.Ezb=b;this.czb=c;this.Gxb=d;this.domain=e;this.e4=g=>this.rows.has(g)?this.rows.ZN(g):void 0;this.i1=g=>this.cols.has(g)?this.cols.ZN(g):void 0;this.Sya=g=>this.rows.get(g);this.Rya=g=>this.cols.get(g);this.ZFb=()=>{var g=this.rows.last();if(g==null)return 0;g=this.e4(g);return g!=null?g+1:0};this.tFb=()=>{var g=this.cols.last();if(g==null)return 0;g=this.i1(g);return g!=null?g+1:
0};this.lqe=up(this,g=>{const h=Jq(g);uq.isIdentity(h)||(this.yVb.next(this.domain.cells.He({y:h})),this.xVb.next(this.domain.attrs.He({y:h})),this.UFc.next(Hq.He(h,new Map)),this.VFc.next(Er.He(h,new Map)));return this.domain.He({rows:g})});a=vp(this.BRb,f.rows,this.lqe);this.rows=a.mutable;this.qCd=a.Yx;this.gqe=up(this,g=>{const h=Jq(g);uq.isIdentity(h)||(this.yVb.next(this.domain.cells.He({x:h})),this.xVb.next(this.domain.attrs.He({x:h})),this.RFc.next(Hq.He(h,new Map)),this.SFc.next(Er.He(h,
new Map)));return this.domain.He({cols:g})});a=vp(this.Ezb,f.cols,this.gqe);this.cols=a.mutable;this.gCd=a.Yx;this.jqe=up(this,g=>{ja(uq.isIdentity(g.axis));return this.domain.He({Wo:g.Ik})});a=vp(Fr,f.Wo,this.jqe);this.Wo=new gsb(a.mutable,this.e4,this.Sya);this.UFc=a.Yx;this.kqe=up(this,g=>{ja(uq.isIdentity(g.axis));return this.domain.He({Xo:g.Ye})});a=vp(Gr,f.Xo,this.kqe);this.Xo=new hsb(a.mutable,this.e4,this.Sya);this.VFc=a.Yx;this.eqe=up(this,g=>{ja(uq.isIdentity(g.axis));return this.domain.He({co:g.Ik})});
a=vp(Fr,f.co,this.eqe);this.co=new gsb(a.mutable,this.i1,this.Rya);this.RFc=a.Yx;this.fqe=up(this,g=>{ja(uq.isIdentity(g.axis));return this.domain.He({Ho:g.Ye})});a=vp(Gr,f.Ho,this.fqe);this.Ho=new hsb(a.mutable,this.i1,this.Rya);this.SFc=a.Yx;this.dqe=up(this,g=>{ja(uq.isIdentity(g.x));ja(uq.isIdentity(g.y));return this.domain.He({cells:g})});a=vp(this.czb,f.cells,this.dqe);this.cells=new isb(a.mutable,this.e4,this.i1,this.Sya,this.Rya,this.ZFb,this.tFb);this.yVb=a.Yx;this.bqe=up(this,g=>{ja(uq.isIdentity(g.x));
ja(uq.isIdentity(g.y));return this.domain.He({attrs:g})});f=vp(this.Gxb,f.attrs,this.bqe);this.attrs=new jsb(f.mutable,this.e4,this.i1,this.Sya,this.Rya,this.ZFb,this.tFb);this.xVb=f.Yx}};
isb=class{get(a,b){a=this.e4(a);b=this.i1(b);if(a!=null&&b!=null&&(b=this.grid.get(a,b),b!=null))return{span:{Gg:m(gnb(this,b.span)),Bg:m(hnb(this,b.span)),El:m(inb(this,b.span)),Ck:m(jnb(this,b.span))},ref:b.ref}}forEach(a){this.grid.forEach((b,c)=>{const d=gnb(this,c),e=hnb(this,c);d!=null&&e!=null&&a(b,{Gg:d,Bg:e,El:m(inb(this,c)),Ck:m(jnb(this,c))})})}map(a){const b=[];this.forEach((c,d)=>b.push(a(c,d)));return b}set(a,b){this.grid.set(knb(this,a),b);return m(this.get(a.Gg,a.Bg))}delete(a){this.grid.delete(knb(this,
a))}constructor(a,b,c,d,e,f,g){this.grid=a;this.e4=b;this.i1=c;this.Sya=d;this.Rya=e;this.ZFb=f;this.tFb=g}};jsb=class{get(a,b,c){b=this.e4(b);c=this.i1(c);if(b!=null&&c!=null)return this.grid.get(a,b,c)}set(a,b,c){const d=this.e4(b.Gg),e=this.i1(b.Bg),f=this.e4(b.El||b.Gg);b=this.i1(b.Ck||b.Bg);d!=null&&e!=null&&f!=null&&b!=null&&this.grid.set(a,{s5e:d,e5e:e,eDb:f,$ke:b},c)}constructor(a,b,c,d,e,f,g){this.grid=a;this.e4=b;this.i1=c;this.Sya=d;this.Rya=e;this.ZFb=f;this.tFb=g}};
gsb=class{get(a){a=this.Ik.get(a);if(a!=null)for(;a>=0;a--){const b=this.hHb(a);if(b)return b}}forEach(a){this.Ik.forEach((b,c)=>{(b=this.get(c))&&a(b,c)})}create(a,b){b=m(this.sJb(b));this.Ik.create(a,b)}delete(a){this.Ik.delete(a)}constructor(a,b,c){this.Ik=a;this.sJb=b;this.hHb=c}};
hsb=class{get(a){a=this.Ye.get(a);if(a!=null){var b;a:{for(b=a.start;b<=a.end;b++){var c=this.hHb(b);if(c){b=c;break a}}b=void 0}a:{for(c=a.end;c>=a.start;c--){const d=this.hHb(c);if(d){a=d;break a}}a=void 0}if(b!=null&&a!=null)return{start:b,end:a}}}forEach(a){this.Ye.forEach((b,c)=>{(b=this.get(c))&&a(b,c)})}create(a,b){const c=m(this.sJb(b.start));b=m(this.sJb(b.end));this.Ye.create(a,{start:c,end:b})}delete(a){this.Ye.delete(a)}constructor(a,b,c){this.Ye=a;this.sJb=b;this.hHb=c}};
__c.osb=class extends Qq{AA(a){return new ksb(this.rows,this.cols,this.cells,this.attrs,this.domain,a)}Kn(a){return a}connect(a,b){return this.Kn(a).connect(b)}jc(a){return this.Kn(a).jc()}destroy(a,b){this.Kn(a).destroy(b)}gj(a,b){return this.Kn(a).gj(b)}constructor(a){var b=lsb,c=msb,d=__c.nsb;super(Pq,Pq);this.rows=b;this.cols=c;this.cells=a;this.attrs=d;this.domain=new asb(b.domain,c.domain,a.domain,d.domain)}};__c.osb.prototype.BB=da(110);__c.psb=class{static parse(a){a==="dd mmm yyyy"&&(a="dd MMM yyyy");const b=new __c.psb;if((a=b.p7e(a))&&a.s===""&&b.isValid())return a.value}isValid(){return this.U9b<=1&&this.wpc<=1&&this.$Lc<=1&&this.U9b+this.wpc+this.$Lc!==0}wt(a){return b=>{var c=a.exec(b);if(c&&c.index===0)return[c]=c,{s:b.substring(c.length),value:[{type:0,value:c}]}}}compose(a,...b){return c=>{const d=[];for(const e of b){const f=e(c);if(!f)return;c=f.s;d.push(...f.value)}return{s:c,value:a(...d)}}}constructor(){this.$Lc=this.wpc=
this.U9b=0;this.hde=this.compose(a=>{a=a.value;this.U9b++;ka(a==="d"||a==="dd");return[{type:1,value:a}]},this.wt(/^d{1,2}(?!d)/));this.WIe=this.compose(a=>{a=a.value;this.wpc++;switch(a){case "M":case "MM":case "MMM":case "MMMM":return[{type:1,value:a}];default:ka(!1)}},this.wt(/^M{1,4}(?!M)/));this.eff=this.compose(a=>{a=a.value;this.$Lc++;ka(a==="yyyy"||a==="yy");return[{type:1,value:a}]},this.wt(/^(yyyy|yy)(?!y)/));this.e0c=this.wt(/^"/);this.KSe=this.wt(/^[^\\"]+/);this.separator=this.wt(/^[^a-zA-Z\\"]+/);
this.symbol=lnb(this.hde,this.WIe,this.eff);this.oKe=mnb(lnb(this.symbol,this.separator));this.p7e=mnb(lnb(this.compose((a,b)=>[b],this.e0c,this.KSe,this.e0c),this.oKe))}};var qsb,rsb,ssb,tsb,usb,vsb,wsb,xsb,ysb,zsb,Asb,Bsb,Csb,Dsb,Esb,Isb,Jsb,Ksb,Lsb,Msb,Osb,Qsb,Rsb,Ssb,Tsb,Usb,Vsb,Wsb,Xsb,Ysb,Zsb,$sb,atb,ctb,dtb,etb,ftb,gtb,htb,itb,ktb,ltb,mtb,ntb,otb,ptb,rtb,stb,lsb,msb,ttb,utb,vtb,wtb,xtb,ytb,ztb,Atb,Btb,Ctb,Dtb,Itb,Jtb,Ktb,Ltb,Mtb,Otb,Qtb;qsb=Ap({hf:zp(Vq)});rsb=Cp(/^([A-Z]+|[1-9]\d*)$/);ssb=Cp(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*)$/);tsb=Ap({type:yp("single-row"),qka:Uq,lob:rsb});usb=Ap({type:yp("single-column"),dHa:Uq,lob:rsb});
vsb=Ap({type:yp("range-row"),BPa:Uq,lob:ssb});wsb=Ap({type:yp("range-column"),eHa:Uq,lob:ssb});xsb=zp(__c.Bp({"single-row":tsb,"single-column":usb,"range-row":vsb,"range-column":wsb},a=>a.type));ysb=Ap({type:yp("canonical"),eab:Uq,Ub:xsb});zsb=Ap({type:yp("invalid"),Cxc:Uq});Asb=Kp(Ap({type:yp("formula"),value:__c.Bp({canonical:ysb,invalid:zsb},a=>a.type)}));Bsb=Kp(Ap({type:yp("boolean"),value:Tq}));Csb=xp(a=>a.length<=20&&__c.psb.parse(a)!=null);
Dsb=Kp(Ap({type:yp("number"),value:xp(a=>Number.isFinite(a)&&(Math.abs(a)>=2.2250738585072014E-308||Object.is(a,0)))}));Esb=Kp(Ap({type:yp("plaintext"),value:Uq}));__c.Fsb=Np({attributes:{oaa:Ip(hqb)},Ub:{fill:__c.wr}});__c.Gsb=Pp(__c.Fsb);__c.Hsb=Np({values:{type:yp("media")},Ub:{value:__c.Gsb}});Isb=Pp(Kp(mqb));Jsb=Np({values:{type:yp("mention")},Ub:{value:Isb}});Ksb=Ap({embed:nqb});Lsb=Pp(Kp(Ksb));Msb=Np({values:{type:yp("embed")},Ub:{value:Lsb}});__c.Nsb=new __c.rr;
Osb=Np({values:{type:yp("text2")},attributes:{cd:Gp(qsb)},Ub:{value:__c.Nsb}});__c.Psb=new __c.rr;Qsb=Np({values:{type:yp("text3")},Ub:{value:__c.Psb}});Rsb={formula:Asb,boolean:Bsb,number:Dsb,plaintext:Esb,media:__c.Hsb,mention:Jsb,embed:Msb};Ssb=dq(Rsb,a=>a.type,a=>a.type);Tsb=dq({...Rsb,text2:Osb},a=>a.type,a=>a.type);Usb=dq({...Rsb,text3:Qsb},a=>a.type,a=>a.type);Vsb=dq({...Rsb,text2:Osb},a=>a.type,a=>a.type);Wsb=Ap({type:yp("plain"),format:Uq});Xsb=Ap({type:yp("currency"),format:Uq});
Ysb=Ap({type:yp("percentage"),format:Uq});Zsb=Ap({type:yp("date"),format:Csb});$sb=__c.Bp({plain:Wsb,currency:Xsb,percentage:Ysb,date:Zsb},a=>a.type);atb=Kp(Ap({type:yp("plain_number"),nk:Wsb}));__c.btb=Kp(Ap({type:yp("currency"),nk:Xsb}));ctb=Kp(Ap({type:yp("percentage"),nk:Ysb}));dtb=Kp(Ap({type:yp("date"),nk:Zsb}));etb=Np({attributes:{label:__c.ar},Ub:{fill:__c.wr}});ftb=Pp(etb);gtb=Np({values:{type:yp("select")},attributes:{nk:Ip($sb)},Ub:{options:ftb}});htb=Kp(Ap({type:yp("mention")}));itb=Kp(Ap({type:yp("embed")}));
__c.jtb=dq({plain_number:atb,currency:__c.btb,percentage:ctb,date:dtb,select:gtb,mention:htb,embed:itb},a=>a.type,a=>a.type);ktb=a=>Np({attributes:{Dl:__c.fr},Ub:{content:Hp(Fp(a)),Vc:Hp(Fp(__c.jtb))}});ltb=ktb(Ssb);
mtb={static:{fontFamily:yr.fontFamily,fontSize:yr.fontSize,fontWeight:yr.fontWeight,fontStyle:yr.fontStyle,yN:yr.yN,verticalAlign:yr.verticalAlign,color:yr.color,xn:yr.xn,By:yr.By,link:yr.link,letterSpacing:yr.letterSpacing,lineHeight:yr.lineHeight,direction:yr.direction,Vz:yr.Vz,xI:yr.xI},OWa:{},pw:{}};__c.Hr=__c.kmb(mtb);
ntb={nna:lq("block",Enb,"inherit"),mna:lq("block",Enb,"inherit"),pna:lq("block",Enb,"inherit"),ona:lq("block",Enb,"inherit"),ina:lq("block",Cnb,"inherit"),hna:lq("block",Cnb,"inherit"),kna:lq("block",Cnb,"inherit"),jna:lq("block",Cnb,"inherit"),F$a:lq("block",Gnb,"inherit"),E$a:lq("block",Gnb,"inherit"),H$a:lq("block",Gnb,"inherit"),G$a:lq("block",Gnb,"inherit")};otb=["auto",...grb];
ptb={static:{...mtb.static,CY:lq("block",Bnb,"#ffffff"),...ntb,textAlign:mq("block",otb),Iz:mq("block",["overflow","wrap","clip"]),Pl:mq("block",["middle","start","end"])},OWa:{},pw:{}};__c.Ar=__c.kmb(ptb);__c.nsb=new zrb;__c.qtb=__c.nsb.domain.HP();rtb=Np({values:{id:Uq},attributes:{height:qob,minHeight:__c.er}});stb=Np({values:{id:Uq},attributes:{width:qob}});Pp(rtb);Pp(stb);lsb=new __c.tlb(rtb,Dkb(rtb.Ota));msb=new __c.tlb(stb,Dkb(stb.Ota));ttb=Np({values:{qka:Uq,dHa:Uq,zge:Tq}});utb=__c.Jp(ttb);
vtb=Np({values:{type:yp("replace")},attributes:{jl:Gp(vqb),BPa:__c.ar,eHa:__c.ar}});wtb=dq({replace:vtb},a=>a.type,a=>a.type);xtb=Pp(wtb);ytb=ktb(Tsb);ztb=ktb(Usb);Atb=ktb(Vsb);Btb=new Qrb(ytb);Ctb=new Qrb(ztb);Dtb=new Qrb(Atb);__c.Etb=(new Qrb(ltb)).domain.HP();__c.Ftb=new __c.osb(Btb);__c.Gtb=new __c.osb(Ctb);__c.Htb=new __c.osb(Dtb);Itb=Np({attributes:{zwa:__c.gr,d4a:__c.gr}});Jtb=Np({Ub:{freeze:Itb}});
Ktb=a=>Np({Ub:{xR:a,il:utb,yt:__c.xr,view:Jtb,t6:xtb},attributes:{direction:Gp(yp("ltr","rtl")),KN:br}});Ltb=a=>a.Di({computed:{attributes:{width:void 0,height:void 0},Ub:{layout:void 0,rows:void 0,cols:void 0,Wob:void 0,Hab:void 0,c4a:void 0,kVa:void 0,d4:void 0,f1:void 0,Mc:void 0,Nc:void 0},create:b=>onb(b)}});Mtb=Ktb(__c.Ftb);__c.Ntb=Ltb(Mtb);Otb=Ktb(__c.Gtb);__c.Ptb=Ltb(Otb);Qtb=Ktb(__c.Htb);__c.Rtb=Ltb(Qtb);
}).call(self, self._5880d4398c473aa67256e87589eaef11);}

}])
//# sourceMappingURL=sourcemaps/dbf77f5ccb9e963c.js.map